<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <script type="text/javascript">
        window.NREUM||(NREUM={}),__nr_require=function(t,n,e){function r(e){if(!n[e]){var o=n[e]={exports:{}};t[e][0].call(o.exports,function(n){var o=t[e][1][n];return r(o||n)},o,o.exports)}return n[e].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,n,e){function r(t){try{s.console&&console.log(t)}catch(n){}}var o,i=t("ee"),a=t(15),s={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,o.indexOf("dev")!==-1&&(s.dev=!0),o.indexOf("nr_dev")!==-1&&(s.nrDev=!0))}catch(c){}s.nrDev&&i.on("internal-error",function(t){r(t.stack)}),s.dev&&i.on("fn-err",function(t,n,e){r(e.stack)}),s.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(s,function(t,n){return t}).join(", ")))},{}],2:[function(t,n,e){function r(t,n,e,r,s){try{p?p-=1:o(s||new UncaughtException(t,n,e),!0)}catch(f){try{i("ierr",[f,c.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,n,e){this.message=t||"Uncaught error with no additional information",this.sourceURL=n,this.line=e}function o(t,n){var e=n?null:c.now();i("err",[t,e])}var i=t("handle"),a=t(16),s=t("ee"),c=t("loader"),f=t("gos"),u=window.onerror,d=!1,l="nr@seenError",p=0;c.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(h){"stack"in h&&(t(8),t(7),"addEventListener"in window&&t(5),c.xhrWrappable&&t(9),d=!0)}s.on("fn-start",function(t,n,e){d&&(p+=1)}),s.on("fn-err",function(t,n,e){d&&!e[l]&&(f(e,l,function(){return!0}),this.thrown=!0,o(e))}),s.on("fn-end",function(){d&&!this.thrown&&p>0&&(p-=1)}),s.on("internal-error",function(t){i("ierr",[t,c.now(),!0])})},{}],3:[function(t,n,e){t("loader").features.ins=!0},{}],4:[function(t,n,e){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(8),s=t(7),c="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",l="resource",p="-start",h="-end",m="fn"+p,w="fn"+h,v="bstTimer",y="pushState",g=t("loader");g.features.stn=!0,t(6);var b=NREUM.o.EV;o.on(m,function(t,n){var e=t[0];e instanceof b&&(this.bstStart=g.now())}),o.on(w,function(t,n){var e=t[0];e instanceof b&&i("bst",[e,n,this.bstStart,g.now()])}),a.on(m,function(t,n,e){this.bstStart=g.now(),this.bstType=e}),a.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),this.bstType])}),s.on(m,function(){this.bstStart=g.now()}),s.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=g.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+c]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["c"+c]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["webkitC"+c]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],5:[function(t,n,e){function r(t){for(var n=t;n&&!n.hasOwnProperty(u);)n=Object.getPrototypeOf(n);n&&o(n)}function o(t){s.inPlace(t,[u,d],"-",i)}function i(t,n){return t[1]}var a=t("ee").get("events"),s=t(18)(a,!0),c=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";n.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,n){var e=t[1],r=c(e,"nr@wrapped",function(){function t(){if("function"==typeof e.handleEvent)return e.handleEvent.apply(e,arguments)}var n={object:t,"function":e}[typeof e];return n?s(n,"fn-",null,n.name||"anonymous"):e});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,n,e){var r=t("ee").get("history"),o=t(18)(r);n.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(t,n,e){var r=t("ee").get("raf"),o=t(18)(r),i="equestAnimationFrame";n.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],8:[function(t,n,e){function r(t,n,e){t[0]=a(t[0],"fn-",null,e)}function o(t,n,e){this.method=e,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,e)}var i=t("ee").get("timer"),a=t(18)(i),s="setTimeout",c="setInterval",f="clearTimeout",u="-start",d="-";n.exports=i,a.inPlace(window,[s,"setImmediate"],s+d),a.inPlace(window,[c],c+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(c+u,r),i.on(s+u,o)},{}],9:[function(t,n,e){function r(t,n){d.inPlace(n,["onreadystatechange"],"fn-",s)}function o(){var t=this,n=u.context(t);t.readyState>3&&!n.resolved&&(n.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",s)}function i(t){g.push(t),h&&(x?x.then(a):w?w(a):(E=-E,O.data=E))}function a(){for(var t=0;t<g.length;t++)r([],g[t]);g.length&&(g=[])}function s(t,n){return n}function c(t,n){for(var e in t)n[e]=t[e];return n}t(5);var f=t("ee"),u=f.get("xhr"),d=t(18)(u),l=NREUM.o,p=l.XHR,h=l.MO,m=l.PR,w=l.SI,v="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],g=[];n.exports=u;var b=window.XMLHttpRequest=function(t){var n=new p(t);try{u.emit("new-xhr",[n],n),n.addEventListener(v,o,!1)}catch(e){try{u.emit("internal-error",[e])}catch(r){}}return n};if(c(p,b),b.prototype=p.prototype,d.inPlace(b.prototype,["open","send"],"-xhr-",s),u.on("send-xhr-start",function(t,n){r(t,n),i(n)}),u.on("open-xhr-start",r),h){var x=m&&m.resolve();if(!w&&!m){var E=1,O=document.createTextNode(E);new h(a).observe(O,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===v||a()})},{}],10:[function(t,n,e){function r(t){var n=this.params,e=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!n.aborted){if(e.duration=a.now()-this.startTime,4===t.readyState){n.status=t.status;var i=o(t,this.lastSize);if(i&&(e.rxSize=i),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;e.cbTime=this.cbTime,f.emit("xhr-done",[t],t),s("xhr",[n,e,this.startTime])}}}function o(t,n){var e=t.responseType;if("json"===e&&null!==n)return n;var r="arraybuffer"===e||"blob"===e||"json"===e?t.response:t.responseText;return h(r)}function i(t,n){var e=c(n),r=t.params;r.host=e.hostname+":"+e.port,r.pathname=e.pathname,t.sameOrigin=e.sameOrigin}var a=t("loader");if(a.xhrWrappable){var s=t("handle"),c=t(11),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(14),h=t(13),m=window.XMLHttpRequest;a.features.xhr=!0,t(9),f.on("new-xhr",function(t){var n=this;n.totalCbs=0,n.called=0,n.cbTime=0,n.end=r,n.ended=!1,n.xhrGuids={},n.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){n.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,n){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&n.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,n){var e=this.metrics,r=t[0],o=this;if(e&&r){var i=h(r);i&&(e.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof n.onload))&&o.end(n)}catch(e){try{f.emit("internal-error",[e])}catch(r){}}};for(var s=0;s<d;s++)n.addEventListener(u[s],this.listener,!1)}),f.on("xhr-cb-time",function(t,n,e){this.cbTime+=t,n?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof e.onload||this.end(e)}),f.on("xhr-load-added",function(t,n){var e=""+l(t)+!!n;this.xhrGuids&&!this.xhrGuids[e]&&(this.xhrGuids[e]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,n){var e=""+l(t)+!!n;this.xhrGuids&&this.xhrGuids[e]&&(delete this.xhrGuids[e],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,n){n instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],n)}),f.on("removeEventListener-end",function(t,n){n instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],n)}),f.on("fn-start",function(t,n,e){n instanceof m&&("onload"===e&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,n){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,n],n)})}},{}],11:[function(t,n,e){n.exports=function(t){var n=document.createElement("a"),e=window.location,r={};n.href=t,r.port=n.port;var o=n.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=n.hostname||e.hostname,r.pathname=n.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!n.protocol||":"===n.protocol||n.protocol===e.protocol,a=n.hostname===document.domain&&n.port===e.port;return r.sameOrigin=i&&(!n.hostname||a),r}},{}],12:[function(t,n,e){function r(){}function o(t,n,e){return function(){return i(t,[f.now()].concat(s(arguments)),n?null:this,e),n?void 0:this}}var i=t("handle"),a=t(15),s=t(16),c=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",p=l+"ixn-";a(d,function(t,n){u[n]=o(l+n,!0,"api")}),u.addPageAction=o(l+"addPageAction",!0),u.setCurrentRouteName=o(l+"routeName",!0),n.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,n){var e={},r=this,o="function"==typeof n;return i(p+"tracer",[f.now(),t,e],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],e),o)try{return n.apply(this,arguments)}catch(t){throw c.emit("fn-err",[arguments,this,t],e),t}finally{c.emit("fn-end",[f.now()],e)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,n){h[n]=o(p+n)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],13:[function(t,n,e){n.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(n){return}}}},{}],14:[function(t,n,e){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),n.exports=r},{}],15:[function(t,n,e){function r(t,n){var e=[],r="",i=0;for(r in t)o.call(t,r)&&(e[i]=n(r,t[r]),i+=1);return e}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],16:[function(t,n,e){function r(t,n,e){n||(n=0),"undefined"==typeof e&&(e=t?t.length:0);for(var r=-1,o=e-n||0,i=Array(o<0?0:o);++r<o;)i[r]=t[n+r];return i}n.exports=r},{}],17:[function(t,n,e){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],18:[function(t,n,e){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(16),a="nr@original",s=Object.prototype.hasOwnProperty,c=!1;n.exports=function(t,n){function e(t,n,e,o){function nrWrapper(){var r,a,s,c;try{a=this,r=i(arguments),s="function"==typeof e?e(r,a):e||{}}catch(f){l([f,"",[r,a,o],s])}u(n+"start",[r,a,o],s);try{return c=t.apply(a,r)}catch(d){throw u(n+"err",[r,a,d],s),d}finally{u(n+"end",[r,a,c],s)}}return r(t)?t:(n||(n=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,n,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<n.length;c++)s=n[c],a=t[s],r(a)||(t[s]=e(a,f?s+o:o,i,s))}function u(e,r,o){if(!c||n){var i=c;c=!0;try{t.emit(e,r,o,n)}catch(a){l([a,e,r,o])}c=i}}function d(t,n){if(Object.defineProperty&&Object.keys)try{var e=Object.keys(t);return e.forEach(function(e){Object.defineProperty(n,e,{get:function(){return t[e]},set:function(n){return t[e]=n,n}})}),n}catch(r){l([r])}for(var o in t)s.call(t,o)&&(n[o]=t[o]);return n}function l(n){try{t.emit("internal-error",n)}catch(e){}}return t||(t=o),e.inPlace=f,e.flag=a,e}},{}],ee:[function(t,n,e){function r(){}function o(t){function n(t){return t&&t instanceof r?t:t?c(t,s,i):i()}function e(e,r,o,i){if(!l.aborted||i){t&&t(e,r,o);for(var a=n(o),s=h(e),c=s.length,f=0;f<c;f++)s[f].apply(a,r);var d=u[y[e]];return d&&d.push([g,e,r,a]),a}}function p(t,n){v[t]=h(t).concat(n)}function h(t){return v[t]||[]}function m(t){return d[t]=d[t]||o(e)}function w(t,n){f(t,function(t,e){n=n||"feature",y[e]=n,n in u||(u[n]=[])})}var v={},y={},g={on:p,emit:e,get:m,listeners:h,context:n,buffer:w,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var s="nr@context",c=t("gos"),f=t(15),u={},d={},l=n.exports=o();l.backlog=u},{}],gos:[function(t,n,e){function r(t,n,e){if(o.call(t,n))return t[n];var r=e();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(t,n,e){function r(t,n,e,r){o.buffer([t],r),o.emit(t,n,e)}var o=t("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(t,n,e){function r(t){var n=typeof t;return!t||"object"!==n&&"function"!==n?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");n.exports=r},{}],loader:[function(t,n,e){function r(){if(!x++){var t=b.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&n))return u.abort();f(y,function(n,e){t[n]||(t[n]=e)}),c("mark",["onload",a()+b.offset],null,"api");var e=l.createElement("script");e.src="https://"+t.agent,n.parentNode.insertBefore(e,n)}}function o(){"complete"===l.readyState&&i()}function i(){c("mark",["domContent",a()+b.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(s=Math.max((new Date).getTime(),s))-b.offset}var s=(new Date).getTime(),c=t("handle"),f=t(15),u=t("ee"),d=window,l=d.document,p="addEventListener",h="attachEvent",m=d.XMLHttpRequest,w=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},g=m&&w&&w[p]&&!/CriOS/.test(navigator.userAgent),b=n.exports={offset:s,now:a,origin:v,features:{},xhrWrappable:g};t(12),l[p]?(l[p]("DOMContentLoaded",i,!1),d[p]("load",r,!1)):(l[h]("onreadystatechange",o),d[h]("onload",r)),c("mark",["firstbyte",s],null,"api");var x=0,E=t(17)},{}]},{},["loader",2,10,4,3]);
        ;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"8ec420b26b",applicationID:"128226514",sa:1}
        </script>

        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="noindex">
        
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?83dc37" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/blog/page/41.html" />
        <meta property="og:title" content="Blog - Doctrine - PHP Database Tools" />
        <meta property="og:description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://staging.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/contribute/" id="navbarContributeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contribute</a>

                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/website/">Contribute to Website</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <main role="main" class="container-wrapper container">
                        <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2010/11/18/doctrine2-behavioral-extensions.html">Doctrine2 Behavioral Extensions</a></h2>
        </header>

        <p class="lead">
            Posted on 2010-11-18
                            by
                                    gmorkevicius
                                    </p>

        <hr />

        <div>
            <p>These behavioral extensions will give you another view on Doctrine2
capabilities handling behaviors through the EventListeners. These
extensions operate like some of the most commonly used behaviors,
leaving the domain objects as clean as possible. Annotations makes it
easy to understand an intended behavior of properties on your Entities.</p>

<div style="float: left; width: 450px;">
    <div style="padding: 15px; border: 1px solid #ccc; margin: 0 15px; background: #eee; color: #888">
    <p style="margin: 0;">

Hi, my name is Gediminas Morkevicius, I have 4 year experience in C++
and PHP 5 and I'm very keen on new technologies and Doctrine2 is one of
them. Development is not only a job for me, but it is my lifestyle and
I'm pleased to give some love back to Doctrine2.

</p>
    <p style="margin: 10px 0 0;">

I would like to thank Doctrine2 and Symfony2 teams for these wonderful
projects. They have great potential.

</p>
    </div>
</div>

<p><strong>NOTE</strong> This blog entry relates to Doctrine2 Beta4 ORM version and
 could possibly be outdated depending on what the current version of
 Doctrine2 is at the time of you reading this post. Then integrating
 these extensions on your project it is recommended to use latest
 Doctrine2 library packages, because where are most recent updates
 used on extensions for metadata caching and annotations.</p>

<div style="clear:both"></div>

<p>Content:</p>

<ul>
<li>Introduction on behavioral extensions</li>
<li>Setup and autoloading</li>
<li>Translatable extension</li>
<li>Tree extension</li>
<li>Sluggable extension</li>
<li>Timestampable extension</li>
<li>All nested together</li>
</ul>

<p>First of all, this post intends to give an example on how "behaviors"
can be implemented through the Doctrine2 EventListeners. All these
behavioral extensions can be nested and support flush operation which
can include lots of update, insert and remove actions. This is the most
common issue when behavior development process is started.</p>

<p>Furthermore, all extensions are mapped by annotations consequently
leaving domain objects clean from interfaces and their methods. Plus,
the performance speed is even greater if cache driver is used, because
metadata for single Entity is mapped and validated only once.</p>

<p>Before we begin exploring the extensions, I&#96;m glad to mention that
these extensions are already available on Symfony2 Bundle ported by
Christophe Coevoet.</p>

<p>&#35;&#35; Setting up the autoloader and listeners</p>

<p>First of all, download this library from public github repository and
setup the autoloading for extensions:</p>

<pre><code class="sourceCode php">&lt;?php
$classLoader = new \Doctrine\Common\ClassLoader('Gedmo', "/path/to/library/DoctrineExtensions/lib");
$classLoader-&gt;register();
</code></pre>

<p>Translatable behavior will need additional annotation driver for
Translation Entity metadata. The example below illustrates the chain
driver implementation:</p>

<pre><code class="sourceCode php">&lt;?php
$chainDriverImpl = new \Doctrine\ORM\Mapping\Driver\DriverChain();
$yourDefaultDriverImpl = new \Doctrine\ORM\Mapping\Driver\YamlDriver('/yml/mapping/files'); // only an example
$translatableDriverImpl = $doctrineOrmConfig-&gt;newDefaultAnnotationDriver(
    '/path/to/library/DoctrineExtensions/lib/Gedmo/Translatable/Entity'
);
$chainDriverImpl-&gt;addDriver($yourDefaultDriverImpl, 'Entity');
$chainDriverImpl-&gt;addDriver($translatableDriverImpl, 'Gedmo\Translatable');
$doctrineOrmConfig-&gt;setMetadataDriverImpl($chainDriverImpl);
</code></pre>

<h1 id="attaching-the-event-listeners-on-the-event-manager">Attaching the Event Listeners on the event manager</h1>

<pre><code class="sourceCode php">&lt;?php
$evm = new \Doctrine\Common\EventManager();
// timestampable
$evm-&gt;addEventSubscriber(new \Gedmo\Timestampable\TimestampableListener());
// sluggable
$evm-&gt;addEventSubscriber(new \Gedmo\Sluggable\SluggableListener());
// tree
$evm-&gt;addEventSubscriber(new \Gedmo\Tree\TreeListener());
// translatable
$translationListener = new \Gedmo\Translatable\TranslationListener();
$translationListener-&gt;setTranslatableLocale('en_us');
// in real world app the locale should be loaded from session, example:
// Session::getInstance()-&gt;read('locale');
$evm-&gt;addEventSubscriber($translationListener);
// now this event manager should be passed to entity manager constructor

**NOTE** It is recommended to attach TranslationListener as the
last whereas sluggable extension must create a slug before
translating it.
</code></pre>

<p>&#35;&#35; Translatable</p>

<p>Translatable behavior offers a very handy solution for translating
specific record fields into different languages. Furthermore, it loads
the translations automatically for the currently used locale. Locale can
be set by TranslationListener during it's initialization or later. It
also leaves the possibility to force a specific locale directly on the
Entity itself.</p>

<p>Feature list:</p>

<ul>
<li>Translates all records automatically when object hydration is used</li>
<li>Supports a separate translation table for each Entity</li>
<li>There can be a default locale specified, which would force entity to
leave its original translation in default locale.</li>
</ul>

<h1 id="translatable-annotations%3A">Translatable annotations:</h1>

<ul>
<li>@gedmo:Translatable indicates that the column is translatable</li>
<li>@gedmo:TranslationEntity(class="my") this class annotation tells to
use specified Entity to store translations</li>
<li>@gedmo:Locale or @gedmo:Language indicates that the column must not
be mapped and that it may be used to override TranslationListener&#96;s
locale</li>
</ul>

<p>Translatable Entity example:</p>

<pre><code class="sourceCode php">&lt;?php
namespace Entity;

/**
 * @Entity
 */
class Article
{
    /**
     * @Id
     * @GeneratedValue
     * @Column(type="integer")
     */
    private $id;

    /**
     * @gedmo:Translatable
     * @Column(type="string", length=128)
     */
    private $title;

    /**
     * @gedmo:Translatable
     * @Column(type="text")
     */
    private $content;

    /**
     * @gedmo:Locale
     */
    private $locale;

    public function getId()
    {
        return $this-&gt;id;
    }

    public function setTitle($title)
    {
        $this-&gt;title = $title;
    }

    public function getTitle()
    {
        return $this-&gt;title;
    }

    public function setContent($content)
    {
        $this-&gt;content = $content;
    }

    public function getContent()
    {
        return $this-&gt;content;
    }

    public function setTranslatableLocale($locale)
    {
        $this-&gt;locale = $locale;
    }
}
</code></pre>

<p>There is no need for any additional operations while working with
Translatable Entities. All processing is done by event listener, just
like in good old behaviors. Except that in Doctrine2 the code is simpler
and easy to understand and you may inspect it and customize if you see
any point in doing that.</p>

<p>Here are standard usage examples, the locale was set to "en&#95;us" on
listener:</p>

<pre><code class="sourceCode php">&lt;?php
$article = new \Entity\Article;
$article-&gt;setTitle('my title in en');
$article-&gt;setContent('my content in en');
$em-&gt;persist($article);
$em-&gt;flush();
</code></pre>

<p>This inserted an article and populated the translations for it in
"en&#95;us" locale. Now lets translate it into another language:</p>

<pre><code class="sourceCode php">&lt;?php
// first load the article
$article = $em-&gt;find('Entity\Article', 1 /*article id*/);
$article-&gt;setTitle('my title in de');
$article-&gt;setContent('my content in de');
$article-&gt;setTranslatableLocale('de_de'); // change locale
$em-&gt;persist($article);
$em-&gt;flush();
</code></pre>

<p>This updated an article and inserted the translations for it in "de&#95;de"
locale. The TranslationRepository gives some handy methods on retrieving
all translations:</p>

<pre><code class="sourceCode php">&lt;?php
$em-&gt;clear(); // ensure the cache is clean
$article = $em-&gt;find('Entity\Article', 1 /*article id*/);
$repository = $em-&gt;getRepository('Gedmo\Translatable\Entity\Translation');
$translations = $repository-&gt;findTranslations($article);
/* $translations contains:
Array (
    [de_de] =&gt; Array
        (
            [title] =&gt; my title in de
            [content] =&gt; my content in de
        )

    [en_us] =&gt; Array
        (
            [title] =&gt; my title in en
            [content] =&gt; my content in en
        )
)*/
// the locale now is "en_us" and current article::title in db is "my title in de"
echo $article-&gt;getTitle();
// prints: "my title in en" because it loads the translation automatically
</code></pre>

<h1 id="using-the-%22default-locale%22%3A">Using the "default locale":</h1>

<p>In some cases we need the default translation as a fallback if record
does not have a translation on globally used locale. In that case
TranslationListener uses the current value of Entity. But there is a way
to specify a default locale which would force Entity to keep
it<code>s field value on default locale. And if record has already been translated in this locale, the record will not update it</code>s
value, only insert a new translation into translation table. You can
specify the default locale on TranslationListener&#96;s initialization:</p>

<pre><code class="sourceCode php">&lt;?php
$translationListener-&gt;setDefaultLocale('en_us');
</code></pre>

<h1 id="using-a-diferent-translation-entity-for-translation-storage%3A">Using a diferent Translation Entity for translation storage:</h1>

<p>In some cases when there are thousands of records we would like to have
a single table for translations of this Entity in order to increase the
performance on translation loading speed. The example below will show
how to specify a diferent Entity for your translations by extending the
translation mapped superclass. Thanks to Christophe Coevoet for the idea
on translation abstraction.</p>

<pre><code class="sourceCode php">&lt;?php
namespace Entity\Translation;

use Gedmo\Translatable\Entity\AbstractTranslation;

/**
 * @Table(name="article_translations", indexes={
 *      @index(name="article_translation_idx", columns={"locale", "entity", "foreign_key", "field"})
 * })
 * @Entity(repositoryClass="Gedmo\Translatable\Repository\TranslationRepository")
 */
class ArticleTranslation extends AbstractTranslation
{
    /**
     * All required columns are mapped through inherited superclass
     */
}
</code></pre>

<p>This Entity will be used instead of default Translation Entity only if
we specify a class annotation @gedmo:TranslationEntity(class="Entity").
Now lets slightly modify our Article Entity:</p>

<pre><code class="sourceCode php">&lt;?php
/**
 * @Entity
 * @gedmo:TranslationEntity(class="Entity\Translation\ArticleTranslation")
 */
class Article
{
    // ...
}
</code></pre>

<p>Now all translations of Article will be stored and queried from a
specific table.</p>

<p>&#35;&#35; Tree</p>

<p>Tree behavior is not a Nested Set which it was in the first version of
Doctrine. This one does not require any TreeManager nor NodeWrapper and
it does not support multiple roots on tree because it is meant to be
simple and is implemented through the event listener. All standard Tree
operations are accessible through TreeNodeRepository which is advisable
to be used for Tree structured Entities. This Tree allows all traverse
operations to be done on your nodes. When performance or advanced
customizations becomes an issue, a more advanced implementation like
nested-set by Brandon Turner might be needed.</p>

<p>Tree annotations:</p>

<ul>
<li>@gedmo:TreeLeft identifies the column as storage of Tree left value</li>
<li>@gedmo:TreeRight identifies the column as storage of Tree right
value</li>
<li>@gedmo:TreeParent this will identify this column as a ManyToOne
relation of parent node</li>
</ul>

<p>All these annotations are required for the Tree to be functional. And
here is an example of a simple Tree Entity:</p>

<pre><code class="sourceCode php">&lt;?php
namespace Entity;

/**
 * use repository for handy tree functions
 * @Entity(repositoryClass="Gedmo\Tree\Repository\TreeNodeRepository")
 */
class Category
{
    /**
     * @Column(type="integer")
     * @Id
     * @GeneratedValue
     */
    private $id;

    /**
     * @Column(length=64)
     */
    private $title;

    /**
     * @gedmo:TreeLeft
     * @Column(name="lft", type="integer")
     */
    private $lft;

    /**
     * @gedmo:TreeRight
     * @Column(name="rgt", type="integer")
     */
    private $rgt;

    /**
     * @gedmo:TreeParent
     * @ManyToOne(targetEntity="Category", inversedBy="children")
     */
    private $parent;

    /**
     * @OneToMany(targetEntity="Category", mappedBy="parent")
     * @OrderBy({"lft" = "ASC"})
     */
    private $children;

    public function getId()
    {
        return $this-&gt;id;
    }

    public function setTitle($title)
    {
        $this-&gt;title = $title;
    }

    public function getTitle()
    {
        return $this-&gt;title;
    }

    public function setParent(Category $parent)
    {
        $this-&gt;parent = $parent;
    }

    public function getParent()
    {
        return $this-&gt;parent;
    }
}
</code></pre>

<p>Basic usage example:</p>

<pre><code class="sourceCode php">&lt;?php
$food = new Entity\Category();
$food-&gt;setTitle('Food');

$fruits = new Entity\Category();
$fruits-&gt;setTitle('Fruits');
$fruits-&gt;setParent($food);

$vegetables = new Entity\Category();
$vegetables-&gt;setTitle('Vegetables');
$vegetables-&gt;setParent($food);

$carrots = new Entity\Category();
$carrots-&gt;setTitle('Carrots');
$carrots-&gt;setParent($vegetables);

$em-&gt;persist($food);
$em-&gt;persist($fruits);
$em-&gt;persist($vegetables);
$em-&gt;persist($carrots);
$em-&gt;flush();
</code></pre>

<p>The result after flush will generate the tree of food chain :)</p>

<pre><code>/food (1-8)
    /fruits (2-3)
    /vegetables (4-7)
        /carrots (5-6)
</code></pre>

<h1 id="using-treenoderepository-functions%3A">Using TreeNodeRepository functions:</h1>

<pre><code class="sourceCode php">&lt;?php
$repo = $em-&gt;getRepository('Entity\Category');

$food = $repo-&gt;findOneByTitle('Food');
echo $repo-&gt;childCount($food);
// prints: 3
echo $repo-&gt;childCount($food, true/*direct*/);
// prints: 2
$children = $repo-&gt;children($food);
// $children contains:
// 3 nodes
$children = $repo-&gt;children($food, false, 'title');
// will sort the children by title
$carrots = $repo-&gt;findOneByTitle('Carrots');
$path = $repo-&gt;getPath($carrots);
/* $path contains:
   0 =&gt; Food
   1 =&gt; Vegetables
   2 =&gt; Carrots
*/

// verification and recovery of tree
$repo-&gt;verify();
$em-&gt;clear(); // ensures cache clean
// can return TRUE if tree is valid, or array of errors found on tree
$repo-&gt;recover();
$em-&gt;clear(); // ensures cache clean
// if tree has errors it will try to fix all tree nodes

// single node removal
$vegies = $repo-&gt;findOneByTitle('Vegitables');
$repo-&gt;removeFromTree($vegies);
// it will remove this node from tree and reparent all children

// reordering the tree
$repo-&gt;reorder(null/*reorder starting from parent*/, 'title');
$em-&gt;clear(); // ensures cache clean
// it will reorder all tree node left-right values by the title

// moving up and down the nodes, by changing their (left, right) values
$carrots = $repo-&gt;findOneByTitle('Carrots');
$repo-&gt;moveUp($carrots, 1/*by one position*/);
// carrots now should be at the top in it`s level
$repo-&gt;moveDown($carrots, true/*to bottom*/);
// carrots now should be at the bottom in it`s level
</code></pre>

<p>After using such Tree operations like: reorder, recover, verify it is
recommended to clear the EntityManager cache since it may have cached
nodes with old left and right values. This would be an issue if you plan
on using nodes during the same request after mentioned operations. And
if you need some custom functions on your Node repository - simply
extend the TreeNodeRepository.</p>

<p>&#35;&#35; Sluggable</p>

<p>Sluggable behavior will build the slug from annotated fields on a chosen
slug field which should store the generated slug. Slugs can be unique
and styled. Currently this extension does not support unique constraint
on slug field in cases when there are many inserts on a single flush
operation, because it cannot issue a query to ensure uniqueness. Use a
simple index instead.</p>

<h1 id="sluggable-annotations%3A">Sluggable annotations:</h1>

<ul>
<li>@gedmo:Sluggable all columns identified by this annotation will be
included in a slug</li>
<li>@gedmo:Slug this column will be used to store the generated slug</li>
</ul>

<pre><code class="sourceCode php">&lt;?php
namespace Entity;

/**
 * @Entity
 */
class Article
{
    /** @Id @GeneratedValue @Column(type="integer") */
    private $id;

    /**
     * @gedmo:Sluggable
     * @Column(name="title", type="string", length=64)
     */
    private $title;

    /**
     * @gedmo:Sluggable
     * @Column(name="code", type="string", length=16)
     */
    private $code;

    /**
     * @gedmo:Slug
     * @Column(name="slug", type="string", length=128, unique=true)
     */
    private $slug;

    public function getId()
    {
        return $this-&gt;id;
    }

    public function setTitle($title)
    {
        $this-&gt;title = $title;
    }

    public function getTitle()
    {
        return $this-&gt;title;
    }

    public function setCode($code)
    {
        $this-&gt;code = $code;
    }

    public function getCode()
    {
        return $this-&gt;code;
    }

    public function getSlug()
    {
        return $this-&gt;slug;
    }
}
</code></pre>

<p>Basic usage example:</p>

<pre><code class="sourceCode php">&lt;?php
$article = new Entity\Article();
$article-&gt;setTitle('the title');
$article-&gt;setCode('my code');
$em-&gt;persist($article);
$em-&gt;flush();

echo $article-&gt;getSlug();
// prints: the-title-my-code
</code></pre>

<p>&#35;&#35;&#35; Some other configuration options:</p>

<ul>
<li>updatable (optional, default=true) - true to update the slug on
sluggable field changes, false - otherwise</li>
<li>unique (optional, default=true) - true if slug should be unique and
if identical it will be prefixed, false - otherwise</li>
<li>separator (optional, default="-") - separator which will separate
words in slug</li>
<li>style (optional, default="default") - "default" all letters will be
lowercase, "camel" - first letter will be uppercase</li>
</ul>

<pre><code class="sourceCode php">&lt;?php
// diferent slug configuration example
class Article
{
    // ...
    /**
     * @gedmo:Slug(style="camel", separator="_", updatable=false, unique=false)
     * @Column(name="slug", type="string", length=128, unique=true)
     */
    private $slug;
    // ...
}

// result would be: The_Title_My_Code
</code></pre>

<p>&#35;&#35; Timestampable</p>

<p>Timestampable behavior will automate the update of date fields on your
Entities. It works through annotations and can update fields on
creation, update or even on specific internal or related Entity property
change.</p>

<h1 id="timestampable-annotations%3A">Timestampable annotations:</h1>

<ul>
<li>@gedmo:Timestampable this annotation specifies that this column is
timestampable, by default it updates this column on general update.
If column is not (date, datetime or time) it will trigger an
exception. Bellow are listed available configuration options:</li>
</ul>

<p>Available configuration options:</p>

<ul>
<li>on - is the main option and can be: create, update or change. This
option indicates when an update should be triggered</li>
<li>field - only valid if on="change" is specified, tracks property for
changes</li>
<li>value - only valid if on="change" is specified, if tracked field has
the specified value when it triggers an update</li>
</ul>

<pre><code class="sourceCode php">&lt;?php
namespace Entity;

/**
 * @Entity
 */
class Article
{
    /** @Id @GeneratedValue @Column(type="integer") */
    private $id;

    /**
     * @Column(type="string", length=128)
     */
    private $title;

    /**
     * @var datetime $created
     *
     * @gedmo:Timestampable(on="create")
     * @Column(type="date")
     */
    private $created;

    /**
     * @var datetime $updated
     *
     * @Column(type="datetime")
     * @gedmo:Timestampable(on="update")
     */
    private $updated;

    public function getId()
    {
        return $this-&gt;id;
    }

    public function setTitle($title)
    {
        $this-&gt;title = $title;
    }

    public function getTitle()
    {
        return $this-&gt;title;
    }

    public function getCreated()
    {
        return $this-&gt;created;
    }

    public function getUpdated()
    {
        return $this-&gt;updated;
    }
}
</code></pre>

<p>&#35;&#35; All nested together</p>

<pre><code class="sourceCode php">&lt;?php
namespace Entity;

/**
 * @Entity(repositoryClass="Gedmo\Tree\Repository\TreeNodeRepository")
 */
class Category
{
    /**
     * @Column(name="id", type="integer")
     * @Id
     * @GeneratedValue
     */
    private $id;

    /**
     * @gedmo:Translatable
     * @gedmo:Sluggable
     * @Column(length=64)
     */
    private $title;

    /**
     * @gedmo:TreeLeft
     * @Column(type="integer")
     */
    private $lft;

    /**
     * @gedmo:TreeRight
     * @Column(type="integer")
     */
    private $rgt;

    /**
     * @gedmo:TreeParent
     * @ManyToOne(targetEntity="Category", inversedBy="children")
     */
    private $parent;

    /**
     * @OneToMany(targetEntity="Category", mappedBy="parent")
     * @OrderBy({"lft" = "ASC"})
     */
    private $children;

    /**
     * @gedmo:Translatable
     * @gedmo:Slug(style="camel", separator="_")
     * @Column(length=128)
     */
    private $slug;

    /**
     * @gedmo:Timestampable(on="create")
     * @Column(type="date")
     */
    private $created;

    /**
     * @gedmo:Timestampable(on="update")
     * @Column(type="datetime")
     */
    private $updated;

    public function getId()
    {
        return $this-&gt;id;
    }

    public function setTitle($title)
    {
        $this-&gt;title = $title;
    }

    public function getTitle()
    {
        return $this-&gt;title;
    }

    public function setParent(Category $parent)
    {
        $this-&gt;parent = $parent;
    }

    public function getParent()
    {
        return $this-&gt;parent;
    }

    public function getCreated()
    {
        return $this-&gt;created;
    }

    public function getUpdated()
    {
        return $this-&gt;updated;
    }

    public function getSlug()
    {
        return $this-&gt;slug;
    }
}
</code></pre>

<p>After running some inserts you will get the expected result. Don&#96;t be
afraid to use concurrent flush with many inserts and updates or even
remove operations, everything is meant to work fine.</p>

<p>Some of you may think that using no interface takes longer to check
Entities on events. In fact, it takes only a single 'if' statement and a
cache check on first request. This way the process is much cleaner.</p>

<p>Maybe these extensions will help some of you realize how clean domain
objects can be and how well the model represents itself. It's much more
convenient than Active Record - browsing several extended classes, going
through magic methods of those classes. While here you see everything in
one grasp.</p>

<p>There will be updates on my blog page and new articles which may
interest some of you. You can give some love back by forking a
repository and creating an ODM Document support on extensions or
suggesting me an idea of improvements or maybe an issue which you have
detected.</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2010/11/18/common-rc2-dbal-rc2-release.html">Common RC2 and DBAL RC3 released</a></h2>
        </header>

        <p class="lead">
            Posted on 2010-11-18
                            by
                                    beberlei
                                    </p>

        <hr />

        <div>
            <p>Today we are happy to announce the second release candidate of Doctrine
Common and the first, second and third release candidate (yes, all in
one!) of DBAL.</p>

<p>In the Common package 3 bugs have been fixed, in the DBAL package 9 bugs
have been fixed. See the changelogs for details:</p>

<ul>
<li><a href="http://www.doctrine-project.org/jira/browse/DCOM/fixforversion/10093">Common RC1
Changelog</a></li>
<li><a href="http://www.doctrine-project.org/jira/browse/DBAL/fixforversion/10094">DBAL RC3
Changelogt</a></li>
</ul>

<p>We are especially thankful for the support Microsoft has been giving us
to integrate PDO Sqlsrv. Juozas was invited to <a href="http://www.jumpincamp.com">Jumpin
Camp</a> and had time to finish full support for
the SQL Server.</p>

<p>The release of the first release candidate of the ORM package is not far
away. We will be waiting some days to get some early feedback on the
latest updates (updated Common and DBAL dependencies). Expect the first
release candidate for someday next week.</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2010/09/01/birthday-release-party.html">Birthday Release Party</a></h2>
        </header>

        <p class="lead">
            Posted on 2010-09-01
                            by
                                    romanb
                                    </p>

        <hr />

        <div>
            <p>Today is Jonathan's birthday and in order to celebrate properly we're
rolling out three new releases.</p>

<h1 id="doctrine-common-rc1">Doctrine Common RC1</h1>

<p>The first release candidate of the Doctrine Common project.</p>

<ul>
<li><a href="http://www.doctrine-project.org/projects/common/2.0/download/2.0.0RC1">Installation</a></li>
<li><a href="http://www.doctrine-project.org/jira/browse/DCOM/fixforversion/10081">Changelog</a></li>
</ul>

<h1 id="doctrine-dbal-beta4">Doctrine DBAL BETA4</h1>

<p>The last beta release of the Doctrine DBAL project.</p>

<ul>
<li><a href="http://www.doctrine-project.org/projects/dbal/2.0/download/2.0.0BETA4">Installation</a></li>
<li><a href="http://www.doctrine-project.org/jira/browse/DBAL/fixforversion/10071">Changelog</a></li>
</ul>

<h1 id="doctrine-orm-beta4">Doctrine ORM BETA4</h1>

<p>The last beta release of the Doctrine ORM project.</p>

<ul>
<li><a href="http://www.doctrine-project.org/projects/orm/2.0/download/2.0.0BETA4">Installation</a></li>
<li><a href="http://www.doctrine-project.org/jira/browse/DDC/fixforversion/10072">Changelog</a></li>
</ul>

<p>Again we want to thank everyone who participated in the ongoing
development efforts, whether it was through bug reports, comments,
critique, praise and/or actual code contributions.</p>

<h1 id="what-next">What next</h1>

<p>Some might know that we originally planned to release 2.0 stable today
but we're simply not there yet. However, things are going quite well and
we're confident that the final releases of the 2.0 versions are close.
The ORM and DBAL now enter a final phase of bug-fixing to resolve any
issues we find critical for the final releases and will then follow the
Common project into RC (release candidate) status.</p>

        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/40.html">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/42.html">Older Posts</a></li>        </ul>
    </nav>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://staging.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?2a2af0"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

        
        
        
            </body>
</html>
