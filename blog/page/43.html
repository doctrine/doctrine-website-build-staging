<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://new.doctrine-project.org/css/style.css?9" rel="stylesheet" type="text/css" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://new.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://new.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://new.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://new.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://new.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://new.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://new.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://new.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://new.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://new.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://new.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://new.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://new.doctrine-project.org/images/mstile-310x310.png" />

        <link rel="stylesheet" href="https://new.doctrine-project.org/components/highlightjs/styles/railscasts.css?9" />
        <link rel="alternate" type="application/atom+xml" href="https://new.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
        
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>
    </head>
    <body>

        <header>
            <nav class="navbar navbar-expand-md navbar-dark border-bottom">
                <a class="navbar-brand text-hide" href="https://new.doctrine-project.org/"><img src="https://new.doctrine-project.org/images/doctrine-logo.svg" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://new.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/lexer/">Lexer</a>
                                                            </div>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/search/">Search</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://github.com/doctrine/" target="_blank">Development</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Begin page content -->
        <main role="main" class="container">
                            
                                
                                
                
                <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Blog</li>
    </ol>
</nav>

    <article>
        <header>
            <h2><a href="https://new.doctrine-project.org/2010/08/07/dc2-experimental-associations-id-fields">Experimental Doctrine 2 Feature: Associated Entities as Id Fields</a></h2>
        </header>

        <p class="lead">
            Posted on 2010-08-07
                            by
                                    beberlei
                                    </p>

        <hr />

        <div>
            <p>Doctrine 2 supports composite keys of primitive types from the
beginning, however we realized early that a very common use-case is
a composite key with one or more elements being associated
entities. For example think of a CMS System which allows Article
Translations. A common SQL schema for this case would be:</p>

<pre><code class="">[sql]
CREATE TABLE article (id INT PRIMARY KEY, title VARCHAR(255), body LONGTEXT);

CREATE TABLE article_translations (article_id INT, language CHAR(3), title VARCHAR(255), body LONGTEXT, PRIMARY KEY (article_id, language));
</code></pre>
<p>This sort of schema cannot be mapped with Doctrine 2 currently, it
would be required to add another column <code>id</code> on the
article\_translations table and enforce a unique constraint on
article\_id + language.</p>
<p>Under the umbrella of
<a href="http://www.doctrine-project.org/jira/browse/DDC-117">DDC-117</a>
and some related tickets there were discussions about adding a
feature that would help solve this problem: Allowing to add @Id to
@ManyToOne or @OneToOne mappings. I committed this feature into an
experimental Git branch today and we ask you to test this with as
many crazy scenarios and use-cases as possible.</p>
<p>This feature can potentially be uber-powerful, however we want to
be sure that it works correctly and does not have to many
problematic edge-cases. Therefore we need your feedback.</p>
<ul><li class="dash"> Go to
   <a href="http://github.com/doctrine/doctrine2/commits/DDC-117">http://github.com/doctrine/doctrine2/commits/DDC-117</a>
   to see the code</li>
<li class="dash"> <a href="http://github.com/doctrine/doctrine2/blob/DDC-117/tests/Doctrine/Tests/ORM/Functional/Ticket/DDC117Test.php">Have a look at the functional tests</a>
   to see the synatx</li>
<li class="dash"> Checkout the Git Repository and switch to the experimental
   branch <code>git checkout DDC-117</code></li>
<li class="dash"> Do crazy testing against this branch!</li>
</ul>

<p>Personally I want this feature in core very much, however composite
keys are very tricky. We want to find as many problematic cases
with this feature as possible. That would enable us to evaluate if
this approach will be merged into Doctrine 2.1 or not.</p>
<blockquote><p><strong>NOTE</strong></p>
<p>This feature currently only works with Annotations Mapping Driver.
XML and YAML will follow later.</p>
</blockquote>
<p>By the way, the previous example is actually one of the functional
test-cases for this feature:</p>
<pre><code class="php">&lt;?php
/**
 * @Entity
 */
class DDC117Article
{
    /** @Id @Column(type=&quot;integer&quot;) @GeneratedValue */
    private $id;
    /** @Column */
    private $title;

    /**
     * @OneToMany(targetEntity=&quot;DDC117Translation&quot;, mappedBy=&quot;article&quot;)
     */
    private $translations;

    public function __construct($title)
    {
        $this-&gt;title = $title;
        $this-&gt;translations = new \Doctrine\Common\Collections\ArrayCollection();
    }
}

/**
 * @Entity
 */
class DDC117Translation
{
    /**
     * @Id @ManyToOne(targetEntity=&quot;DDC117Article&quot;)
     */
    private $article;

    /**
     * @Id @column(type=&quot;string&quot;)
     */
    private $language;

    /**
     * @column(type=&quot;string&quot;)
     */
    private $title;

    public function __construct($article, $language, $title)
    {
        $this-&gt;article = $article;
        $this-&gt;language = $language;
        $this-&gt;title = $title;
    }
}

$article = new DDC117Article(&quot;foo&quot;);
$em-&gt;persist($article);
$em-&gt;flush();

$translation = new DDC117Translation($article, &quot;en&quot;, &quot;Bar&quot;);
$em-&gt;persist($translation);
$em-&gt;flush();
</code></pre>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://new.doctrine-project.org/2010/08/06/doctrine2-orm-beta3">Doctrine ORM Beta 3 released</a></h2>
        </header>

        <p class="lead">
            Posted on 2010-08-06
                            by
                                    romanb
                                    </p>

        <hr />

        <div>
            <p>We would like to announce the immediate release of Doctrine ORM
BETA 3:</p>
<ul><li class="dash"> <a href="http://www.doctrine-project.org/projects/orm/2.0/download/2.0.0BETA3">Installation</a></li>
<li class="dash"> <a href="http://www.doctrine-project.org/jira/browse/DDC/fixforversion/10060">Changelog</a></li>
</ul>

<p>We fixed 45 issues, most of them bugs reported by our users. The
ORM package is now in a state where no new features will be added
and we will fully concentrate the efforts on fixing bugs and
bringing the release to a stable state.</p>
<p>Notable changes include:</p>
<ul><li class="dash"> <code>EntityManager#merge()</code> has been improved considerably and now
   also accepts new entities.</li>
<li class="dash"> Uninitialized Proxies can now be serialized and only throw an
   exception when they are unserialized and accessed without being
   merged into the EntityManager.</li>
<li class="dash"> New method <code>EntityManager#getPartialReference()</code> that returns
   a partial entity that only contains the entities primary key and
   won't lazy-load (hence &quot;partial&quot;).</li>
</ul>

<p>This release contains three backwards incompatible changes you
should know about when upgrading:</p>
<a id="title.1"></a><h1>Changed SQL implementation of Postgres and Oracle DateTime types</h1>
<p>The DBAL Type &quot;datetime&quot; included the Timezone Offset in both
Postgres and Oracle. As of this version they are now generated
without Timezone (TIMESTAMP WITHOUT TIME ZONE instead of TIMESTAMP
WITH TIME ZONE). See
<a href="http://www.doctrine-project.org/jira/browse/DBAL-22?focusedCommentId=13396&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#action_13396">this comment to Ticket DBAL-22</a>
for more details as well as migration issues for PostgreSQL and
Oracle.</p>
<p>Both Postgres and Oracle will throw Exceptions during hydration of
Objects with &quot;DateTime&quot; fields unless migration steps are taken!</p>
<a id="title.2"></a><h1>Removed multi-dot/deep-path expressions in DQL</h1>
<p>The support for implicit joins in DQL through the multi-dot/Deep
Path Expressions was dropped. For example:</p>

<pre><code class="">SELECT u FROM User u WHERE u.group.name = ?1
</code></pre>
<p>&quot;u.group.name&quot; is a nested path expression that is an implicit
join. Internally the DQL parser would rewrite these queries to:</p>

<pre><code class="">SELECT u FROM User u JOIN u.group g WHERE g.name = ?1
</code></pre>
<p>This explicit notation will be the only supported notation as of
now. The internal handling of nested path expressions for implicit
joins in the DQL Parser was too complex and error prone in edge
cases and required special treatment for several features we added.
Note that this does not remove any existing functionality, only a
convenience notation that can be expressed otherwise. Hence the
generated SQL of both notations is exactly the same.</p>
<a id="title.3"></a><h1>Default Allocation Size for Sequences</h1>
<p>The default allocation size for sequences has been changed from 10
to 1. This step was made to not cause confusion with users and also
because it is partly some kind of premature optimization.</p>
<a id="title.4"></a><h1>What next</h1>
<p>It seems likely that we will not be able to hold the anticipated
release date of September 1st for the final release. Instead
September 1st will likely see the last beta release, BETA 4, after
which we hope to enter the release candiates soon, followed by the
stable release.</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://new.doctrine-project.org/2010/07/30/doctrine-mongodb-odm-1-0-0alpha2-released">Doctrine MongoDB ODM 1.0.0ALPHA2 Released</a></h2>
        </header>

        <p class="lead">
            Posted on 2010-07-30
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <p>Today I am happy to bring you the second alpha release of the brand
new Doctrine MongoDB Object Document Mapper (ODM). The release
contains several bug fixes and a few enhancements. You now have the
ability to mix types of documents in references and embedded
documents. You can read the
<a href="http://www.doctrine-project.org/blog/mixing-types-of-documents">blog post</a>
about mixing types of documents to learn more.</p>
<h2>        

<p>Bug</p>
</h2>
<ul>
<li>

<p>[MODM-12] - Undefined variable error</p>
</li>
<li>

<p>[MODM-13] - Problems with merge()</p>
</li>
<li>

<p>[MODM-14] - Default database when @Document annotation does not
contain a db attribute.</p>
</li>
<li>

<p>[MODM-16] - loadById failing on custom ids</p>
</li>
<li>

<p>[MODM-17] - Multiple array / object with same content/properties do
not get persisted</p>
</li>
<li>

<p>[MODM-19] - Field annotation missing &quot;name&quot; support</p>
</li>
<li>

<p>[MODM-20] - SINGLE\_COLLECTION inheritance does not work</p>
</li>
<li>

<p>[MODM-21] - AnnotationDriver doesn't allow custom types</p>
</li>
<li>

<p>[MODM-22] - Document incorrectly scheduled for update</p>
</li>
<li>

<p>[MODM-25] - AnnotationDriver.php Line 175</p>
</li>
<li>

<p>[MODM-28] - xml mapping : embedded-document node is ignored, can't
persist</p>
</li>
</ul>

<h2>        

<p>Improvement</p>
</h2>
<ul>
<li>

<p>[MODM-24] - Hydratation of extra fields</p>
</li>
<li>

<p>[MODM-26] - MongoCursor doesn't implement Countable interface</p>
</li>
</ul>

<a id="title.1"></a><h1>Download</h1>
<p>You can directly download the PEAR package file
<a href="http://www.doctrine-project.org/downloads/DoctrineMongoDBODM-1.0.0ALPHA2.tgz">here</a>.
You can manually extract the code or you can install the PEAR
package file locally.</p>

<pre><code class="">$ pear install /path/to/DoctrineMongoDBODM-1.0.0ALPHA2.tgz
</code></pre>
<p>Or you can checkout from github:</p>

<pre><code class="">$ git clone git://github.com/doctrine/mongodb-odm.git mongodb_odm
$ cd mongodb_odm
$ git checkout 1.0.0ALPHA2
</code></pre>
<p>And you can also install via PEAR:</p>

<pre><code class="">$ pear install pear.doctrine-project.org/DoctrineMongoDBODM-1.0.0ALPHA2
</code></pre>

        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://new.doctrine-project.org/blog/page/42.html">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://new.doctrine-project.org/blog/page/44.html">Older Posts</a></li>        </ul>
    </nav>
                    </main>

        <footer class="footer">
            <div class="container">
                <i class="fa fa-copyright"></i> 2018 Doctrine
            </div>
        </footer>

        <script type="text/javascript">
            // When the user scrolls down 20px from the top of the document, show the button
            window.onscroll = function() {scrollFunction()};

            function scrollFunction() {
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    document.getElementById('back-to-top').style.display = "block";
                } else {
                    document.getElementById('back-to-top').style.display = "none";
                }
            }

            // When the user clicks on the button, scroll to the top of the document
            function topFunction() {
                document.body.scrollTop = 0; // For Safari
                document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
            }
        </script>

        <button onclick="topFunction()" id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://new.doctrine-project.org/components/highlightjs/highlight.pack.js?9"></script>
        <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
