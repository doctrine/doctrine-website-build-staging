<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?3625e4" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/lexer/">Lexer</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <main role="main" class="container-wrapper container">
                        <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2008/10/26/symfony-doctrine-schema-manager.html">symfony Doctrine Schema Manager</a></h2>
        </header>

        <p class="lead">
            Posted on 2008-10-26
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            As you all probably know, Doctrine has been tightly integrated with
`a few <http://trac.doctrine-project.org/wiki/integrate>`_
different PHP frameworks. Since symfony was my choice of framework
a few years back, I have dedicated a lot of time towards working on
the integration between the two.

Something I've always thought would be fun to build and has been
one of the most requested items by users is a nice web based
interface for managing your schema and generate your models from
it. With the
`new form framework <http://www.symfony-project.org/blog/2008/10/18/spice-up-your-forms-with-some-nice-widgets-and-validators>`_
as of
`symfony 1.1 <http://www.symfony-project.org/blog/2008/06/30/the-wait-is-over-symfony-1-1-released>`_ ,
you can build rich forms with a nice OOP interface. This made it
extremely easy to make the schema manager feature of the
`sfDoctrineManagerPlugin <http://www.symfony-project.com/plugins/sfDoctrineManagerPlugin>`_.
It was as simple as automatically generating a set of forms from
the schema information data structure inside of Doctrine.

`|sfDoctrineManagerPlugin| <http://www.symfony-project.com/plugins/sfDoctrineManagerPlugin>`_

This symfony plugin allows you to manage all your schema
information from a nice web based interface. You can create new
schemas or load your existing schemas to edit. More information
about it as well as screen shots can be found
`here <http://www.symfony-project.com/plugins/sfDoctrineManagerPlugin>`_.


.. |sfDoctrineManagerPlugin| image:: http://www.symfony-project.org/uploads/plugins/5e25c2c7775a8ed169e2d9a6de8e2d1d98ffd110.png
        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2008/10/19/the-bleeding-edge-website-upgraded.html">The Bleeding Edge: Website Upgraded</a></h2>
        </header>

        <p class="lead">
            Posted on 2008-10-19
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            This weekend I decided it was time to completely dive in to the
awesomeness that is `symfony <http://www.symfony-project.com>`_
1.2. I upgraded the Doctrine website to 1.2 as well as Doctrine
1.1. I had several schema changes that I migrated to production
with the new
`Migrations features <http://www.doctrine-project.org/blog/new-to-migrations-in-1-1>`_
that were mentioned previously on the blog. It made the upgrade of
the website much easier. The primary motivation for diving in to
this was a blog post made on
`10/18/2008 <http://www.symfony-project.org/blog/2008/10/18/spice-up-your-forms-with-some-nice-widgets-and-validators>`_
and
`10/14/2008 <http://www.symfony-project.org/blog/2008/10/14/new-in-symfony-1-2-make-your-choice>`_
where Fabien talks about forms in symfony 1.2.

Below is an overview of some of the changes made.


-  Upgraded to symfony 1.2
-  Upgraded to Doctrine 1.1
-  New backend control panel for administering the content of the
   website
-  Single Sign-On(SSO) - We now have partial SSO. Trac and the main
   website authentication are shared now. The forum will be integrated
   soon.
-  New groundwork started for several new website features, new
   documentation, user contributed documentation, user contributed
   packages! and more.

Here are some screen shots of the backend magic that was generated
by symfony. I didn't have to do much and in one evening we have a
new content management system backend for the website.

Doctrine Releases
-----------------

The style and custom icons in this list of the available Doctrine
releases were added thanks to my custom theme built specifically
for the Doctrine backend.

.. figure:: http://www.doctrine-project.com/uploads/assets/api_release_list.png
   :align: center
   :alt: Doctrine Releases
   
   Doctrine Releases

Edit User SVN Access
--------------------

Thanks to the symfony form framework I was able to easily add a
custom widget for editing the website users svn access for all the
different Doctrine versions.

.. figure:: http://www.doctrine-project.com/uploads/assets/edit_user_svn_access.png
   :align: center
   :alt: Edit User SVN Access
   
   Edit User SVN Access

Doctrine Release Points
-----------------------

List of all the Doctrine sub-release points.

.. figure:: http://www.doctrine-project.com/uploads/assets/api_release_points_list.png
   :align: center
   :alt: Doctrine Release Points
   
   Doctrine Release Points

Edit Doctrine Release
---------------------

Edit a Doctrine release and control its stability as well as other
information.

.. figure:: http://www.doctrine-project.com/uploads/assets/edit_api_release.png
   :align: center
   :alt: Edit Doctrine Release
   
   Edit Doctrine Release

Edit Blog Post
--------------

Edit a blog post entry using markdown syntax.

.. figure:: http://www.doctrine-project.com/uploads/assets/edit_blog_post.png
   :align: center
   :alt: Edit Blog Post
   
   Edit Blog Post

        **NOTE** The source of this website can be downloaded via SVN at
        `http://www.doctrine-project.org/svnweb/trunk <http://www.doctrine-project.org/svnweb/trunk>`_
        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2008/10/18/new-to-migrations-in-1-1.html">New to Migrations in 1.1</a></h2>
        </header>

        <p class="lead">
            Posted on 2008-10-18
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            In Doctrine 1.1 migrations are much easier to work with. In
addition to the increased stability we have enhanced the migrations
in a few ways to simplify the use of them dramatically.

We have introduced the following features.


-  Diff Tool - Generate migration classes by simply changing your
   schema and generating the migrations.
-  Down Automation - Doctrine now has the ability to automate the
   down of of a migration call.

Generating Migrations
---------------------

Imagine you have the following starting schema.

::

    [yml]
    ---
    User:
      columns:
        username: string(255)
        password: string(255)

Build your initial models from the schema.

::

    $ ./doctrine generate-models-yaml

Now we want to enhance our schema to add some new columns as well
as a new model with the following schema.

::

    [yml]
    ---
    User:
      columns:
        username: string(255)
        password: string(255)
        email_address: string(255)
    
    Phonenumber:
      columns:
        user_id: integer
        phonenumber: string(25)
      relations:
        User:
          onDelete: CASCADE
          foreignAlias: Phonenumbers

Now by simply changing our schema we can generate the migrations
required to upgrade our database.

::

    $ ./doctrine generate-migrations-diff

Now in your migrations directory you will see 3 migration classes
created for you.

``1224273485_add_user.php``
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: php

    <?php
    <?php
    /**
     * This class has been auto-generated by the Doctrine ORM Framework
     */
    class AddUser extends Doctrine_Migration_Base
    {
      public function up()
      {
        $this->createTable('up', 'user', array('id' => array('type' => 'integer', 'length' => 8, 'autoincrement' => true, 'primary' => true), 'username' => array('type' => 'string', 'length' => 255), 'password' => array('type' => 'string', 'length' => 255)), array('indexes' => array(), 'primary' => array(0 => 'id')));
      }
    
      public function down()
      {
        $this->dropTable('up', 'user');
      }
    }

``1224273485_version1.php``
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: php

    <?php
    <?php
    /**
     * This class has been auto-generated by the Doctrine ORM Framework
     */
    class Version1 extends Doctrine_Migration_Base
    {
      public function up()
      {
        $this->createTable('up', 'phonenumber', array('id' => array('type' => 'integer', 'length' => 8, 'autoincrement' => true, 'primary' => true), 'user_id' => array('type' => 'integer', 'length' => 8), 'phonenumber' => array('type' => 'string', 'length' => 25)), array('indexes' => array(), 'primary' => array(0 => 'id')));
        $this->addColumn('up', 'user', 'email_address', '255', 'string', array ());
      }
    
      public function down()
      {
        $this->dropTable('up', 'phonenumber');
        $this->removeColumn('up', 'user', 'email_address');
      }
    }

``1224273486_version2.php``
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: php

    <?php
    <?php
    /**
     * This class has been auto-generated by the Doctrine ORM Framework
     */
    class Version2 extends Doctrine_Migration_Base
    {
      public function up()
      {
        $this->addIndex('up', 'phonenumber', 'phonenumber_user_id_user_id', array('fields' => array(0 => 'user_id')));
        $this->createForeignKey('up', 'phonenumber', array('name' => 'phonenumber_user_id_user_id_idx', 'local' => 'user_id', 'foreign' => 'id', 'foreignTable' => 'user', 'onUpdate' => NULL, 'onDelete' => 'CASCADE'));
      }
    
      public function down()
      {
        $this->removeIndex('up', 'phonenumber', 'phonenumber_user_id_user_id', array('fields' => array(0 => 'user_id')));
        $this->dropForeignKey('up', 'phonenumber', array('name' => 'phonenumber_user_id_user_id_idx', 'local' => 'user_id', 'foreign' => 'id', 'foreignTable' => 'user', 'onUpdate' => NULL, 'onDelete' => 'CASCADE'));
      }
    }

Down Automation
---------------

In addition to Doctrine being able to generate migrations based on
your schema changes, you can now easily automate the down of most
methods. The last migration class could be simplified a lot by
doing the following.

.. code-block:: php

    <?php
    <?php
    /**
     * This class has been auto-generated by the Doctrine ORM Framework
     */
    class Version2 extends Doctrine_Migration_Base
    {
      public function migrate($direction)
      {
        $this->addIndex($direction, 'phonenumber', 'phonenumber_user_id_user_id', array('fields' => array(0 => 'user_id')));
        $this->createForeignKey($direction, 'phonenumber', array('name' => 'phonenumber_user_id_user_id_idx', 'local' => 'user_id', 'foreign' => 'id', 'foreignTable' => 'user', 'onUpdate' => NULL, 'onDelete' => 'CASCADE'));
      }
    }

Notice that in this example we only have one method named migrate()
which receives a direction. Most API methods are easy to automate
the opposite down so when migrate is called with $direction =
'down' then the index and foreign key will be dropped instead of
added.
        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/74.html">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/76.html">Older Posts</a></li>        </ul>
    </nav>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://staging.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?f32c09"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?36322d"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

        
        
        
            </body>
</html>
