<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://new.doctrine-project.org/css/style.css?9" rel="stylesheet" type="text/css" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://new.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://new.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://new.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://new.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://new.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://new.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://new.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://new.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://new.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://new.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://new.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://new.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://new.doctrine-project.org/images/mstile-310x310.png" />

        <link rel="stylesheet" href="https://new.doctrine-project.org/components/highlightjs/styles/railscasts.css?9" />
        <link rel="alternate" type="application/atom+xml" href="https://new.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
        
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>
    </head>
    <body>

        <header>
            <nav class="navbar navbar-expand-md navbar-dark border-bottom">
                <a class="navbar-brand text-hide" href="https://new.doctrine-project.org/"><img src="https://new.doctrine-project.org/images/doctrine-logo.svg" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://new.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/lexer/">Lexer</a>
                                                            </div>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/search/">Search</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://github.com/doctrine/" target="_blank">Development</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Begin page content -->
        <main role="main" class="container">
                            
                                
                                
                
                <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Blog</li>
    </ol>
</nav>

    <article>
        <header>
            <h2><a href="https://new.doctrine-project.org/2017/04/01/announcing-doctrine-4">Announcing Doctrine 4</a></h2>
        </header>

        <p class="lead">
            Posted on 2017-04-01
                            by
                                    <a href="mailto:malarzm@gmail.com">Maciej Malarz</a>
                                    </p>

        <hr />

        <div>
            <div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>This article is an April Fools joke.</p>
</div>
<p>It has been few months since we shed some light on the <a href="https://github.com/doctrine/doctrine2/issues/6211">future of Doctrine project</a>
and had an extensive insight into what <a href="https://twitter.com/guilhermeblanco">Guilherme</a> had been up to. Adding
tens of megabytes of IRC logs of internal discussion we felt we owe you an update on where Doctrine is and where
it's heading to:</p>
<a id="title.1"></a><h1>Doctrine 3 Is No More!</h1>
<p>Rest assured, we are in no way ditching all the code Guilherme hacked so far or any of the ideas that sprung
for the next major release. We are still looking into leveraging all goodies that were given to us with PHP 7.
We want the next Doctrine version to be an extremely stable and reliable piece of software. We are also still trying to figure out how to maintain all projects under Doctrine's umbrella effectively. To recap,
Doctrine is not only the ORM you all know, we are also maintaining a number of ODM projects (<a href="https://github.com/doctrine/mongodb-odm">MongoDB</a>
and <a href="https://github.com/doctrine/couchdb-odm">CouchDB</a> to name few) which all share basic concepts and code.
Some of them also face a major rewrite, like the much anticipated MongoDB ODM 2.0 with support for new MongoDB driver.</p>
<a id="title.2"></a><h1>Joining Forces</h1>
<p>Instead of having each team work independently and implement the same concepts multiple times across various libraries,
we decided it's for the best if we all work on one project and make it as good and robust as possible.
In the spirit of breaking boundaries, Doctrine 4 will be all about interoperability. <strong>Doctrine 4 will support
both RDBMS and NoSQL databases at the same time!</strong></p>
<a id="title.3"></a><h1>Following Latest Trends</h1>
<p>A really big thing we want to (re)introduce is an Active Record pattern. We recently ran a poll on the #doctrine IRC
channel and it turned out that 68% of developers die a little bit each time they inject a service, which
barely saves data to a database anyway, and miss the simplicity of having an entity save itself.</p>
<pre><code class="php">use Doctrine;

/**
 * @Doctrine\Entity(storage=&quot;MSSql&quot;)
 * @Doctrine\ActiveRecord
 */
class User
{
    /** @Doctrine\Id */
    public $id;

    /** @Doctrine\Field(type=&quot;string&quot;) */
    public $login;
}

$user = new User();
$user-&gt;load(10);
$user-&gt;login = 'malarzm';
$user-&gt;save();
</code></pre>
<p>Thanks to the <code>@Doctrine\ActiveRecord</code> annotation you're able to query for and save your entities easily. Please
notice that the `User` class does not extend any internal Doctrine class - you are still decoupled from the ORM!</p>
<p>We strongly believe that getting back to the Active Record pattern is the way to go for us. We weren't able to
fully get rid of the old fashioned Data Mapper pattern but you can expect its deprecation in one of first bug-fix releases
and full removal in a subsequent patch release (Active Record is replacing semantic versioning, too!)</p>
<p>Another big step towards the highly expected Developer eXperience was initially painful, as it required many
of us to come out of the Java bubble we live in, but we know it will be for the best. With the re-introduction of
Active Record the obvious next step is making all Doctrine utilities available in an easy and sane way: please welcome
static registries AND short method names!</p>
<pre><code class="php">use Doctrine;
use Entity\MongoLog;
use Entity\User;

Doctrine::em()-&gt;start(); // start a transaction
$user = new User(); // this is stored in MSSql
$user = 'malarzm';
$user-&gt;save(); // not saved yet
$log = new MongoLog($user, 'was created'); // this will be &quot;stored&quot; in MongoDB
$log-&gt;save(); // but not yet
Doctrine::em()-&gt;commit(); // commit a transaction ACROSS multiple storage engines
</code></pre>
<p>Big shout out goes to <a href="https://twitter.com/Ocramius">Marco</a>. Although he initially had a heart attack when first
hearing about this idea, he's come full circle after using the feature and is now a big proponent of static registries. Be sure
to watch for updates to all of his libraries in the near future!</p>
<a id="title.4"></a><h1>Try It Out Now!</h1>
<p>Uniting forces of all Doctrine developers has enabled us to ship an usable &quot;alpha&quot; version way sooner than originally
anticipated. But the truly thrilling news is that thanks to tremendous help from guys with <a href="https://3v4l.org/">3v4l.org</a>
we have set up a sandbox environment so everybody can have a hands-on experience using the new version of Doctrine:
please visit <a href="https://ocrami.us/">3v4l.org/doctrine4</a> and share your thoughts in the comments section below!</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://new.doctrine-project.org/2016/11/22/doctrine-mongodb-release-1.4">Doctrine MongoDB 1.4.0</a></h2>
        </header>

        <p class="lead">
            Posted on 2016-11-22
                            by
                                    <a href="mailto:alcaeus@alcaeus.org">Andreas Braun</a>
                                    </p>

        <hr />

        <div>
            <p>We are happy to announce the immediate availability of Doctrine MongoDB
Abstraction Layer <a href="https://github.com/doctrine/mongodb/releases/tag/1.4.0">1.4.0</a>.</p>
<a id="title.1"></a><h1>Passing context options to the driver</h1>
<p>With this release it's possible to pass driver options to the connection class,
which will then be passed on to the MongoDB driver. For example, to pass a
stream context with SSL context options, you could use the following code
snippet:</p>
<pre><code class="php">$context = stream_context_create([
    'ssl' =&gt; [
        'allow_self_signed' =&gt; false,
    ]
]);
$connection = new \Doctrine\MongoDB\Connection(null, [], null, null, ['context' =&gt; $context]);
</code></pre>
<a id="title.2"></a><h1>Passing multiple expressions to logical operators</h1>
<p>The <code>addAnd</code>, <code>addNor</code> and <code>addOr</code> methods in the query and aggregation
builders now take multiple expression objects. Instead of having to call the
method repeatedly, you may call it once with multiple arguments:</p>
<pre><code class="php">// Before
$builder
    -&gt;addAnd($someExpression)
    -&gt;addAnd($otherExpression);

// After
$builder-&gt;addAnd($someExpression, $otherExpression);
</code></pre>
<a id="title.3"></a><h1>Deprecations</h1>
<p>The <code>update</code> and <code>multiple</code> methods in the query have been deprecated in
favor of <code>updateOne</code> and <code>updateMany</code>. These deprecations help people using
ODM prepare for the next version of ODM which will utilize the new MongoDB
library API.</p>
<a id="title.4"></a><h1>Bug fixes in this release</h1>
<p>Notable fixes may be found in the
<a href="https://github.com/doctrine/mongodb/blob/master/CHANGELOG-1.4.md#140-2016-11-22">changelog</a>.
A full list of issues and pull requests included in this release may be found in the
<a href="https://github.com/doctrine/mongodb/issues?q=milestone%3A1.4.0">1.4.0 milestone</a>.</p>
<a id="title.5"></a><h1>PHP version support</h1>
<p>With this release, we have dropped support for PHP 5.5. Users using PHP 5.5 or
older are encouraged to upgrade to a newer PHP version. If you are using PHP 7.0
or 7.1, you can use this library by adding a polyfill for <code>ext-mongo</code>, like
<a href="https://github.com/alcaeus/mongo-php-adapter">mongo-php-adapter</a>.</p>
<a id="title.6"></a><h1>Future releases</h1>
<p>This release is the last planned minor release of the MongoDB Abstraction Layer,
with only bugfixes being done in maintenance releases. The library will not be
rewritten to support the new MongoDB driver. Users are encouraged to use the new
<a href="https://github.com/mongodb/mongo-php-library">MongoDB library</a>. Doctrine
MongoDB ODM will be adapted to support the new driver and the MongoDB library.</p>
<a id="title.7"></a><h1>Installation</h1>
<p>You can install the latest version using the following <code>composer.json</code> definitions:</p>
<pre><code class="json">{
    &quot;require&quot;: {
        &quot;doctrine/mongodb&quot;: &quot;^1.4.0&quot;
    }
}
</code></pre>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://new.doctrine-project.org/2016/10/07/doctrine-mongodb-odm-release-1.1.2-and-1.0">Doctrine MongoDB ODM 1.1.2 and 1.0.8 released</a></h2>
        </header>

        <p class="lead">
            Posted on 2016-10-07
                            by
                                    <a href="mailto:alcaeus@alcaeus.org">Andreas Braun</a>
                                    </p>

        <hr />

        <div>
            <p>We are happy to announce the immediate availability of Doctrine MongoDB ODM
<a href="https://github.com/doctrine/mongodb-odm/releases/tag/1.1.2">1.1.2</a> and
<a href="https://github.com/doctrine/mongodb-odm/releases/tag/1.0.8">1.0.8</a>.</p>
<a id="title.1"></a><h1>MongoDB ODM 1.0.8</h1>
<ul><li class="dash">calling <code>dropCollections()</code> in the SchemaManager did not drop GridFS
collections. <a href="https://github.com/doctrine/mongodb-odm/pull/1468">#1468</a></li>
<li class="dash">calling <code>clear()</code> on an uninitialized collection with <code>orphanRemoval</code>
enabled failed to remove orphaned documents. <a href="https://github.com/doctrine/mongodb-odm/pull/1500">#1500</a></li>
<li class="dash">Documents with identifiers evaluating to <code>false</code> (e.g. empty string or 0)
could not be reference using <code>createDBRef()</code> in DocumentManager. <a href="https://github.com/doctrine/mongodb-odm/pull/1503">#1503</a></li>
</ul>

<a id="title.2"></a><h1>MongoDB ODM 1.1.2</h1>
<ul><li class="dash">This release contains the bugfixes outlined for ODM 1.0.8 above</li>
<li class="dash">Querying for referenced objects in <code>findBy()</code> or <code>findOneBy()</code> did not work
properly due to incorrect preparation of the DBRef objects. <a href="https://github.com/doctrine/mongodb-odm/pull/1481">#1481</a></li>
</ul>

<a id="title.3"></a><h1>Installation</h1>
<p>You can install the latest version using the following <code>composer.json</code> definitions:</p>
<pre><code class="json">{
    &quot;require&quot;: {
        &quot;doctrine/mongodb-odm&quot;: &quot;^1.1.2&quot;
    }
}
</code></pre>
<a id="title.4"></a><h1>Support for Doctrine ODM 1.0.x</h1>
<p>As outlined previously, support for MongoDB ODM 1.0.x will end on December 9th,
2016. If you have not upgraded to version 1.1 yet, please do so to receive
future bug fixes.</p>

        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://new.doctrine-project.org/blog">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://new.doctrine-project.org/blog/page/3.html">Older Posts</a></li>        </ul>
    </nav>
                    </main>

        <footer class="footer">
            <div class="container">
                <i class="fa fa-copyright"></i> 2018 Doctrine
            </div>
        </footer>

        <script type="text/javascript">
            // When the user scrolls down 20px from the top of the document, show the button
            window.onscroll = function() {scrollFunction()};

            function scrollFunction() {
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    document.getElementById('back-to-top').style.display = "block";
                } else {
                    document.getElementById('back-to-top').style.display = "none";
                }
            }

            // When the user clicks on the button, scroll to the top of the document
            function topFunction() {
                document.body.scrollTop = 0; // For Safari
                document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
            }
        </script>

        <button onclick="topFunction()" id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://new.doctrine-project.org/components/highlightjs/highlight.pack.js?9"></script>
        <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
