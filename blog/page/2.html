<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="noindex">
        
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?2ff3c6" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/blog/page/2.html" />
        <meta property="og:title" content="Blog - Doctrine - PHP Database Tools" />
        <meta property="og:description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://staging.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/contribute/" id="navbarContributeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contribute</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/website/">Contribute to Website</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <main role="main" class="container-wrapper container">
                        <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2017/07/25/php-7.1-requirement-and-composer.html">PHP 7.1 requirement for Doctrine packages</a></h2>
        </header>

        <p class="lead">
            Posted on 2017-07-25
                            by
                                    <a href="mailto:alcaeus@alcaeus.org">Andreas Braun</a>
                                    </p>

        <hr />

        <div>
            <p>A few days ago, the Doctrine team released new versions of many
packages, dropping support for PHP 5.6 and 7.0, as well as HHVM. The
affected packages are:</p>

<ul>
<li>doctrine/common 2.8.0</li>
<li>doctrine/dbal 2.6.0</li>
<li>doctrine/collections 1.5.0</li>
<li>doctrine/inflector 1.2.0</li>
<li>doctrine/cache 1.7.0</li>
<li>doctrine/instantiator 1.1.0</li>
<li>doctrine/annotations 1.5.0</li>
</ul>

<p>Since many people are encountering issues with these updates, here are a
few suggestions to ensure your code continues working as usual.</p>

<h1 id="composer-version-constraints">Composer version constraints</h1>

<p>Chances are your version constraints in <code>composer.json</code> look something
like this:</p>

<pre><code class="sourceCode json">{
    "require": {
        "doctrine/orm": "^2.5"
    }
}
</code></pre>

<p>The <code>^2.5</code> constraint resolves to: <code>&gt;= 2.5.0 &amp;&amp; &lt;= 2.999999.999999</code>.
This is intended: our projects all follow <a href="http://semver.org/">Semantic
Versioning</a>, so you can safely install a new minor
version without having to fear BC breaks.</p>

<p>When determining what version to install, composer employs a SAT solver
to make sure all dependencies are fulfilled. In our example above, the
SAT solver finds a version newer than 2.5 that satisfies all
requirements.</p>

<h1 id="making-sure-you-get-a-compatible-version">Making sure you get a compatible version</h1>

<p>When you run <code>composer update</code> the next time, you'll automatically
receive updates for the packages mentioned above, provided that you are
running on PHP 7.1. If you are running an older PHP version, composer
will not install a version that requires PHP 7.1, since its requirements
are not fulfilled.</p>

<p>A common problem is people running a newer PHP version on their
developer machines than on their production servers. In this case,
running <code>composer update</code> on a developer machine (with PHP 7.1) might
happily pull in an update that simply won't work when deployed on a
production machine running PHP 5.6.</p>

<p>To make sure this doesn't happen to you, there are two choices:</p>

<ul>
<li>run <code>composer update</code> on a machine with the same PHP version that
you use in production</li>
<li>use the
<a href="https://getcomposer.org/doc/06-config.md#platform">platform.config</a>
config setting in <code>composer.json</code> to override your local PHP
version.</li>
</ul>

<h1 id="why-dropping-php-support-in-a-minor-version-is-not-a-bc-break">Why dropping PHP support in a minor version is not a BC break</h1>

<p>One question we frequently hear is, "isn't dropping support for a PHP
version a BC break"? In a nutshell, no. A BC break happens when there is
an incompatible change that your package manager can't handle. For
example, changing a method signature in a minor version is a no-go,
since the composer version constraints mentioned above assume any minor
upgrade can safely be used.</p>

<p>However, when we drop support for an older version of PHP, composer will
not consider the new version if the PHP version requirement is no longer
fulfilled. Thus, you won't end up with a fatal error due to a wrong
method signature, you just won't get the new version.</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2016/11/22/doctrine-mongodb-release-1.4.0.html">Doctrine MongoDB 1.4.0</a></h2>
        </header>

        <p class="lead">
            Posted on 2016-11-22
                            by
                                    <a href="mailto:alcaeus@alcaeus.org">Andreas Braun</a>
                                    </p>

        <hr />

        <div>
            <p>We are happy to announce the immediate availability of Doctrine MongoDB
Abstraction Layer
<a href="https://github.com/doctrine/mongodb/releases/tag/1.4.0">1.4.0</a>.</p>

<h1 id="passing-context-options-to-the-driver">Passing context options to the driver</h1>

<p>With this release it's possible to pass driver options to the connection
class, which will then be passed on to the MongoDB driver. For example,
to pass a stream context with SSL context options, you could use the
following code snippet:</p>

<pre><code class="sourceCode php">$context = stream_context_create([
    'ssl' =&gt; [
        'allow_self_signed' =&gt; false,
    ]
]);
$connection = new \Doctrine\MongoDB\Connection(null, [], null, null, ['context' =&gt; $context]);
</code></pre>

<h1 id="passing-multiple-expressions-to-logical-operators">Passing multiple expressions to logical operators</h1>

<p>The <code>addAnd</code>, <code>addNor</code> and <code>addOr</code> methods in the query and aggregation
builders now take multiple expression objects. Instead of having to call
the method repeatedly, you may call it once with multiple arguments:</p>

<pre><code class="sourceCode php">// Before
$builder
    -&gt;addAnd($someExpression)
    -&gt;addAnd($otherExpression);

// After
$builder-&gt;addAnd($someExpression, $otherExpression);
</code></pre>

<h1 id="deprecations">Deprecations</h1>

<p>The <code>update</code> and <code>multiple</code> methods in the query have been deprecated in
favor of <code>updateOne</code> and <code>updateMany</code>. These deprecations help people
using ODM prepare for the next version of ODM which will utilize the new
MongoDB library API.</p>

<h1 id="bug-fixes-in-this-release">Bug fixes in this release</h1>

<p>Notable fixes may be found in the
<a href="https://github.com/doctrine/mongodb/blob/master/CHANGELOG-1.4.md#140-2016-11-22">changelog</a>.
A full list of issues and pull requests included in this release may be
found in the <a href="https://github.com/doctrine/mongodb/issues?q=milestone%3A1.4.0">1.4.0
milestone</a>.</p>

<h1 id="php-version-support">PHP version support</h1>

<p>With this release, we have dropped support for PHP 5.5. Users using PHP
5.5 or older are encouraged to upgrade to a newer PHP version. If you
are using PHP 7.0 or 7.1, you can use this library by adding a polyfill
for <code>ext-mongo</code>, like
<a href="https://github.com/alcaeus/mongo-php-adapter">mongo-php-adapter</a>.</p>

<h1 id="future-releases">Future releases</h1>

<p>This release is the last planned minor release of the MongoDB
Abstraction Layer, with only bugfixes being done in maintenance
releases. The library will not be rewritten to support the new MongoDB
driver. Users are encouraged to use the new <a href="https://github.com/mongodb/mongo-php-library">MongoDB
library</a>. Doctrine
MongoDB ODM will be adapted to support the new driver and the MongoDB
library.</p>

<h1 id="installation">Installation</h1>

<p>You can install the latest version using the following <code>composer.json</code>
definitions:</p>

<pre><code class="sourceCode json">{
    "require": {
        "doctrine/mongodb": "^1.4.0"
    }
}
</code></pre>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2016/10/07/doctrine-mongodb-odm-release-1.1.2-and-1.0.8.html">Doctrine MongoDB ODM 1.1.2 and 1.0.8 released</a></h2>
        </header>

        <p class="lead">
            Posted on 2016-10-07
                            by
                                    <a href="mailto:alcaeus@alcaeus.org">Andreas Braun</a>
                                    </p>

        <hr />

        <div>
            <p>We are happy to announce the immediate availability of Doctrine MongoDB
ODM
<a href="https://github.com/doctrine/mongodb-odm/releases/tag/1.1.2">1.1.2</a>
and
<a href="https://github.com/doctrine/mongodb-odm/releases/tag/1.0.8">1.0.8</a>.</p>

<h1 id="mongodb-odm-1.0.8">MongoDB ODM 1.0.8</h1>

<ul>
<li>calling <code>dropCollections()</code> in the SchemaManager did not drop GridFS
collections. <a href="https://github.com/doctrine/mongodb-odm/pull/1468">&#35;1468</a></li>
<li>calling <code>clear()</code> on an uninitialized collection with <code>orphanRemoval</code>
enabled failed to remove orphaned documents.
<a href="https://github.com/doctrine/mongodb-odm/pull/1500">&#35;1500</a> - Documents
with identifiers evaluating to <code>false</code> (e.g. empty string or 0) could
not be reference using <code>createDBRef()</code> in DocumentManager.
<a href="https://github.com/doctrine/mongodb-odm/pull/1503">&#35;1503</a></li>
</ul>

<h1 id="mongodb-odm-1.1.2">MongoDB ODM 1.1.2</h1>

<ul>
<li><p>This release contains the bugfixes outlined for ODM 1.0.8 above</p></li>
<li><p>Querying for referenced objects in <code>findBy()</code> or <code>findOneBy()</code> did not
work properly due to incorrect preparation of the DBRef objects.
<a href="https://github.com/doctrine/mongodb-odm/pull/1481">&#35;1481</a></p></li>
</ul>

<h1 id="installation">Installation</h1>

<p>You can install the latest version using the following <code>composer.json</code>
definitions:</p>

<pre><code class="sourceCode json">{
    "require": {
        "doctrine/mongodb-odm": "^1.1.2"
    }
}
</code></pre>

<h1 id="support-for-doctrine-odm-1.0.x">Support for Doctrine ODM 1.0.x</h1>

<p>As outlined previously, support for MongoDB ODM 1.0.x will end on
December 9th, 2016. If you have not upgraded to version 1.1 yet, please
do so to receive future bug fixes.</p>

        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/3.html">Older Posts</a></li>        </ul>
    </nav>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://staging.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?2a2af0"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

        
        
        
            </body>
</html>
