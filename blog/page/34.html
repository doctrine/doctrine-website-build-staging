<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?3625e4" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/lexer/">Lexer</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <main role="main" class="container-wrapper container">
                        <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2011/11/21/a-doctrine-orm-odm-base-class.html">An ORM/ODM Base Class</a></h2>
        </header>

        <p class="lead">
            Posted on 2011-11-21
                            by
                                    Benjamin Eberlei
                                    </p>

        <hr />

        <div>
            One of most common complaints about Doctrine2 is the requirement to write
getters/setters for all the fields and assocations of every entity. A concern
that immediately follows is that Doctrine 2 is not suitable for Rapid-Application-Development.

The problem is purely a usability concern and there are a bunch of very easy ways ouf of this problem:

- A base-object that has __get/__set.
- The EntityGenerator can generate getters/setters
- An IDE that generates getters/setters (Netbeans, PHPStorm)

We have been very critical of ActiveRecord since we started the development
of Doctrine 2 for various reasons. Mostly because we don't think coupling the
database to your domain objects is a good choice for testability an maintainabilty
reasons.

However we do see the need for Doctrine 2 to be suitable for RAD projects.
With the launch of Symfony2 and other frameworks with tight Doctrine 2 integration
this requirement has become even more important.

That is why we will introduce a very lightweight base-class into Doctrine.
We managed to write this base-class on an abstract level against the Common
Metadata interface, such that CouchDB-, MongoDB- and PHPCR-ODM implementations
benefit from this as well.

Using a new hook in Doctrine 2.2-DEV you can now inject the EntityManager (ObjectManager)
and the metadata description into each entity during construction. This metadata
is used to implement the magic __call hook implementing getters/setters
and association management methods.

Example
-------

A simple example will demonstrate this:

    <?php
    use Doctrine\Common\Persistence\PersistentObject;
    use Doctrine\ORM\EntityManager;

    /**
     * @Entity
     **/
    class User extends PersistentObject
    {
        /** @Id @Column(type="integer") @GeneratedValue **/
        protected $id;

        /** @Column(type="string") **/
        protected $name;

        /** @OneToMany(targetEntity="Phonenumber", mappedBy="user") **/
        protected $phonenumbers;
    }

Extending from `PersistentObject` will make getters/setters available
for your entities. Bi-directional associations are handled automatically.

.. code-block:: php

    <?php
    /**
     * @Entity
     **/
    class Phonenumber extends PersistentObject
    {
        /** @Id @Column(type="string") **/
        private $number;

        /** @ManyToOne(targetEntity="User", inversedBy="phonenumbers") **/
        private $user;
    }

The only configuration call for the `PersistentObject` is a registration
of the responsible entity/document manager:

.. code-block:: php

    <?php
    $entityManager = EntityManager::create(...);
    PersistentObject::setObjectManager($entityManager);

You can now start using the entities as simple as this:

.. code-block:: php

    <?php
    $number = new Phonenumber();
    $number->setNumber(123454);
    $user = new User();
    $user->setName("Benjamin");
    $user->addPhonenumbers($number);

    echo $user->getName();
    foreach ($user->getPhonenumbers() AS $number) {
        echo $number->getNumber();
    }

Future Developments
-------------------

First important notice: We will not develop the `PersistentObject` into a full-fledged active record.
Doctrine focuses on being a DataMapper. We do however provide a bunch of new hooks in version 2.2
that will allow you to turn Doctrine 2 into an active record very easily:

- Inject EntityManager and ClassMetadata

If your entity implements `Doctrine\Common\Persistent\ObjectManagerAware` then the ObjectManager
and ClassMetadata of the entity will be injected during construction.

- EntityManager#flush() can now flush one entity only

When you pass a single entity to EntityManager#flush() this entity will be the only
one flushed into the database. Cascade persist rules are applied to this object.
With this feature and access to the EntityManager inside your entities you can
now start implementing an efficient Active Record with "Record#save()" and "Record#delete()"
methods.

- PHP 5.4 and Traits

The next version of PHP is already in Beta 2 and will probably be released in the next months.
One of the most powerful feature of this release will be Traits, something very suitable for
Doctrine and ORMs in general.

No worries: Doctrine 2 will always be supporting 5.3, however we will probably ship
with optional features that are using the trait functionality. High on the list:

- Porting `PersistentObject` to a trait
- Serialization of entities from a trait (ToArray(), ToJson()). Available as a service to PHP 5.3
- ActiveEntity trait that extends the `PersistentObject` one.

Based on this feature set it should even be possible to add behaviors to Doctrine 2,
although we won't focus on implementing behaviors in the core team.

Last words
----------

I would really appreciate people starting to test the `PersistentObject` if they
like too and give us feedback.
        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2011/09/25/doctrine-maintenance-sep2011.html">Maintenance 2.1 Releases for Common, DBAL and ORM and DBAL 2.0.9</a></h2>
        </header>

        <p class="lead">
            Posted on 2011-09-25
                            by
                                    beberlei
                                    </p>

        <hr />

        <div>
            We have released the maintenance versions Common 2.1.2, DBAL 2.1.3
and ORM 2.1.2.


-  `Common 2.1.2 Changelog <http://www.doctrine-project.org/jira/browse/DCOM/fixforversion/10161>`_
-  `DBAL 2.1.3 Changelog <http://www.doctrine-project.org/jira/browse/DBAL/fixforversion/10162>`_
-  `ORM 2.1.2 Changelog <http://www.doctrine-project.org/jira/browse/DDC/fixforversion/10154>`_

A total of 20 bugs have been fixed in all 3 components. The DBAL
release contains a security fix for the Oracle driver fixing
`a possible SQL injection issue <http://www.doctrine-project.org/jira/browse/DBAL-164>`_.
If you are using Oracle please update immediately. This security
fix was backported to 2.0 and a new 2.0.9 version was released.
        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2011/08/29/dbal-security-2011-1.html">Security releases 2.0.8 and 2.1.2</a></h2>
        </header>

        <p class="lead">
            Posted on 2011-08-29
                            by
                                    beberlei
                                    </p>

        <hr />

        <div>
            It was brought to our attention that identifier quoting in Doctrine
DBAL has a potential security problem when user-input is passed
into this function, making the security aspect of this
functionality obsolete. We fixed as soon as we realized it and
apologize for to our users for this error.

We released versions 2.1.2 and 2.0.8 of DBAL that both contain a
fix for the problem. You can grab the code from
`PEAR <http://pear.doctrine-project.org>`_ ,
`Github <http://github.com/doctrine/dbal>`_ or the
`Downloads section <http://www.doctrine-project.org/projects/dbal/download>`_.

If you make use of AbstractPlatform::quoteIdentifier() or
Doctrine::quoteIdentifier() please upgrade immediately. The ORM
itself does not use identifier quoting in combination with
user-input, however we still urge everyone to update to the latest
version of DBAL.
        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/33.html">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/35.html">Older Posts</a></li>        </ul>
    </nav>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://staging.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?f32c09"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?36322d"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

        
        
        
            </body>
</html>
