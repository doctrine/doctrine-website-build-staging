<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?3625e4" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/lexer/">Lexer</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <main role="main" class="container-wrapper container">
                        <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2009/06/13/doctrine-visiting-conferences-around-the-world.html">Doctrine visiting conferences around the world</a></h2>
        </header>

        <p class="lead">
            Posted on 2009-06-13
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <p>This last month I have been present at a few events to speak about
Doctrine. I visited Verona, Italy for the phpDay conference and this
last week I was present at the first Symfony conference in Paris,
France. I also have given a few talks at some smaller local events such
as the Nashville Enterprise LAMP group. Below are the links to the
presentations on slideshare.</p>

<h1 id="what%27s-new-in-doctrine-symfony-live">What's new in Doctrine (symfony live)</h1>

<div style="width:425px;text-align:left" id="__ss_1576175">

What's new in Doctrine

<object style="margin:0px" width="425" height="355">

</object><div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;">

View more Microsoft Word documents from jwage.

</div></div>

<h1 id="what-is-doctrine%3F-nashville-lamp-group">What is Doctrine? (Nashville LAMP Group)</h1>

<div style="width:425px;text-align:left" id="__ss_1462019">

What Is Doctrine?

<object style="margin:0px" width="425" height="355">

</object><div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;">

View more Microsoft Word documents from jwage.

</div></div>

<h1 id="what%27s-new-in-doctrine-phpday-2009">What's new in Doctrine (phpDay 2009)</h1>

<div style="width:425px;text-align:left" id="__ss_1453079">

What's New In Doctrine

<object style="margin:0px" width="425" height="355">

</object><div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;">

View more Microsoft Word documents from jwage.

</div></div>

<p>In addition to the Doctrine talks I have been talking a lot recently
about a new CMS built on top of Symfony and Doctrine called Sympal.
Below you can view those presentations as well if interested.</p>

<h1 id="sympal---the-flexible-symfony-cms-symfony-live">Sympal - The flexible Symfony CMS (symfony live)</h1>

<div style="width:425px;text-align:left" id="__ss_1577300">

Sympal - The flexible Symfony CMS

<object style="margin:0px" width="425" height="355">

</object><div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;">

View more Microsoft Word documents from jwage.

</div></div>

<h1 id="sympal---the-flexible-symfony-cms-phpday-2009">Sympal - The flexible Symfony CMS (phpDay 2009)</h1>

<div style="width:425px;text-align:left" id="__ss_1453080">

Sympal - The Flexible Symfony Cms

<object style="margin:0px" width="425" height="355">

</object><div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;">

View more Microsoft Word documents from jwage.

</div></div>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2009/06/05/doctrine-statistics.html">Doctrine Statistics</a></h2>
        </header>

        <p class="lead">
            Posted on 2009-06-05
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <p>On October 18th of 2007 I implemented Google Analytics which allowed me
to track the statistics of the website. On that first day of statistics
gathered we had 93 visitors and yesterday we had a little over 1500!
Needless to say that is pretty exciting!</p>

<p>Here is a graph from google analytics that illustrates the growth.</p>

<p>Here are some more statistics gathered:</p>

<h1 id="google-analytics">Google Analytics</h1>

<p>| Statistics | | | ----- | ------ | | Visits | 607,035 | | Absolute
Unique Visitors | 232,366 | | Pageviews | 2,331,993 | | Average
Pageviews | 3.84 | | Time on Site | 00:05:02 | | Bounce Rate | 42.31% |
| New Visits | 38.19% |</p>

<h1 id="downloads">Downloads</h1>

<p>| Version | &#35; | | ---------- | ---| | 0.9 | 126 | | 0.10 | 7521 | |
0.11 | 6691 | | 1.0 | 20300 | | 1.1 | 9539 |</p>

<blockquote>
  <p><strong>NOTE</strong> <strong>These statistics don't count downloads through other
  sources such as symfony, Doctrine SVN, etc. They only track the
  downloads through the Doctrine website on the
  <a href="http://www.doctrine-project.org/download">Download</a> page.</strong></p>
</blockquote>

<p>Hopefully I can make this same post a year from now about the same thing
and Doctrine will have grown with many new versions.</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://staging.doctrine-project.org/2009/05/29/doctrine-lazy-loading.html">Doctrine Lazy Loading</a></h2>
        </header>

        <p class="lead">
            Posted on 2009-05-29
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <h1 id="did-you-know%3F">Did you know?</h1>

<p>Did you know that in Doctrine if you don't specifically select a
property or join a relationship in your DQL query, you can lazily load
that data? Here is a simple example to demonstrate.</p>

<pre><code class="sourceCode php">&lt;?php
$q = Doctrine::getTable('User')
  -&gt;createQuery('u')
  -&gt;select('u.id, u.username')
  -&gt;where('u.username = ?', 'jwage');

$user = $q-&gt;fetchOne();
</code></pre>

<p>Notice how I only selected the <code>id</code> and <code>username</code>, but we have an
additional column named <code>email_address</code>. If I were to access that
property it would lazily load the data.</p>

<pre><code class="sourceCode php">&lt;?php
echo $user['email_address']

**NOTE** The above code would result in an additional query to the
database that would lazy load all unloaded properties of an object
in proxy state. A record is in proxy state when it has one or more
properties that have not been loaded from the database.
</code></pre>

<h1 id="be-aware">Be aware</h1>

<p>This can be both a curse and a blessing because if you lazily load many
properties and relationships this means you will have a high query count
per page. In Doctrine 1.x lazy loading is on by default so it is often
overly used. The problem is people aren't even aware that it is
happening.</p>

<h1 id="more-examples">More Examples</h1>

<p>Imagine you had a <code>User</code> and <code>Profile</code> model where <code>User</code> has one
<code>Profile</code> and <code>Profile</code> has one <code>User</code>, a simple one-to-one
relationship. If I were to write a DQL query where I retrieve an
individual user record like the following.</p>

<pre><code class="sourceCode php">&lt;?php
$q = Doctrine::getTable('User')
  -&gt;createQuery('u')
  -&gt;where('u.username = ?', 'jwage');

$user = $q-&gt;fetchOne();
</code></pre>

<p>But then I wanted to retrieve the <code>Profile</code> for that <code>User</code> I could do
so by simply accessing the <code>Profile</code> property on <code>User</code>.</p>

<pre><code class="sourceCode php">&lt;?php
$profile = $user-&gt;Profile;
</code></pre>

<p>The above code would result in an additional query to the database that
loads the <code>Profile</code> record for the <code>User</code> in question. Now if I were to
be rendering a list of twenty <code>User</code> objects and I lazily load the
profile of each user that means I would have 21 queries total! That is
too many! In that case it would be smart to <code>leftJoin()</code> the <code>Profile</code>
object like the following.</p>

<pre><code class="sourceCode php">&lt;?php
$q = Doctrine::getTable('User')
  -&gt;createQuery('u')
  -&gt;leftJoin('u.Profile p');

$users = $q-&gt;execute();
</code></pre>

<p>Now when I access the <code>Profile</code> relationship of an individual object the
data would already be present and no lazy loading would be required.</p>

<h1 id="why%3F">Why?</h1>

<p>I made this blog post because I noticed this feature being abused and
overly used just because it makes things easier. The goal is to make you
aware of what is happening so that you can effectively use lazy loading
and not end up having applications with very high query counts per page.</p>

<p>I've seen this many times and the blame is often put on Doctrine but
really it is the tool not being used properly. So, be aware of when you
are lazy loading properties and the total number of queries you execute
per page. Make sure you always join required relationships and only
select the properties you need to access. It doesn't make sense to load
data if you're not going to be using it.</p>

<h1 id="how%3F">How?</h1>

<p>If you need help with keeping track of how many queries you have per
page, frameworks like
<a href="http://www.symfony-project.org/book/1_0/16-Application-Management-Tools#chapter_16_sub_web_debug_toolbar">Symfony</a>
and <a href="http://framework.zend.com">Zend Framework</a> give you debug tools to
show you how many queries you have per page. Or of course you can always
use the
<a href="http://www.doctrine-project.org/documentation/manual/1_1/en/component-overview:profiler">Profiling</a>
tool built in to Doctrine to log the queries in your application and
keep track of it that way.</p>

        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/66.html">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://staging.doctrine-project.org/blog/page/68.html">Older Posts</a></li>        </ul>
    </nav>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://staging.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?f32c09"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?36322d"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

        
        
        
            </body>
</html>
