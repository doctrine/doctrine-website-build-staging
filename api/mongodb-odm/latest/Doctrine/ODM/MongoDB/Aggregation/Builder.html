<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>Doctrine\ODM\MongoDB\Aggregation\Builder | API</title>

            <link rel="stylesheet" type="text/css" href="../../../../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../../../../css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="../../../../css/sami.css">
        <script src="../../../../js/jquery-1.11.1.min.js"></script>
        <script src="../../../../js/bootstrap.min.js"></script>
        <script src="../../../../js/typeahead.min.js"></script>
        <script src="../../../../sami.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    
    
    </head>

    <body id="class" data-name="class:Doctrine_ODM_MongoDB_Aggregation_Builder" data-root-path="../../../../">
            <div id="content">
        <div id="left-column">
                <div id="control-panel">
                <script>
            $('option[data-version="'+window.projectVersion+'"]').prop('selected', true);
        </script>
        <form id="search-form" action="../../../../search.html" method="GET">
            <span class="glyphicon glyphicon-search"></span>
            <input name="search"
                   class="typeahead form-control"
                   type="search"
                   placeholder="Search">
        </form>
    </div>

                <div id="api-tree"></div>

        </div>
        <div id="right-column">
                <nav id="site-nav" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-elements">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../../../index.html">API</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-elements">
                <ul class="nav navbar-nav">
                    <li><a href="../../../../classes.html">Classes</a></li>
                                            <li><a href="../../../../namespaces.html">Namespaces</a></li>
                                        <li><a href="../../../../interfaces.html">Interfaces</a></li>
                    <li><a href="../../../../traits.html">Traits</a></li>
                    <li><a href="../../../../doc-index.html">Index</a></li>
                    <li><a href="../../../../search.html">Search</a></li>
                </ul>
            </div>
        </div>
    </nav>

                        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                        <li><a href="../../../../Doctrine.html">Doctrine</a></li><li class="backslash">\</li><li><a href="../../../../Doctrine/ODM.html">ODM</a></li><li class="backslash">\</li><li><a href="../../../../Doctrine/ODM/MongoDB.html">MongoDB</a></li><li class="backslash">\</li><li><a href="../../../../Doctrine/ODM/MongoDB/Aggregation.html">Aggregation</a></li><li class="backslash">\</li><li>Builder</li>
            </ol>
        </div>
                <div id="page-content">
                
    <div class="page-header">
        <h1>
            Builder
                
        </h1>
    </div>

    <p>    class
    <strong>Builder</strong>        (<a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php">View source</a>)
</p>

        
    

            <div class="description">
            <p>Fluent interface for building aggregation pipelines.</p>                                </div>
    
    
    
    
            <h2>Methods</h2>

            <div class="container-fluid underlined">
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method___construct">__construct</a>(<a href="../../../../Doctrine/ODM/MongoDB/DocumentManager.html"><abbr title="Doctrine\ODM\MongoDB\DocumentManager">DocumentManager</abbr></a> $dm, string $documentName)
        
                                            <p>Create a new aggregation builder.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addFields">addFields</a>()
        
                                            <p>Adds new fields to documents. $addFields outputs documents that contain all
existing fields from the input documents and newly added fields.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_bucket">bucket</a>()
        
                                            <p>Categorizes incoming documents into groups, called buckets, based on a
specified expression and bucket boundaries.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_bucketAuto">bucketAuto</a>()
        
                                            <p>Categorizes incoming documents into a specific number of groups, called
buckets, based on a specified expression.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_collStats">collStats</a>()
        
                                            <p>Returns statistics regarding a collection or view.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_count">count</a>(string $fieldName)
        
                                            <p>Returns a document that contains a count of the number of documents input
to the stage.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_execute">execute</a>(array $options = [])
        
                                            <p>Executes the aggregation pipeline</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_expr">expr</a>()
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_facet">facet</a>()
        
                                            <p>Processes multiple aggregation pipelines within a single stage on the
same set of input documents.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_geoNear">geoNear</a>(float|array|<abbr title="GeoJson\Geometry\Point">Point</abbr> $x, float $y = null)
        
                                            <p>Outputs documents in order of nearest to farthest from a specified point.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_getPipeline">getPipeline</a>()
        
                                            <p>Returns the assembled aggregation pipeline</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_getStage">getStage</a>(int $index)
        
                                            <p>Returns a certain stage from the pipeline</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_graphLookup">graphLookup</a>(string $from)
        
                                            <p>Performs a recursive search on a collection, with options for restricting
the search by recursion depth and query filter.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_group">group</a>()
        
                                            <p>Groups documents by some specified expression and outputs to the next
stage a document for each distinct grouping.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_hydrate">hydrate</a>(string $className)
        
                                            <p>Set which class to use when hydrating results as document class instances.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_indexStats">indexStats</a>()
        
                                            <p>Returns statistics regarding the use of each index for the collection.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_limit">limit</a>(int $limit)
        
                                            <p>Limits the number of documents passed to the next stage in the pipeline.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_lookup">lookup</a>(string $from)
        
                                            <p>Performs a left outer join to an unsharded collection in the same
database to filter in documents from the “joined” collection for
processing.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_match">match</a>()
        
                                            <p>Filters the documents to pass only the documents that match the specified
condition(s) to the next pipeline stage.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_matchExpr">matchExpr</a>()
        
                                            <p>Returns a query expression to be used in match stages</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_out">out</a>(string $from)
        
                                            <p>Takes the documents returned by the aggregation pipeline and writes them
to a specified collection. This must be the last stage in the pipeline.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_project">project</a>()
        
                                            <p>Passes along the documents with only the specified fields to the next
stage in the pipeline. The specified fields can be existing fields from
the input documents or newly computed fields.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_redact">redact</a>()
        
                                            <p>Restricts the contents of the documents based on information stored in
the documents themselves.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_replaceRoot">replaceRoot</a>(string|array|null $expression = null)
        
                                            <p>Promotes a specified document to the top level and replaces all other
fields.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_sample">sample</a>(int $size)
        
                                            <p>Randomly selects the specified number of documents from its input.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_skip">skip</a>(int $skip)
        
                                            <p>Skips over the specified number of documents that pass into the stage and
passes the remaining documents to the next stage in the pipeline.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_sort">sort</a>(array|string $fieldName, int|string $order = null)
        
                                            <p>Sorts all input documents and returns them to the pipeline in sorted
order.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_sortByCount">sortByCount</a>(string $expression)
        
                                            <p>Groups incoming documents based on the value of a specified expression,
then computes the count of documents in each distinct group.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_unwind">unwind</a>(string $fieldName)
        
                                            <p>Deconstructs an array field from the input documents to output a document
for each element. Each output document is the input document with the
value of the array field replaced by the element.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
                </div>
                <div class="col-md-8 type">
                    <a href="#method_addStage">addStage</a>(<a href="../../../../Doctrine/ODM/MongoDB/Aggregation/Stage.html"><abbr title="Doctrine\ODM\MongoDB\Aggregation\Stage">Stage</abbr></a> $stage)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
            </div>


        <h2>Details</h2>

            <div id="method-details">
                    <div class="method-item">
                    <h3 id="method___construct">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L58">line 58</a></div>
        <code>                    
    <strong>__construct</strong>(<a href="../../../../Doctrine/ODM/MongoDB/DocumentManager.html"><abbr title="Doctrine\ODM\MongoDB\DocumentManager">DocumentManager</abbr></a> $dm, string $documentName)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Create a new aggregation builder.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../../../Doctrine/ODM/MongoDB/DocumentManager.html"><abbr title="Doctrine\ODM\MongoDB\DocumentManager">DocumentManager</abbr></a></td>
                <td>$dm</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$documentName</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addFields">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L78">line 78</a></div>
        <code>                    
    <strong>addFields</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Adds new fields to documents. $addFields outputs documents that contain all
existing fields from the input documents and newly added fields.</p>                    <p>The $addFields stage is equivalent to a $project stage that explicitly specifies
all existing fields in the input documents and adds the new fields.</p>

<p>If the name of the new field is the same as an existing field name (including _id),
$addFields overwrites the existing value of that field with the value of the
specified expression.</p>                            </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.com/manual/reference/operator/aggregation/addFields/">http://docs.mongodb.com/manual/reference/operator/aggregation/addFields/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_bucket">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L95">line 95</a></div>
        <code>                    
    <strong>bucket</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Categorizes incoming documents into groups, called buckets, based on a
specified expression and bucket boundaries.</p>                    <p>Each bucket is represented as a document in the output. The document for
each bucket contains an _id field, whose value specifies the inclusive
lower bound of the bucket and a count field that contains the number of
documents in the bucket. The count field is included by default when the
output is not specified.</p>                            </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/bucket/">https://docs.mongodb.com/manual/reference/operator/aggregation/bucket/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_bucketAuto">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L114">line 114</a></div>
        <code>                    
    <strong>bucketAuto</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Categorizes incoming documents into a specific number of groups, called
buckets, based on a specified expression.</p>                    <p>Bucket boundaries are automatically determined in an attempt to evenly
distribute the documents into the specified number of buckets. Each
bucket is represented as a document in the output. The document for each
bucket contains an _id field, whose value specifies the inclusive lower
bound and the exclusive upper bound for the bucket, and a count field
that contains the number of documents in the bucket. The count field is
included by default when the output is not specified.</p>                            </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/bucketAuto/">https://docs.mongodb.com/manual/reference/operator/aggregation/bucketAuto/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_collStats">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L127">line 127</a></div>
        <code>                    
    <strong>collStats</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Returns statistics regarding a collection or view.</p>                    <p>$collStats must be the first stage in an aggregation pipeline, or else
the pipeline returns an error.</p>                            </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/collStats/">http://docs.mongodb.org/manual/reference/operator/aggregation/collStats/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_count">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L138">line 138</a></div>
        <code>                    
    <strong>count</strong>(string $fieldName)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Returns a document that contains a count of the number of documents input
to the stage.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$fieldName</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/count/">https://docs.mongodb.com/manual/reference/operator/aggregation/count/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_execute">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L146">line 146</a></div>
        <code>                    
    <strong>execute</strong>(array $options = [])
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Executes the aggregation pipeline</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array</td>
                <td>$options</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_expr">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L156">line 156</a></div>
        <code>                    
    <strong>expr</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_facet">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L168">line 168</a></div>
        <code>                    
    <strong>facet</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Processes multiple aggregation pipelines within a single stage on the
same set of input documents.</p>                    <p>Each sub-pipeline has its own field in the output document where its
results are stored as an array of documents.</p>                            </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_geoNear">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L188">line 188</a></div>
        <code>                    
    <strong>geoNear</strong>(float|array|<abbr title="GeoJson\Geometry\Point">Point</abbr> $x, float $y = null)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Outputs documents in order of nearest to farthest from a specified point.</p>                    <p>A GeoJSON point may be provided as the first and only argument for
2dsphere queries. This single parameter may be a GeoJSON point object or
an array corresponding to the point's JSON representation. If GeoJSON is
used, the "spherical" option will default to true.</p>

<p>You can only use this as the first stage of a pipeline.</p>                            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>float|array|<abbr title="GeoJson\Geometry\Point">Point</abbr></td>
                <td>$x</td>
                <td></td>
            </tr>
                    <tr>
                <td>float</td>
                <td>$y</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/geoNear/">http://docs.mongodb.org/manual/reference/operator/aggregation/geoNear/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getPipeline">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L201">line 201</a></div>
        <code>                    
    <strong>getPipeline</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Returns the assembled aggregation pipeline</p>                    <p>For pipelines where the first stage is a $geoNear stage, it will apply
the document filters and discriminator queries to the query portion of
the geoNear operation. For all other pipelines, it prepends a $match stage
containing the required query.</p>                            </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getStage">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L225">line 225</a></div>
        <code>                    
    <strong>getStage</strong>(int $index)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Returns a certain stage from the pipeline</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>int</td>
                <td>$index</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_graphLookup">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L243">line 243</a></div>
        <code>                    
    <strong>graphLookup</strong>(string $from)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Performs a recursive search on a collection, with options for restricting
the search by recursion depth and query filter.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$from</td>
                <td>Target collection for the $graphLookup operation to
search, recursively matching the connectFromField to the connectToField.</td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.org/manual/reference/operator/aggregation/graphLookup/">https://docs.mongodb.org/manual/reference/operator/aggregation/graphLookup/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_group">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L254">line 254</a></div>
        <code>                    
    <strong>group</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Groups documents by some specified expression and outputs to the next
stage a document for each distinct grouping.</p>                                                </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/group/">http://docs.mongodb.org/manual/reference/operator/aggregation/group/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_hydrate">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L262">line 262</a></div>
        <code>                    
    <strong>hydrate</strong>(string $className)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Set which class to use when hydrating results as document class instances.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$className</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_indexStats">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L274">line 274</a></div>
        <code>                    
    <strong>indexStats</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Returns statistics regarding the use of each index for the collection.</p>                                                </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.org/manual/reference/operator/aggregation/indexStats/">https://docs.mongodb.org/manual/reference/operator/aggregation/indexStats/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_limit">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L284">line 284</a></div>
        <code>                    
    <strong>limit</strong>(int $limit)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Limits the number of documents passed to the next stage in the pipeline.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>int</td>
                <td>$limit</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/limit/">http://docs.mongodb.org/manual/reference/operator/aggregation/limit/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_lookup">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L296">line 296</a></div>
        <code>                    
    <strong>lookup</strong>(string $from)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Performs a left outer join to an unsharded collection in the same
database to filter in documents from the “joined” collection for
processing.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$from</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.org/manual/reference/operator/aggregation/lookup/">https://docs.mongodb.org/manual/reference/operator/aggregation/lookup/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_match">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L307">line 307</a></div>
        <code>                    
    <strong>match</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Filters the documents to pass only the documents that match the specified
condition(s) to the next pipeline stage.</p>                                                </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/match/">http://docs.mongodb.org/manual/reference/operator/aggregation/match/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_matchExpr">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L315">line 315</a></div>
        <code>                    
    <strong>matchExpr</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Returns a query expression to be used in match stages</p>                                                </div>
                <div class="tags">
            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_out">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L329">line 329</a></div>
        <code>                    
    <strong>out</strong>(string $from)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Takes the documents returned by the aggregation pipeline and writes them
to a specified collection. This must be the last stage in the pipeline.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$from</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/out/">http://docs.mongodb.org/manual/reference/operator/aggregation/out/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_project">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L341">line 341</a></div>
        <code>                    
    <strong>project</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Passes along the documents with only the specified fields to the next
stage in the pipeline. The specified fields can be existing fields from
the input documents or newly computed fields.</p>                                                </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/project/">http://docs.mongodb.org/manual/reference/operator/aggregation/project/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_redact">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L352">line 352</a></div>
        <code>                    
    <strong>redact</strong>()
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Restricts the contents of the documents based on information stored in
the documents themselves.</p>                                                </div>
                <div class="tags">
            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/redact/">http://docs.mongodb.org/manual/reference/operator/aggregation/redact/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_replaceRoot">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L368">line 368</a></div>
        <code>                    
    <strong>replaceRoot</strong>(string|array|null $expression = null)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Promotes a specified document to the top level and replaces all other
fields.</p>                    <p>The operation replaces all existing fields in the input document,
including the _id field. You can promote an existing embedded document to
the top level, or create a new document for promotion.</p>                            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string|array|null</td>
                <td>$expression</td>
                <td>Optional. A replacement expression that
resolves to a document.</td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_sample">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L378">line 378</a></div>
        <code>                    
    <strong>sample</strong>(int $size)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Randomly selects the specified number of documents from its input.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>int</td>
                <td>$size</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="https://docs.mongodb.org/manual/reference/operator/aggregation/sample/">https://docs.mongodb.org/manual/reference/operator/aggregation/sample/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_skip">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L389">line 389</a></div>
        <code>                    
    <strong>skip</strong>(int $skip)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Skips over the specified number of documents that pass into the stage and
passes the remaining documents to the next stage in the pipeline.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>int</td>
                <td>$skip</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/skip/">http://docs.mongodb.org/manual/reference/operator/aggregation/skip/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_sort">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L406">line 406</a></div>
        <code>                    
    <strong>sort</strong>(array|string $fieldName, int|string $order = null)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Sorts all input documents and returns them to the pipeline in sorted
order.</p>                    <p>If sorting by multiple fields, the first argument should be an array of
field name (key) and order (value) pairs.</p>                            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>array|string</td>
                <td>$fieldName</td>
                <td>Field name or array of field/order pairs</td>
            </tr>
                    <tr>
                <td>int|string</td>
                <td>$order</td>
                <td>Field order (if one field is specified)</td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/sort/">http://docs.mongodb.org/manual/reference/operator/aggregation/sort/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_sortByCount">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L419">line 419</a></div>
        <code>                    
    <strong>sortByCount</strong>(string $expression)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Groups incoming documents based on the value of a specified expression,
then computes the count of documents in each distinct group.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$expression</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/sortByCount/">http://docs.mongodb.org/manual/reference/operator/aggregation/sortByCount/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_unwind">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L431">line 431</a></div>
        <code>                    
    <strong>unwind</strong>(string $fieldName)
        </code>
    </h3>
    <div class="details">
            
    

                    <div class="method-description">
                                    <p>Deconstructs an array field from the input documents to output a document
for each element. Each output document is the input document with the
value of the array field replaced by the element.</p>                                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$fieldName</td>
                <td></td>
            </tr>
            </table>

            
            
            
                            <h4>See also</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
                                            <a href="http://docs.mongodb.org/manual/reference/operator/aggregation/unwind/">http://docs.mongodb.org/manual/reference/operator/aggregation/unwind/</a>
                                    </td>
                <td></td>
            </tr>
            </table>

                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_addStage">
        <div class="location">at         <a href="https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Aggregation/Builder.php#L437">line 437</a></div>
        <code>            protected        
    <strong>addStage</strong>(<a href="../../../../Doctrine/ODM/MongoDB/Aggregation/Stage.html"><abbr title="Doctrine\ODM\MongoDB\Aggregation\Stage">Stage</abbr></a> $stage)
        </code>
    </h3>
    <div class="details">
            
    

                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../../../Doctrine/ODM/MongoDB/Aggregation/Stage.html"><abbr title="Doctrine\ODM\MongoDB\Aggregation\Stage">Stage</abbr></a></td>
                <td>$stage</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

            </div>
            </div>

    
            </div>
                <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a>.
    </div>

        </div>
    </div>
    </body>

</html>
