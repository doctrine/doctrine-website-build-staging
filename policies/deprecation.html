<!DOCTYPE html>
<html>
    <head>
        <title>Deprecation Policy - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="noindex">
        
        
        <link
            rel="stylesheet"
            type="text/css"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://use.fontawesome.com/releases/v5.0.8/css/all.css"
            integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/css/style.css?822c47"
            integrity="sha384-XyM6vFnQKXdOL6LF3O6GWlS90zYVHQGnsbJTtdzyEN1deysV3eK6YrAF6AHemiSi"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css"
            integrity="sha384-3pqpjew6zqJsw9mdIpd6FVJvuFuacqOpSXwAifQ9iHE4keUyghetuuJDGFoTNhfn"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css"
            integrity="sha384-VzUGdSDk+HLoSg+ptudZxGZyaFVN7q7Eqh7QaUU19cWL2fK0kyz1belH38z7MbcZ"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/css/railscasts.css?62eb49"
            integrity="sha384-K7nnw0wrUNTkBLTS8aN3AOx/e095lEJ1g60EJX7ash3cfsHTpQV6kWKoCPxPc9AJ"
            crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/policies/deprecation.html" />
        <meta property="og:title" content="Deprecation Policy - Doctrine - PHP Database Tools" />
        <meta property="og:description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    
            <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?6c0dab" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/reflection.html">Reflection</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://staging.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/contribute/" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/website/">Contribute to Website</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank">GitHub</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine-website/edit/master/source/policies/deprecation.rst" class="btn btn-light" target="_blank">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <main role="main" class="container-wrapper container">
                    <a id="deprecation-policy"></a><h1>Deprecation Policy</h1>
<p>The Doctrine team will adhere to this deprecation policy whenever it is reasonably possible.</p>
<a id="using-code-deprecated-code-and-code-phpstan-deprecation-rules-code"></a><h2>Using <code>@deprecated</code> and <code>PHPStan Deprecation Rules</code></h2>
<p>The primary and preferred method for deprecating functionality within Doctrine is by using
the <code>@deprecated</code> annotation. To have usages of functionality in your dependencies analyzed
and reported, you must use a tool like <a href="#phpstan-deprecation-rules">PHPStan Deprecation Rules</a> or <a href="#pslam-static-analysis">Pslam Static Analysis</a>.</p>
<p>Here is an example of how this would be used in Doctrine:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e317164bea1243d16fce1a4873a3ed683afc20b5"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e317164bea1243d16fce1a4873a3ed683afc20b5"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-1" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntityManager</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@deprecated</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSomething</span><span class="hljs-params">()</span> : <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-2" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-3" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-4" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-5" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-6" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-7" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-8" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-9" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-10" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-11" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-12" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-13" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-14" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-14">14</a></td></tr></table></div></code></pre>
<p>Then, if your code directly depends on <code>doctrine/orm</code> which provides the
<code>Doctrine\ORM\EntityManager</code> class, you will get a warning about it when you run
<a href="#phpstan-deprecation-rules">PHPStan Deprecation Rules</a> or <a href="#pslam-static-analysis">Pslam Static Analysis</a>. Here is an example:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ec8500ca546f0e8f81828399b4cfa1a3c900d6e2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ec8500ca546f0e8f81828399b4cfa1a3c900d6e2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-1" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entities</span>\<span class="hljs-title">User</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">EntityManager</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRegistration</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> EntityManager */</span>
    <span class="hljs-keyword">private</span> $entityManager;

    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">(array $userData)</span> : <span class="hljs-title">User</span>
    </span>{
        $something = <span class="hljs-keyword">$this</span>-&gt;entityManager-&gt;getSomething();

        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-2" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-3" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-4" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-5" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-6" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-7" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-8" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-9" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-10" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-11" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-12" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-13" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-14" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-15" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-16" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-17" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-18" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-19" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-19">19</a></td></tr></table></div></code></pre>
<a id="using-code-trigger-error-code-and-code-phpunit-bridge-code"></a><h2>Using <code>trigger_error()</code> and <code>phpunit-bridge</code></h2>
<p>In some cases, you may need to conditionally deprecate functionality. In these cases, it is required
to use the <code>trigger_error()</code> function and a tool like <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a> which implements a custom
error handler for you to use to collect and report these warnings. <strong>This method is not recommended
and Doctrine will try to avoid using it if possible.</strong></p>
<p>If you do not wish to use <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a> you can implement your own custom error handler using
the <a href="http://php.net/manual/en/function.set-error-handler.php">set_error_handler</a> function.</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>In order for this strategy to work, you have to configure your <a href="http://php.net/manual/en/function.error-reporting.php">error_reporting</a> properly
in both your development and production environments. You don't want errors of type <code>E_USER_DEPRECATED</code>
being reported from PHP.</p>
</td></tr></table></div>
<p>Here is an example of how this would be used in Doctrine:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-1" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntityManager</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAnotherThing</span><span class="hljs-params">()</span> : <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;featureFlag) {
            trigger_error(<span class="hljs-string">'This feature has been disabled.'</span>, E_USER_DEPRECATED);
        }

        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-2" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-3" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-4" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-5" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-6" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-7" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-8" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-9" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-10" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-11" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-12" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-13" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-14" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-15" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-15">15</a></td></tr></table></div></code></pre>
<p>Now in order to get those warnings reported to you in your automation, you need to use a tool like <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a>.</p>
<a id="tools"></a><h2>Tools</h2>
<p>There are a few tools out there that you can use to integrate deprecation warnings into your
automation.</p>
<a id="phpstan-deprecation-rules"></a><h3>PHPStan Deprecation Rules</h3>
<p>Doctrine uses and recommends <a href="https://github.com/phpstan/phpstan">PHPStan</a> for reporting usages of deprecated functionality in your code.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require --dev phpstan/phpstan
<span class="noselect">$ </span>composer require --dev phpstan/phpstan-deprecation-rules</code></pre></div>
<p>You will need to setup a configuration file in the root of project named <code>phpstan.neon.dist</code></p>
<div class="console"><pre><code class="console">includes:
    - vendor/phpstan/phpstan-phpunit/extension.neon
    - vendor/phpstan/phpstan-strict-rules/rules.neon

parameters:
    level: 0
    paths:
      - lib
      - tests</code></pre></div>
<p>Now you can run the <code>vendor/bin/phpstan</code> command:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpstan analyze</code></pre></div>
<a id="pslam-static-analysis"></a><h3>Pslam Static Analysis</h3>
<p><a href="#psalm">Psalm</a> is a static analysis tool for finding errors in PHP applications, built on top of <a href="https://github.com/nikic/php-parser">PHP Parser</a>.</p>
<p>It's able to find a large number of issues, but it can also be configured to only care about a small subset of those.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require vimeo/psalm</code></pre></div>
<a id="phpunit-bridge"></a><h3>PHPUnit Bridge</h3>
<p>The <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a> provides utilities to report legacy tests and usage of deprecated code.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require --dev "symfony/phpunit-bridge:*"</code></pre></div>
            </main>

        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT"
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous">
        </script>

        <script
            src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"
            integrity="sha384-EtEQyqoKtrBSat8+V0eTyycfmdkEHHzKesnWrc2VPnKAcD8PJw8HKAWKsK/QnGT+"
            crossorigin="anonymous">
        </script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://cdn.ravenjs.com/3.24.2/raven.min.js"
            integrity="sha384-HwE7dFvrH8iD9R5VYUqNwjIhxDycip+e4DjP5nEhXrJtACG8AdNXjvP+AfJWxhJh"
            crossorigin="anonymous">
        </script>

        <script type="text/javascript">
            Raven.config('https://09ce137590054cfd8f0b7e9324d6ec14@sentry.io/1197701').install()
        </script>

        <script
            src="https://staging.doctrine-project.org/js/main.js?4138a7"
            integrity="sha384-4PtbMmuLWIQQORdH5aYanVqX4PRToNwwYq7k6PdX/mrXBJ/PFQOkEcgxBw6MW1Gw"
            crossorigin="anonymous">
        </script>

        <script
            src="https://staging.doctrine-project.org/js/search.js?493399"
            integrity="sha384-vH1McEYqOv8hsr8UjcB2ZrQs9UHtvoyJcCGg/a6+3I7aiwLSXSz/swbGBPXIZMFL"
            crossorigin="anonymous">
        </script>

        
        
        
        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search'
            };

            new Main();

            new Search(projectSlug, versionSlug, searchBoxSettings);

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }

            function googleTranslateElementInit() {
                $('#google_translate_element').html('');

                new google.translate.TranslateElement(
                    {pageLanguage: 'en'}, 'google_translate_element'
                );

                $('#google_translate_element select').on('change', function() {
                    var language = $('#google_translate_element select option:selected').text();

                    googleAnalyticsEvent('Translate', 'click', language);
                });
            }
        </script>

        <script
            type="text/javascript"
            src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
            async>
        </script>

        
        
            </body>
</html>
