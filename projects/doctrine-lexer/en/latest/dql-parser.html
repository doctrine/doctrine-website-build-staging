<!DOCTYPE html>
<html>
    <head>
        <title>DQL Lexer - Lexer - Doctrine</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Lexer Documentation: DQL Lexer ">

        <meta name="keywords" content="php,parser,lexer,annotations,docblock,documentation,dql,lexer">

                    <meta name="robots" content="noindex">
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine-lexer/en/latest/dql-parser.html" />
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?87bf05" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine-lexer/en/latest/dql-parser.html" />
        <meta property="og:title" content="DQL Lexer - Lexer - Doctrine" />
        <meta property="og:description" content="Doctrine Lexer Documentation: DQL Lexer " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Lexer",
            "description": "DQL Lexer",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/reflection.html">Reflection</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://staging.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/contribute/" id="navbarContributeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contribute</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/website/">Contribute to Website</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <div class="container-wrapper container-fluid">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="index-html-introduction" class="toc-item"><a href="index.html#introduction">Introduction</a></li><li id="simple-parser-example-html-simple-parser-example" class="toc-item"><a href="simple-parser-example.html#simple-parser-example">Simple Parser Example</a></li><li id="dql-parser-html-dql-lexer" class="toc-item"><a href="dql-parser.html#dql-lexer">DQL Lexer</a></li><li id="dql-parser-html-what-is-an-ast" class="toc-item"><a href="dql-parser.html#what-is-an-ast">What is an AST?</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine-lexer/en/latest/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">DQL Lexer</li>
                            </ol>
                        </nav>
                                    </div>

                
                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-lexer/en/latest/dql-parser.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-lexer/en/latest/dql-parser.html">
                                                    master

                                                    
                                                                                                    </a>
                                                                                    
                                                                            </div>
                                </div>

                                <a href="https://github.com/doctrine/lexer/edit/master/docs/en/dql-parser.rst" class="btn btn-primary btn-sm">Edit</a>
                            
                            
<p></p>
<a class="section-anchor" id="dql-lexer" name="dql-lexer"></a><h1 class="section-header"><a href="#dql-lexer">DQL Lexer<i class="fas fa-link"></i></a></h1>
<p>Here is a more complicated example from the Doctrine ORM project.
The <code>Doctrine\ORM\Query\Lexer</code> implementation for DQL looks something
like the following:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="be72b63752f1d70d97151c72f6bb065339d315c5"
            data-toggle="tooltip"
            data-placement="bottom"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="be72b63752f1d70d97151c72f6bb065339d315c5"><table class="code-block-table"><tr><td class="line-number noselect">1</td><td class="code-line"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Lexer</span>\<span class="hljs-title">AbstractLexer</span>;
</td></tr><tr><td class="line-number noselect">2</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">3</td><td class="code-line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Lexer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractLexer</span></span>
</td></tr><tr><td class="line-number noselect">4</td><td class="code-line">{
</td></tr><tr><td class="line-number noselect">5</td><td class="code-line">    <span class="hljs-comment">// All tokens that are not valid identifiers must be &lt; 100</span>
</td></tr><tr><td class="line-number noselect">6</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_NONE              = <span class="hljs-number">1</span>;
</td></tr><tr><td class="line-number noselect">7</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_INTEGER           = <span class="hljs-number">2</span>;
</td></tr><tr><td class="line-number noselect">8</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_STRING            = <span class="hljs-number">3</span>;
</td></tr><tr><td class="line-number noselect">9</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_INPUT_PARAMETER   = <span class="hljs-number">4</span>;
</td></tr><tr><td class="line-number noselect">10</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_FLOAT             = <span class="hljs-number">5</span>;
</td></tr><tr><td class="line-number noselect">11</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_CLOSE_PARENTHESIS = <span class="hljs-number">6</span>;
</td></tr><tr><td class="line-number noselect">12</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_OPEN_PARENTHESIS  = <span class="hljs-number">7</span>;
</td></tr><tr><td class="line-number noselect">13</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_COMMA             = <span class="hljs-number">8</span>;
</td></tr><tr><td class="line-number noselect">14</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_DIVIDE            = <span class="hljs-number">9</span>;
</td></tr><tr><td class="line-number noselect">15</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_DOT               = <span class="hljs-number">10</span>;
</td></tr><tr><td class="line-number noselect">16</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_EQUALS            = <span class="hljs-number">11</span>;
</td></tr><tr><td class="line-number noselect">17</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_GREATER_THAN      = <span class="hljs-number">12</span>;
</td></tr><tr><td class="line-number noselect">18</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_LOWER_THAN        = <span class="hljs-number">13</span>;
</td></tr><tr><td class="line-number noselect">19</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_MINUS             = <span class="hljs-number">14</span>;
</td></tr><tr><td class="line-number noselect">20</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_MULTIPLY          = <span class="hljs-number">15</span>;
</td></tr><tr><td class="line-number noselect">21</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_NEGATE            = <span class="hljs-number">16</span>;
</td></tr><tr><td class="line-number noselect">22</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_PLUS              = <span class="hljs-number">17</span>;
</td></tr><tr><td class="line-number noselect">23</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_OPEN_CURLY_BRACE  = <span class="hljs-number">18</span>;
</td></tr><tr><td class="line-number noselect">24</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_CLOSE_CURLY_BRACE = <span class="hljs-number">19</span>;
</td></tr><tr><td class="line-number noselect">25</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">26</td><td class="code-line">    <span class="hljs-comment">// All tokens that are identifiers or keywords that could be considered as identifiers should be &gt;= 100</span>
</td></tr><tr><td class="line-number noselect">27</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ALIASED_NAME         = <span class="hljs-number">100</span>;
</td></tr><tr><td class="line-number noselect">28</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_FULLY_QUALIFIED_NAME = <span class="hljs-number">101</span>;
</td></tr><tr><td class="line-number noselect">29</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_IDENTIFIER           = <span class="hljs-number">102</span>;
</td></tr><tr><td class="line-number noselect">30</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">31</td><td class="code-line">    <span class="hljs-comment">// All keyword tokens should be &gt;= 200</span>
</td></tr><tr><td class="line-number noselect">32</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ALL      = <span class="hljs-number">200</span>;
</td></tr><tr><td class="line-number noselect">33</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_AND      = <span class="hljs-number">201</span>;
</td></tr><tr><td class="line-number noselect">34</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ANY      = <span class="hljs-number">202</span>;
</td></tr><tr><td class="line-number noselect">35</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_AS       = <span class="hljs-number">203</span>;
</td></tr><tr><td class="line-number noselect">36</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ASC      = <span class="hljs-number">204</span>;
</td></tr><tr><td class="line-number noselect">37</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_AVG      = <span class="hljs-number">205</span>;
</td></tr><tr><td class="line-number noselect">38</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_BETWEEN  = <span class="hljs-number">206</span>;
</td></tr><tr><td class="line-number noselect">39</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_BOTH     = <span class="hljs-number">207</span>;
</td></tr><tr><td class="line-number noselect">40</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_BY       = <span class="hljs-number">208</span>;
</td></tr><tr><td class="line-number noselect">41</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_CASE     = <span class="hljs-number">209</span>;
</td></tr><tr><td class="line-number noselect">42</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_COALESCE = <span class="hljs-number">210</span>;
</td></tr><tr><td class="line-number noselect">43</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_COUNT    = <span class="hljs-number">211</span>;
</td></tr><tr><td class="line-number noselect">44</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_DELETE   = <span class="hljs-number">212</span>;
</td></tr><tr><td class="line-number noselect">45</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_DESC     = <span class="hljs-number">213</span>;
</td></tr><tr><td class="line-number noselect">46</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_DISTINCT = <span class="hljs-number">214</span>;
</td></tr><tr><td class="line-number noselect">47</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ELSE     = <span class="hljs-number">215</span>;
</td></tr><tr><td class="line-number noselect">48</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_EMPTY    = <span class="hljs-number">216</span>;
</td></tr><tr><td class="line-number noselect">49</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_END      = <span class="hljs-number">217</span>;
</td></tr><tr><td class="line-number noselect">50</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ESCAPE   = <span class="hljs-number">218</span>;
</td></tr><tr><td class="line-number noselect">51</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_EXISTS   = <span class="hljs-number">219</span>;
</td></tr><tr><td class="line-number noselect">52</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_FALSE    = <span class="hljs-number">220</span>;
</td></tr><tr><td class="line-number noselect">53</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_FROM     = <span class="hljs-number">221</span>;
</td></tr><tr><td class="line-number noselect">54</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_GROUP    = <span class="hljs-number">222</span>;
</td></tr><tr><td class="line-number noselect">55</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_HAVING   = <span class="hljs-number">223</span>;
</td></tr><tr><td class="line-number noselect">56</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_HIDDEN   = <span class="hljs-number">224</span>;
</td></tr><tr><td class="line-number noselect">57</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_IN       = <span class="hljs-number">225</span>;
</td></tr><tr><td class="line-number noselect">58</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_INDEX    = <span class="hljs-number">226</span>;
</td></tr><tr><td class="line-number noselect">59</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_INNER    = <span class="hljs-number">227</span>;
</td></tr><tr><td class="line-number noselect">60</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_INSTANCE = <span class="hljs-number">228</span>;
</td></tr><tr><td class="line-number noselect">61</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_IS       = <span class="hljs-number">229</span>;
</td></tr><tr><td class="line-number noselect">62</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_JOIN     = <span class="hljs-number">230</span>;
</td></tr><tr><td class="line-number noselect">63</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_LEADING  = <span class="hljs-number">231</span>;
</td></tr><tr><td class="line-number noselect">64</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_LEFT     = <span class="hljs-number">232</span>;
</td></tr><tr><td class="line-number noselect">65</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_LIKE     = <span class="hljs-number">233</span>;
</td></tr><tr><td class="line-number noselect">66</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_MAX      = <span class="hljs-number">234</span>;
</td></tr><tr><td class="line-number noselect">67</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_MEMBER   = <span class="hljs-number">235</span>;
</td></tr><tr><td class="line-number noselect">68</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_MIN      = <span class="hljs-number">236</span>;
</td></tr><tr><td class="line-number noselect">69</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_NEW      = <span class="hljs-number">237</span>;
</td></tr><tr><td class="line-number noselect">70</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_NOT      = <span class="hljs-number">238</span>;
</td></tr><tr><td class="line-number noselect">71</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_NULL     = <span class="hljs-number">239</span>;
</td></tr><tr><td class="line-number noselect">72</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_NULLIF   = <span class="hljs-number">240</span>;
</td></tr><tr><td class="line-number noselect">73</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_OF       = <span class="hljs-number">241</span>;
</td></tr><tr><td class="line-number noselect">74</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_OR       = <span class="hljs-number">242</span>;
</td></tr><tr><td class="line-number noselect">75</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_ORDER    = <span class="hljs-number">243</span>;
</td></tr><tr><td class="line-number noselect">76</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_OUTER    = <span class="hljs-number">244</span>;
</td></tr><tr><td class="line-number noselect">77</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_PARTIAL  = <span class="hljs-number">245</span>;
</td></tr><tr><td class="line-number noselect">78</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_SELECT   = <span class="hljs-number">246</span>;
</td></tr><tr><td class="line-number noselect">79</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_SET      = <span class="hljs-number">247</span>;
</td></tr><tr><td class="line-number noselect">80</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_SOME     = <span class="hljs-number">248</span>;
</td></tr><tr><td class="line-number noselect">81</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_SUM      = <span class="hljs-number">249</span>;
</td></tr><tr><td class="line-number noselect">82</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_THEN     = <span class="hljs-number">250</span>;
</td></tr><tr><td class="line-number noselect">83</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_TRAILING = <span class="hljs-number">251</span>;
</td></tr><tr><td class="line-number noselect">84</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_TRUE     = <span class="hljs-number">252</span>;
</td></tr><tr><td class="line-number noselect">85</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_UPDATE   = <span class="hljs-number">253</span>;
</td></tr><tr><td class="line-number noselect">86</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_WHEN     = <span class="hljs-number">254</span>;
</td></tr><tr><td class="line-number noselect">87</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_WHERE    = <span class="hljs-number">255</span>;
</td></tr><tr><td class="line-number noselect">88</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> T_WITH     = <span class="hljs-number">256</span>;
</td></tr><tr><td class="line-number noselect">89</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">90</td><td class="code-line">    <span class="hljs-comment">/**</span>
</td></tr><tr><td class="line-number noselect">91</td><td class="code-line">     * Creates a <span class="hljs-keyword">new</span> query scanner object.
</td></tr><tr><td class="line-number noselect">92</td><td class="code-line">     *
</td></tr><tr><td class="line-number noselect">93</td><td class="code-line">     * @param string $input A query string.
</td></tr><tr><td class="line-number noselect">94</td><td class="code-line">     */
</td></tr><tr><td class="line-number noselect">95</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($input)</span></span>
</td></tr><tr><td class="line-number noselect">96</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">97</td><td class="code-line">        <span class="hljs-keyword">$this</span>-&gt;setInput($input);
</td></tr><tr><td class="line-number noselect">98</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">99</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">100</td><td class="code-line">    <span class="hljs-comment">/**</span>
</td></tr><tr><td class="line-number noselect">101</td><td class="code-line">     * {@inheritdoc}
</td></tr><tr><td class="line-number noselect">102</td><td class="code-line">     */
</td></tr><tr><td class="line-number noselect">103</td><td class="code-line">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCatchablePatterns</span><span class="hljs-params">()</span></span>
</td></tr><tr><td class="line-number noselect">104</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">105</td><td class="code-line">        <span class="hljs-keyword">return</span> [
</td></tr><tr><td class="line-number noselect">106</td><td class="code-line">            <span class="hljs-string">'[a-z_][a-z0-9_]*\:[a-z_][a-z0-9_]*(?:\\\[a-z_][a-z0-9_]*)*'</span>, <span class="hljs-comment">// aliased name</span>
</td></tr><tr><td class="line-number noselect">107</td><td class="code-line">            <span class="hljs-string">'[a-z_\\\][a-z0-9_]*(?:\\\[a-z_][a-z0-9_]*)*'</span>, <span class="hljs-comment">// identifier or qualified name</span>
</td></tr><tr><td class="line-number noselect">108</td><td class="code-line">            <span class="hljs-string">'(?:[0-9]+(?:[\.][0-9]+)*)(?:e[+-]?[0-9]+)?'</span>, <span class="hljs-comment">// numbers</span>
</td></tr><tr><td class="line-number noselect">109</td><td class="code-line">            <span class="hljs-string">"'(?:[^']|'')*'"</span>, <span class="hljs-comment">// quoted strings</span>
</td></tr><tr><td class="line-number noselect">110</td><td class="code-line">            <span class="hljs-string">'\?[0-9]*|:[a-z_][a-z0-9_]*'</span>, <span class="hljs-comment">// parameters</span>
</td></tr><tr><td class="line-number noselect">111</td><td class="code-line">        ];
</td></tr><tr><td class="line-number noselect">112</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">113</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">114</td><td class="code-line">    <span class="hljs-comment">/**</span>
</td></tr><tr><td class="line-number noselect">115</td><td class="code-line">     * {@inheritdoc}
</td></tr><tr><td class="line-number noselect">116</td><td class="code-line">     */
</td></tr><tr><td class="line-number noselect">117</td><td class="code-line">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNonCatchablePatterns</span><span class="hljs-params">()</span></span>
</td></tr><tr><td class="line-number noselect">118</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">119</td><td class="code-line">        <span class="hljs-keyword">return</span> [<span class="hljs-string">'\s+'</span>, <span class="hljs-string">'(.)'</span>];
</td></tr><tr><td class="line-number noselect">120</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">121</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">122</td><td class="code-line">    <span class="hljs-comment">/**</span>
</td></tr><tr><td class="line-number noselect">123</td><td class="code-line">     * {@inheritdoc}
</td></tr><tr><td class="line-number noselect">124</td><td class="code-line">     */
</td></tr><tr><td class="line-number noselect">125</td><td class="code-line">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span><span class="hljs-params">(&amp;$value)</span></span>
</td></tr><tr><td class="line-number noselect">126</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">127</td><td class="code-line">        $type = <span class="hljs-keyword">self</span>::T_NONE;
</td></tr><tr><td class="line-number noselect">128</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">129</td><td class="code-line">        <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">true</span>) {
</td></tr><tr><td class="line-number noselect">130</td><td class="code-line">            <span class="hljs-comment">// Recognize numeric values</span>
</td></tr><tr><td class="line-number noselect">131</td><td class="code-line">            <span class="hljs-keyword">case</span> (is_numeric($value)):
</td></tr><tr><td class="line-number noselect">132</td><td class="code-line">                <span class="hljs-keyword">if</span> (strpos($value, <span class="hljs-string">'.'</span>) !== <span class="hljs-keyword">false</span> || stripos($value, <span class="hljs-string">'e'</span>) !== <span class="hljs-keyword">false</span>) {
</td></tr><tr><td class="line-number noselect">133</td><td class="code-line">                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_FLOAT;
</td></tr><tr><td class="line-number noselect">134</td><td class="code-line">                }
</td></tr><tr><td class="line-number noselect">135</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">136</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_INTEGER;
</td></tr><tr><td class="line-number noselect">137</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">138</td><td class="code-line">            <span class="hljs-comment">// Recognize quoted strings</span>
</td></tr><tr><td class="line-number noselect">139</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value[<span class="hljs-number">0</span>] === <span class="hljs-string">"'"</span>):
</td></tr><tr><td class="line-number noselect">140</td><td class="code-line">                $value = str_replace(<span class="hljs-string">"''"</span>, <span class="hljs-string">"'"</span>, substr($value, <span class="hljs-number">1</span>, strlen($value) - <span class="hljs-number">2</span>));
</td></tr><tr><td class="line-number noselect">141</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">142</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_STRING;
</td></tr><tr><td class="line-number noselect">143</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">144</td><td class="code-line">            <span class="hljs-comment">// Recognize identifiers, aliased or qualified names</span>
</td></tr><tr><td class="line-number noselect">145</td><td class="code-line">            <span class="hljs-keyword">case</span> (ctype_alpha($value[<span class="hljs-number">0</span>]) || $value[<span class="hljs-number">0</span>] === <span class="hljs-string">'_'</span> || $value[<span class="hljs-number">0</span>] === <span class="hljs-string">'\\'</span>):
</td></tr><tr><td class="line-number noselect">146</td><td class="code-line">                $name = <span class="hljs-string">'Doctrine\ORM\Query\Lexer::T_'</span> . strtoupper($value);
</td></tr><tr><td class="line-number noselect">147</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">148</td><td class="code-line">                <span class="hljs-keyword">if</span> (defined($name)) {
</td></tr><tr><td class="line-number noselect">149</td><td class="code-line">                    $type = constant($name);
</td></tr><tr><td class="line-number noselect">150</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">151</td><td class="code-line">                    <span class="hljs-keyword">if</span> ($type &gt; <span class="hljs-number">100</span>) {
</td></tr><tr><td class="line-number noselect">152</td><td class="code-line">                        <span class="hljs-keyword">return</span> $type;
</td></tr><tr><td class="line-number noselect">153</td><td class="code-line">                    }
</td></tr><tr><td class="line-number noselect">154</td><td class="code-line">                }
</td></tr><tr><td class="line-number noselect">155</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">156</td><td class="code-line">                <span class="hljs-keyword">if</span> (strpos($value, <span class="hljs-string">':'</span>) !== <span class="hljs-keyword">false</span>) {
</td></tr><tr><td class="line-number noselect">157</td><td class="code-line">                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_ALIASED_NAME;
</td></tr><tr><td class="line-number noselect">158</td><td class="code-line">                }
</td></tr><tr><td class="line-number noselect">159</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">160</td><td class="code-line">                <span class="hljs-keyword">if</span> (strpos($value, <span class="hljs-string">'\\'</span>) !== <span class="hljs-keyword">false</span>) {
</td></tr><tr><td class="line-number noselect">161</td><td class="code-line">                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_FULLY_QUALIFIED_NAME;
</td></tr><tr><td class="line-number noselect">162</td><td class="code-line">                }
</td></tr><tr><td class="line-number noselect">163</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">164</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_IDENTIFIER;
</td></tr><tr><td class="line-number noselect">165</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">166</td><td class="code-line">            <span class="hljs-comment">// Recognize input parameters</span>
</td></tr><tr><td class="line-number noselect">167</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value[<span class="hljs-number">0</span>] === <span class="hljs-string">'?'</span> || $value[<span class="hljs-number">0</span>] === <span class="hljs-string">':'</span>):
</td></tr><tr><td class="line-number noselect">168</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_INPUT_PARAMETER;
</td></tr><tr><td class="line-number noselect">169</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">170</td><td class="code-line">            <span class="hljs-comment">// Recognize symbols</span>
</td></tr><tr><td class="line-number noselect">171</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'.'</span>):
</td></tr><tr><td class="line-number noselect">172</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_DOT;
</td></tr><tr><td class="line-number noselect">173</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">','</span>):
</td></tr><tr><td class="line-number noselect">174</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_COMMA;
</td></tr><tr><td class="line-number noselect">175</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'('</span>):
</td></tr><tr><td class="line-number noselect">176</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_OPEN_PARENTHESIS;
</td></tr><tr><td class="line-number noselect">177</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">')'</span>):
</td></tr><tr><td class="line-number noselect">178</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_CLOSE_PARENTHESIS;
</td></tr><tr><td class="line-number noselect">179</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'='</span>):
</td></tr><tr><td class="line-number noselect">180</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_EQUALS;
</td></tr><tr><td class="line-number noselect">181</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'&gt;'</span>):
</td></tr><tr><td class="line-number noselect">182</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_GREATER_THAN;
</td></tr><tr><td class="line-number noselect">183</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'&lt;'</span>):
</td></tr><tr><td class="line-number noselect">184</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_LOWER_THAN;
</td></tr><tr><td class="line-number noselect">185</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'+'</span>):
</td></tr><tr><td class="line-number noselect">186</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_PLUS;
</td></tr><tr><td class="line-number noselect">187</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'-'</span>):
</td></tr><tr><td class="line-number noselect">188</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_MINUS;
</td></tr><tr><td class="line-number noselect">189</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'*'</span>):
</td></tr><tr><td class="line-number noselect">190</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_MULTIPLY;
</td></tr><tr><td class="line-number noselect">191</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'/'</span>):
</td></tr><tr><td class="line-number noselect">192</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_DIVIDE;
</td></tr><tr><td class="line-number noselect">193</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'!'</span>):
</td></tr><tr><td class="line-number noselect">194</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_NEGATE;
</td></tr><tr><td class="line-number noselect">195</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'{'</span>):
</td></tr><tr><td class="line-number noselect">196</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_OPEN_CURLY_BRACE;
</td></tr><tr><td class="line-number noselect">197</td><td class="code-line">            <span class="hljs-keyword">case</span> ($value === <span class="hljs-string">'}'</span>):
</td></tr><tr><td class="line-number noselect">198</td><td class="code-line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>::T_CLOSE_CURLY_BRACE;
</td></tr><tr><td class="line-number noselect">199</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">200</td><td class="code-line">            <span class="hljs-comment">// Default</span>
</td></tr><tr><td class="line-number noselect">201</td><td class="code-line">            <span class="hljs-keyword">default</span>:
</td></tr><tr><td class="line-number noselect">202</td><td class="code-line">                <span class="hljs-comment">// Do nothing</span>
</td></tr><tr><td class="line-number noselect">203</td><td class="code-line">        }
</td></tr><tr><td class="line-number noselect">204</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">205</td><td class="code-line">        <span class="hljs-keyword">return</span> $type;
</td></tr><tr><td class="line-number noselect">206</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">207</td><td class="code-line">}
</td></tr></table></div></code></pre>
<p>This is roughly what the DQL Parser looks like that uses the above
Lexer implementation:</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>You can see the full implementation <a href="https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/Query/Parser.php">here</a>.</p>
</div>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="03a18b33ce54496f154cdcf4f750f3d269b9f1f1"
            data-toggle="tooltip"
            data-placement="bottom"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="03a18b33ce54496f154cdcf4f750f3d269b9f1f1"><table class="code-block-table"><tr><td class="line-number noselect">1</td><td class="code-line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parser</span></span>
</td></tr><tr><td class="line-number noselect">2</td><td class="code-line">{
</td></tr><tr><td class="line-number noselect">3</td><td class="code-line">    <span class="hljs-keyword">private</span> $lexer;
</td></tr><tr><td class="line-number noselect">4</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">5</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($dql)</span></span>
</td></tr><tr><td class="line-number noselect">6</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">7</td><td class="code-line">        <span class="hljs-keyword">$this</span>-&gt;lexer = <span class="hljs-keyword">new</span> Lexer();
</td></tr><tr><td class="line-number noselect">8</td><td class="code-line">        <span class="hljs-keyword">$this</span>-&gt;lexer-&gt;setInput($dql);
</td></tr><tr><td class="line-number noselect">9</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">10</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">11</td><td class="code-line">    <span class="hljs-comment">// ...</span>
</td></tr><tr><td class="line-number noselect">12</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">13</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAST</span><span class="hljs-params">()</span></span>
</td></tr><tr><td class="line-number noselect">14</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">15</td><td class="code-line">        <span class="hljs-comment">// Parse &amp; build AST</span>
</td></tr><tr><td class="line-number noselect">16</td><td class="code-line">        $AST = <span class="hljs-keyword">$this</span>-&gt;QueryLanguage();
</td></tr><tr><td class="line-number noselect">17</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">18</td><td class="code-line">        <span class="hljs-comment">// ...</span>
</td></tr><tr><td class="line-number noselect">19</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">20</td><td class="code-line">        <span class="hljs-keyword">return</span> $AST;
</td></tr><tr><td class="line-number noselect">21</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">22</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">23</td><td class="code-line">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">QueryLanguage</span><span class="hljs-params">()</span></span>
</td></tr><tr><td class="line-number noselect">24</td><td class="code-line">    {
</td></tr><tr><td class="line-number noselect">25</td><td class="code-line">        <span class="hljs-keyword">$this</span>-&gt;lexer-&gt;moveNext();
</td></tr><tr><td class="line-number noselect">26</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">27</td><td class="code-line">        <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">$this</span>-&gt;lexer-&gt;lookahead[<span class="hljs-string">'type'</span>]) {
</td></tr><tr><td class="line-number noselect">28</td><td class="code-line">            <span class="hljs-keyword">case</span> Lexer::T_SELECT:
</td></tr><tr><td class="line-number noselect">29</td><td class="code-line">                $statement = <span class="hljs-keyword">$this</span>-&gt;SelectStatement();
</td></tr><tr><td class="line-number noselect">30</td><td class="code-line">                <span class="hljs-keyword">break</span>;
</td></tr><tr><td class="line-number noselect">31</td><td class="code-line">            <span class="hljs-keyword">case</span> Lexer::T_UPDATE:
</td></tr><tr><td class="line-number noselect">32</td><td class="code-line">                $statement = <span class="hljs-keyword">$this</span>-&gt;UpdateStatement();
</td></tr><tr><td class="line-number noselect">33</td><td class="code-line">                <span class="hljs-keyword">break</span>;
</td></tr><tr><td class="line-number noselect">34</td><td class="code-line">            <span class="hljs-keyword">case</span> Lexer::T_DELETE:
</td></tr><tr><td class="line-number noselect">35</td><td class="code-line">                $statement = <span class="hljs-keyword">$this</span>-&gt;DeleteStatement();
</td></tr><tr><td class="line-number noselect">36</td><td class="code-line">                <span class="hljs-keyword">break</span>;
</td></tr><tr><td class="line-number noselect">37</td><td class="code-line">            <span class="hljs-keyword">default</span>:
</td></tr><tr><td class="line-number noselect">38</td><td class="code-line">                <span class="hljs-keyword">$this</span>-&gt;syntaxError(<span class="hljs-string">'SELECT, UPDATE or DELETE'</span>);
</td></tr><tr><td class="line-number noselect">39</td><td class="code-line">                <span class="hljs-keyword">break</span>;
</td></tr><tr><td class="line-number noselect">40</td><td class="code-line">        }
</td></tr><tr><td class="line-number noselect">41</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">42</td><td class="code-line">        <span class="hljs-comment">// Check for end of string</span>
</td></tr><tr><td class="line-number noselect">43</td><td class="code-line">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;lexer-&gt;lookahead !== <span class="hljs-keyword">null</span>) {
</td></tr><tr><td class="line-number noselect">44</td><td class="code-line">            <span class="hljs-keyword">$this</span>-&gt;syntaxError(<span class="hljs-string">'end of string'</span>);
</td></tr><tr><td class="line-number noselect">45</td><td class="code-line">        }
</td></tr><tr><td class="line-number noselect">46</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">47</td><td class="code-line">        <span class="hljs-keyword">return</span> $statement;
</td></tr><tr><td class="line-number noselect">48</td><td class="code-line">    }
</td></tr><tr><td class="line-number noselect">49</td><td class="code-line">
</td></tr><tr><td class="line-number noselect">50</td><td class="code-line">    <span class="hljs-comment">// ...</span>
</td></tr><tr><td class="line-number noselect">51</td><td class="code-line">}
</td></tr></table></div></code></pre>
<p>Now the AST is used to transform the DQL query in to portable SQL for whatever relational
database you are using!</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f7510e580a984769a51916d004e5e0414e7b3454"
            data-toggle="tooltip"
            data-placement="bottom"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f7510e580a984769a51916d004e5e0414e7b3454"><table class="code-block-table"><tr><td class="line-number noselect">1</td><td class="code-line">$parser = <span class="hljs-keyword">new</span> Parser(<span class="hljs-string">'SELECT u FROM User u'</span>);
</td></tr><tr><td class="line-number noselect">2</td><td class="code-line">$AST = $parser-&gt;getAST(); <span class="hljs-comment">// returns \Doctrine\ORM\Query\AST\SelectStatement</span>
</td></tr></table></div></code></pre>
<a class="section-anchor" id="what-is-an-ast" name="what-is-an-ast"></a><h1 class="section-header"><a href="#what-is-an-ast">What is an AST?<i class="fas fa-link"></i></a></h1>
<p>AST stands for <a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract syntax tree</a>.
In computer science, an abstract syntax tree (AST), or just syntax tree, is a
tree representation of the abstract syntactic structure of source code written
in a programming language. Each node of the tree denotes a construct occurring in
the source code.</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

                            
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://cdn.ravenjs.com/3.24.2/raven.min.js" crossorigin="anonymous"></script>

        <script type="text/javascript">
            Raven.config('https://09ce137590054cfd8f0b7e9324d6ec14@sentry.io/1197701').install()
        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?850a2b"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = 'lexer';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }

            function googleTranslateElementInit() {
                $('#google_translate_element').html('');

                new google.translate.TranslateElement(
                    {pageLanguage: 'en'}, 'google_translate_element'
                );

                $('#google_translate_element select').on('change', function() {
                    var language = $('#google_translate_element select option:selected').text();

                    googleAnalyticsEvent('Translate', 'click', language);
                });
            }
        </script>

        <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>

            <script src="https://staging.doctrine-project.org/js/sidebar.js?01f3db"></script>

    <script type="text/javascript">
        new Sidebar();
    </script>

        
        
            </body>
</html>
