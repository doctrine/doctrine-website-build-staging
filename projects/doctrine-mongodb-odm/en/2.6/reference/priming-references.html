<!DOCTYPE html>
<html>
    <head>
        <title>        Priming References - Doctrine MongoDB Object Document Mapper (MongoDB ODM)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine MongoDB Object Document Mapper Documentation: Priming References ">

        <meta name="keywords" content="                    php,mongodb,odm,data,mapper,mapping,object,documentation,priming,references
    ">

                    <meta name="robots" content="noindex">
        
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.9/reference/priming-references.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?30e146"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.6/reference/priming-references.html" />
        <meta property="og:title" content="        Priming References - Doctrine MongoDB Object Document Mapper (MongoDB ODM)
    " />
        <meta property="og:description" content="Doctrine MongoDB Object Document Mapper Documentation: Priming References " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine MongoDB Object Document Mapper",
            "description": "Priming References",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/mongodb-odm/edit/2.6.x/docs/en/reference/priming-references.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc-section">
<h2 class="toc-header">Tutorials</h2><div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../tutorials/getting-started.html#getting-started">Getting Started</a>


</li>
    </ul>
</div>
</div><div class="toc-section">
<h2 class="toc-header">Reference</h2><div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="introduction.html#introduction">Introduction</a>


</li>
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>


</li>
    <li class="toc-item">
    <a href="console-commands.html#console-commands">Console Commands</a>


</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>


</li>
    <li class="toc-item">
    <a href="custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a>


</li>
    <li class="toc-item">
    <a href="reference-mapping.html#reference-mapping">Reference Mapping</a>


</li>
    <li class="toc-item">
    <a href="bidirectional-references.html#bi-directional-references">Bi-Directional References</a>


</li>
    <li class="toc-item">
    <a href="complex-references.html#complex-references">Complex References</a>


</li>
    <li class="toc-item">
    <a href="indexes.html#indexes">Indexes</a>


</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>


</li>
    <li class="toc-item">
    <a href="embedded-mapping.html#embedded-mapping">Embedded Mapping</a>


</li>
    <li class="toc-item">
    <a href="trees.html#trees">Trees</a>


</li>
    <li class="toc-item">
    <a href="storing-files-with-gridfs.html#storing-files-with-gridfs">Storing Files with GridFS</a>


</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>


</li>
    <li class="toc-item">
    <a href="annotations-reference.html#annotations-reference">Annotations Reference</a>


</li>
    <li class="toc-item">
    <a href="metadata-drivers.html#metadata-drivers">Metadata Drivers</a>


</li>
    <li class="toc-item">
    <a href="working-with-objects.html#working-with-objects">Working with Objects</a>


</li>
    <li class="toc-item">
    <a href="document-repositories.html#document-repositories">Document Repositories</a>


</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>


</li>
    <li class="toc-item">
    <a href="migrating-schemas.html#migrating-schemas">Migrating Schemas</a>


</li>
    <li class="toc-item">
    <a href="query-builder-api.html#query-builder-api">Query Builder API</a>


</li>
    <li class="toc-item">
    <a href="aggregation-builder.html#aggregation-builder">Aggregation builder</a>


</li>
    <li class="toc-item">
    <a href="aggregation-stage-reference.html#aggregation-pipeline-stages">Aggregation pipeline stages</a>


</li>
    <li class="toc-item">
    <a href="geospatial-queries.html#geospatial-queries">Geospatial Queries</a>


</li>
    <li class="toc-item">
    <a href="find-and-update.html#find-and-modify">Find and Modify</a>


</li>
    <li class="toc-item">
    <a href="upserting-documents.html#upserting-documents">Upserting Documents</a>


</li>
    <li class="toc-item">
    <a href="filters.html#filters-1">Filters</a>


</li>
    <li class="toc-item opened">
    <a href="#priming-references">Priming References</a>


</li>
    <li class="toc-item">
    <a href="capped-collections.html#capped-collections">Capped Collections</a>


</li>
    <li class="toc-item">
    <a href="storage-strategies.html#storage-strategies">Storage Strategies</a>


</li>
    <li class="toc-item">
    <a href="custom-collections.html#custom-collections">Custom Collections</a>


</li>
    <li class="toc-item">
    <a href="sharding.html#sharding-1">Sharding</a>


</li>
    <li class="toc-item">
    <a href="transactions-and-concurrency.html#transactions-and-concurrency">Transactions and Concurrency</a>


</li>
    <li class="toc-item">
    <a href="best-practices.html#best-practices">Best Practices</a>


</li>
    <li class="toc-item">
    <a href="change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a>


</li>
    </ul>
</div>
</div><div class="toc-section">
<h2 class="toc-header">Cookbook</h2><div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../cookbook/blending-orm-and-mongodb-odm.html#blending-the-orm-and-mongodb-odm">Blending the ORM and MongoDB ODM</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-array-access-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-the-notify-changetracking-policy.html#implementing-the-notify-changetracking-policy">Implementing the Notify ChangeTracking Policy</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-wakeup-or-clone.html#implementing-wakeup-or-clone">Implementing Wakeup or Clone</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/mapping-classes-to-orm-and-odm.html#mapping-classes-to-the-orm-and-odm">Mapping Classes to the ORM and ODM</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/resolve-target-document-listener.html#keeping-your-modules-independent">Keeping Your Modules Independent</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/simple-search-engine.html#simple-search-engine">Simple Search Engine</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/soft-delete-extension.html#soft-delete-extension">Soft Delete Extension</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/validation-of-documents.html#validation-of-documents">Validation of Documents</a>


</li>
    </ul>
</div>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://staging.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "MongoDB ODM",
            "item": "https://staging.doctrine-project.org/projects/mongodb-odm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://staging.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.6/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Priming References",
            "item": "https://staging.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.6/reference/priming-references.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.6/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Priming References</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-odm/en/2.6/reference/priming-references.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.6.3
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-odm/en/latest/reference/priming-references.html">
                                                        2.10

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.9/reference/priming-references.html">
                                                        2.9.0

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.8/reference/priming-references.html">2.8</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.7/reference/priming-references.html">2.7</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-mongodb-odm/en/2.6/reference/priming-references.html">2.6</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.5/reference/priming-references.html">2.5</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.4/reference/priming-references.html">2.4</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.3/reference/priming-references.html">2.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.2/reference/priming-references.html">2.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.1/reference/priming-references.html">2.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.0/reference/priming-references.html">2.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.3/reference/priming-references.html">1.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.2/reference/priming-references.html">1.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.1/reference/priming-references.html">1.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.0/reference/priming-references.html">1.0</a>
                                                                                                                                                                        </div>
                                </div>
                            
                            

            <div class="section" id="priming-references">
            <h1 class="section-header ">
    <a href="#priming-references">
        Priming References
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>Priming references allows you to consolidate database queries when working with
<a href="reference-mapping.html#reference_one">one</a> and <a href="reference-mapping.html#reference_many">many</a> reference mappings.
This is useful for avoiding the
<a href="http://stackoverflow.com/q/97197/162228">n+1 problem</a> in your application.</p>

            <div class="section" id="query-builder">
            <h2 class="section-header ">
    <a href="#query-builder">
        Query Builder
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Consider the following abbreviated model:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9a48093d8c2e5afee72fdcc377561baca4f0ef75"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9a48093d8c2e5afee72fdcc377561baca4f0ef75"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-1" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">/** <span class="hljs-doctag">@Document</span> */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@ReferenceMany</span>(targetDocument=Account::class) */</span>
    <span class="hljs-keyword">private</span> $accounts;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-2" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-3" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-4" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-5" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-6" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-7" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-8" class="line-number-anchor" /><a href="#line-number-9a48093d8c2e5afee72fdcc377561baca4f0ef75-8">8</a></td></tr></table></div></code></pre>
            
    <p>We would like to query for 100 users and then iterate over their referenced
accounts.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d1cb1abaea507bdd71b028de55ee8edb2e15450b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d1cb1abaea507bdd71b028de55ee8edb2e15450b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-1" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-1">1</a></td><td class="code-line" rowspan="16"><span class="hljs-meta">&lt;?php</span>

$qb = $dm-&gt;createQueryBuilder(User::class)
    -&gt;limit(<span class="hljs-number">100</span>);
$query = $qb-&gt;getQuery();
$users = $query-&gt;execute();

<span class="hljs-keyword">foreach</span> ($users <span class="hljs-keyword">as</span> $user) {
    <span class="hljs-comment">/* PersistentCollection::initialize() will be invoked when we begin
     * iterating through the user's accounts. Any accounts not already
     * managed by the unit of work will need to be queried.
     */</span>
    <span class="hljs-keyword">foreach</span> ($user-&gt;getAccounts() <span class="hljs-keyword">as</span> $account) {
        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-2" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-3" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-4" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-5" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-6" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-7" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-8" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-9" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-10" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-11" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-12" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-13" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-14" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-15" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-16" class="line-number-anchor" /><a href="#line-number-d1cb1abaea507bdd71b028de55ee8edb2e15450b-16">16</a></td></tr></table></div></code></pre>
            
    <p>In this example, ODM would query the database once for the result set of users
and then, for each user, issue a separate query to load any accounts that are
not already being managed by the unit of work. This could result in as many as
100 additional database queries!</p>

            
    <p>If we expect to iterate through all users and their accounts, we could optimize
this process by loading all of the referenced accounts with one query. The query
builder&#039;s <code>prime()</code> method allows us to do just that.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="968fc478fc610a315c391d09ee41d2595439a945"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="968fc478fc610a315c391d09ee41d2595439a945"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-1" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-1">1</a></td><td class="code-line" rowspan="20"><span class="hljs-meta">&lt;?php</span>

$qb = $dm-&gt;createQueryBuilder(User::class)
    -&gt;field(<span class="hljs-string">'accounts'</span>)-&gt;prime(<span class="hljs-keyword">true</span>)
    -&gt;limit(<span class="hljs-number">100</span>);
$query = $qb-&gt;getQuery();

<span class="hljs-comment">/* After querying for the users, ODM will collect the IDs of all referenced
 * accounts and load them with a single additional query.
 */</span>
$users = $query-&gt;execute();

<span class="hljs-keyword">foreach</span> ($users <span class="hljs-keyword">as</span> $user) {
    <span class="hljs-comment">/* Accounts have already been loaded, so iterating through accounts will
     * not query an additional query.
     */</span>
    <span class="hljs-keyword">foreach</span> ($user-&gt;getAccounts() <span class="hljs-keyword">as</span> $account) {

    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-2" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-3" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-4" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-5" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-6" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-7" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-8" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-9" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-10" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-11" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-12" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-13" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-14" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-15" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-16" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-17" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-18" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-19" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-968fc478fc610a315c391d09ee41d2595439a945-20" class="line-number-anchor" /><a href="#line-number-968fc478fc610a315c391d09ee41d2595439a945-20">20</a></td></tr></table></div></code></pre>
            
    <p>In this case, priming will allow us to load all users and referenced accounts in
two database queries. If the accounts had used an
<a href="inheritance-mapping.html#inheritance_mapping">inheritance mapping</a>, priming might require several
queries (one per discriminated class name).</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Priming is also compatible with <a href="reference-mapping.html#storing_references">ID references</a>
and discriminated references. When priming discriminated references, ODM
will issue one query per distinct class among the referenced document(s).</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Hydration must be enabled in the query builder for priming to work properly.
Disabling hydration will cause the DBRef to be returned for a referenced
document instead of the hydrated document object.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="inverse-references">
            <h2 class="section-header ">
    <a href="#inverse-references">
        Inverse references
        <i class="fas fa-link"></i>
    </a>
</h2>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>This feature was added in version 1.2.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>When using inverse references (references mapped using <code>mappedBy</code> or
<code>repositoryMethod</code>) you can also enable primers on one-to-many references by
specifying them in the mapping:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="bafaa20f1cffa990990a1e05c7469b37781f065d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="bafaa20f1cffa990990a1e05c7469b37781f065d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-1" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">/** <span class="hljs-doctag">@Document</span> */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@ReferenceMany</span>(targetDocument=Account::class, prime={"user"}) */</span>
    <span class="hljs-keyword">private</span> $accounts;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-2" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-3" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-4" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-5" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-6" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-7" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-8" class="line-number-anchor" /><a href="#line-number-bafaa20f1cffa990990a1e05c7469b37781f065d-8">8</a></td></tr></table></div></code></pre>
            
    <p>When the collection is initialized, the configured primers are automatically
added to the query.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>When using inverse references with <code>repositoryMethod</code>, any primers you
might have added in the <code>repositoryMethod</code> are overwritten with those
specified in the mapping.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="primer-callback">
            <h2 class="section-header ">
    <a href="#primer-callback">
        Primer Callback
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Passing <code>true</code> to <code>prime()</code> instructs ODM to load the referenced document(s)
on its own; however, we can also pass a custom callable (e.g. Closure instance)
to <code>prime()</code>, which allows more control over the priming query.</p>

            
    <p>As an example, we can look at the default callable, which is found in the
<code>ReferencePrimer</code> class.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-1" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(DocumentManager $dm, ClassMetadata $class, array $ids, array $hints)</span> : <span class="hljs-title">void</span> </span>{
    <span class="hljs-keyword">if</span> ($class-&gt;identifier === <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">return</span>;
    }

    $qb = $dm-&gt;createQueryBuilder($class-&gt;name)
        -&gt;field($class-&gt;identifier)-&gt;in($ids);

    <span class="hljs-keyword">if</span> (! <span class="hljs-keyword">empty</span>($hints[Query::HINT_READ_PREFERENCE])) {
        $qb-&gt;setReadPreference($hints[Query::HINT_READ_PREFERENCE]);
    }

    $iterator = $qb-&gt;getQuery()-&gt;execute();
    assert($iterator <span class="hljs-keyword">instanceof</span> Iterator);
    $iterator-&gt;toArray();
};</td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-2" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-3" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-4" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-5" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-6" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-7" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-8" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-9" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-10" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-11" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-12" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-13" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-14" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-15" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-16" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-17" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-18" class="line-number-anchor" /><a href="#line-number-7fe4d61514ada9c0acde8974b41b4fe8ef3a0f09-18">18</a></td></tr></table></div></code></pre>
            
    <p>Firstly, the callable is passed the <code>DocumentManager</code> of the main query. This
is necessary to create the query used for priming, and ensures that the results
will become managed in the same scope. The <code>ClassMetadata</code> argument provides
mapping information for the referenced class as well as its name, which is used
to create the query builder. An array of identifiers follows, which is used to
query for the documents to be primed. Lastly, the <code>UnitOfWork</code> hints from the
original query are provided so that the priming query can apply them as well.</p>

    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?ff3b61"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'mongodb-odm';
            var versionSlug = '2.6';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search MongoDB ODM 2.6'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
