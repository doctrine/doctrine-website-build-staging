<!DOCTYPE html>
<html>
    <head>
        <title>Keeping your Modules independent - Object Relational Mapper (ORM) - Doctrine</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Object Relational Mapper Documentation: Keeping your Modules independent ">

        <meta name="keywords" content="php,orm,mysql,object,data,mapper,mapping,query,dql,documentation,keeping,your,modules,independent">

                    <meta name="robots" content="noindex">
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.6/cookbook/resolve-target-entity-listener.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?176a03"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.6/cookbook/resolve-target-entity-listener.html" />
        <meta property="og:title" content="Keeping your Modules independent - Object Relational Mapper (ORM) - Doctrine" />
        <meta property="og:description" content="Doctrine Object Relational Mapper Documentation: Keeping your Modules independent " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Object Relational Mapper",
            "description": "Keeping your Modules independent",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?c1fd47" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/community/index.html">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/team/maintainers.html" id="navbarTeamDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Team</a>

                            <div class="dropdown-menu" aria-labelledby="navbarTeamDropdown">
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/orm/edit/2.6/docs/en/cookbook/resolve-target-entity-listener.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        
<div class="toc"><ul><li id="advanced-field-value-conversion-using-custom-mapping-types-html-advanced-field-value-conversion-using-custom-mapping-types" class="toc-item"><a href="advanced-field-value-conversion-using-custom-mapping-types.html#advanced-field-value-conversion-using-custom-mapping-types">Advanced field value conversion using custom mapping types</a></li><ul><li id="advanced-field-value-conversion-using-custom-mapping-types-html-the-entity" class="toc-item"><a href="advanced-field-value-conversion-using-custom-mapping-types.html#the-entity">The entity</a></li><li id="advanced-field-value-conversion-using-custom-mapping-types-html-the-mapping-type" class="toc-item"><a href="advanced-field-value-conversion-using-custom-mapping-types.html#the-mapping-type">The mapping type</a></li><li id="advanced-field-value-conversion-using-custom-mapping-types-html-example-usage" class="toc-item"><a href="advanced-field-value-conversion-using-custom-mapping-types.html#example-usage">Example usage</a></li></ul><li id="aggregate-fields-html-aggregate-fields" class="toc-item"><a href="aggregate-fields.html#aggregate-fields">Aggregate Fields</a></li><ul><li id="aggregate-fields-html-an-example-model" class="toc-item"><a href="aggregate-fields.html#an-example-model">An example model</a></li><li id="aggregate-fields-html-using-dql" class="toc-item"><a href="aggregate-fields.html#using-dql">Using DQL</a></li><li id="aggregate-fields-html-using-your-domain-model" class="toc-item"><a href="aggregate-fields.html#using-your-domain-model">Using your Domain Model</a></li><li id="aggregate-fields-html-using-an-aggregate-field" class="toc-item"><a href="aggregate-fields.html#using-an-aggregate-field">Using an Aggregate Field</a></li><li id="aggregate-fields-html-tackling-race-conditions-with-aggregate-fields" class="toc-item"><a href="aggregate-fields.html#tackling-race-conditions-with-aggregate-fields">Tackling Race Conditions with Aggregate Fields</a></li><li id="aggregate-fields-html-keeping-updates-and-deletes-in-sync" class="toc-item"><a href="aggregate-fields.html#keeping-updates-and-deletes-in-sync">Keeping Updates and Deletes in Sync</a></li><li id="aggregate-fields-html-conclusion" class="toc-item"><a href="aggregate-fields.html#conclusion">Conclusion</a></li></ul><li id="custom-mapping-types-html-custom-mapping-types" class="toc-item"><a href="custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a></li><li id="decorator-pattern-html-persisting-the-decorator-pattern" class="toc-item"><a href="decorator-pattern.html#persisting-the-decorator-pattern">Persisting the Decorator Pattern</a></li><ul><li id="decorator-pattern-html-component" class="toc-item"><a href="decorator-pattern.html#component">Component</a></li><li id="decorator-pattern-html-concretecomponent" class="toc-item"><a href="decorator-pattern.html#concretecomponent">ConcreteComponent</a></li><li id="decorator-pattern-html-decorator" class="toc-item"><a href="decorator-pattern.html#decorator">Decorator</a></li><li id="decorator-pattern-html-concretedecorator" class="toc-item"><a href="decorator-pattern.html#concretedecorator">ConcreteDecorator</a></li><li id="decorator-pattern-html-examples" class="toc-item"><a href="decorator-pattern.html#examples">Examples</a></li></ul><li id="dql-custom-walkers-html-extending-dql-in-doctrine-2-custom-ast-walkers" class="toc-item"><a href="dql-custom-walkers.html#extending-dql-in-doctrine-2-custom-ast-walkers">Extending DQL in Doctrine 2: Custom AST Walkers</a></li><ul><li id="dql-custom-walkers-html-generic-count-query-for-pagination" class="toc-item"><a href="dql-custom-walkers.html#generic-count-query-for-pagination">Generic count query for pagination</a></li><li id="dql-custom-walkers-html-modify-the-output-walker-to-generate-vendor-specific-sql" class="toc-item"><a href="dql-custom-walkers.html#modify-the-output-walker-to-generate-vendor-specific-sql">Modify the Output Walker to generate Vendor specific SQL</a></li></ul><li id="dql-user-defined-functions-html-dql-user-defined-functions" class="toc-item"><a href="dql-user-defined-functions.html#dql-user-defined-functions">DQL User Defined Functions</a></li><ul><li id="dql-user-defined-functions-html-registering-your-own-dql-functions" class="toc-item"><a href="dql-user-defined-functions.html#registering-your-own-dql-functions">Registering your own DQL functions</a></li><li id="dql-user-defined-functions-html-date-diff" class="toc-item"><a href="dql-user-defined-functions.html#date-diff">Date Diff</a></li><li id="dql-user-defined-functions-html-date-add" class="toc-item"><a href="dql-user-defined-functions.html#date-add">Date Add</a></li><li id="dql-user-defined-functions-html-conclusion" class="toc-item"><a href="dql-user-defined-functions.html#conclusion">Conclusion</a></li></ul><li id="entities-in-session-html-entities-in-the-session" class="toc-item"><a href="entities-in-session.html#entities-in-the-session">Entities in the Session</a></li><ul><li id="entities-in-session-html-merging-entity-into-an-entitymanager" class="toc-item"><a href="entities-in-session.html#merging-entity-into-an-entitymanager">Merging entity into an EntityManager</a></li><li id="entities-in-session-html-serializing-entity-into-the-session" class="toc-item"><a href="entities-in-session.html#serializing-entity-into-the-session">Serializing entity into the session</a></li></ul><li id="implementing-arrayaccess-for-domain-objects-html-implementing-arrayaccess-for-domain-objects" class="toc-item"><a href="implementing-arrayaccess-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a></li><ul><li id="implementing-arrayaccess-for-domain-objects-html-option-1" class="toc-item"><a href="implementing-arrayaccess-for-domain-objects.html#option-1">Option 1</a></li><li id="implementing-arrayaccess-for-domain-objects-html-option-2" class="toc-item"><a href="implementing-arrayaccess-for-domain-objects.html#option-2">Option 2</a></li><li id="implementing-arrayaccess-for-domain-objects-html-read-only" class="toc-item"><a href="implementing-arrayaccess-for-domain-objects.html#read-only">Read-only</a></li></ul><li id="implementing-the-notify-changetracking-policy-html-implementing-the-notify-changetracking-policy" class="toc-item"><a href="implementing-the-notify-changetracking-policy.html#implementing-the-notify-changetracking-policy">Implementing the Notify ChangeTracking Policy</a></li><ul><li id="implementing-the-notify-changetracking-policy-html-implementing-notifypropertychanged" class="toc-item"><a href="implementing-the-notify-changetracking-policy.html#implementing-notifypropertychanged">Implementing NotifyPropertyChanged</a></li></ul><li id="implementing-wakeup-or-clone-html-implementing-wakeup-or-clone" class="toc-item"><a href="implementing-wakeup-or-clone.html#implementing-wakeup-or-clone">Implementing Wakeup or Clone</a></li><ul><li id="implementing-wakeup-or-clone-html-safely-implementing-wakeup" class="toc-item"><a href="implementing-wakeup-or-clone.html#safely-implementing-wakeup">Safely implementing __wakeup</a></li><li id="implementing-wakeup-or-clone-html-safely-implementing-clone" class="toc-item"><a href="implementing-wakeup-or-clone.html#safely-implementing-clone">Safely implementing __clone</a></li><li id="implementing-wakeup-or-clone-html-summary" class="toc-item"><a href="implementing-wakeup-or-clone.html#summary">Summary</a></li></ul><li id="mysql-enums-html-mysql-enums" class="toc-item"><a href="mysql-enums.html#mysql-enums">Mysql Enums</a></li><ul><li id="mysql-enums-html-solution-1-mapping-to-varchars" class="toc-item"><a href="mysql-enums.html#solution-1-mapping-to-varchars">Solution 1: Mapping to Varchars</a></li><li id="mysql-enums-html-solution-2-defining-a-type" class="toc-item"><a href="mysql-enums.html#solution-2-defining-a-type">Solution 2: Defining a Type</a></li></ul><li id="resolve-target-entity-listener-html-keeping-your-modules-independent" class="toc-item"><a href="resolve-target-entity-listener.html#keeping-your-modules-independent">Keeping your Modules independent</a></li><ul><li id="resolve-target-entity-listener-html-background" class="toc-item"><a href="resolve-target-entity-listener.html#background">Background</a></li><li id="resolve-target-entity-listener-html-set-up" class="toc-item"><a href="resolve-target-entity-listener.html#set-up">Set up</a></li><li id="resolve-target-entity-listener-html-final-thoughts" class="toc-item"><a href="resolve-target-entity-listener.html#final-thoughts">Final Thoughts</a></li></ul><li id="sql-table-prefixes-html-sql-table-prefixes" class="toc-item"><a href="sql-table-prefixes.html#sql-table-prefixes">SQL-Table Prefixes</a></li><ul><li id="sql-table-prefixes-html-implementing-the-listener" class="toc-item"><a href="sql-table-prefixes.html#implementing-the-listener">Implementing the listener</a></li><li id="sql-table-prefixes-html-telling-the-entitymanager-about-our-listener" class="toc-item"><a href="sql-table-prefixes.html#telling-the-entitymanager-about-our-listener">Telling the EntityManager about our listener</a></li></ul><li id="strategy-cookbook-introduction-html-strategy-pattern" class="toc-item"><a href="strategy-cookbook-introduction.html#strategy-pattern">Strategy-Pattern</a></li><ul><li id="strategy-cookbook-introduction-html-scenario-problem" class="toc-item"><a href="strategy-cookbook-introduction.html#scenario-problem">Scenario / Problem</a></li><li id="strategy-cookbook-introduction-html-solution" class="toc-item"><a href="strategy-cookbook-introduction.html#solution">Solution</a></li></ul><li id="validation-of-entities-html-validation-of-entities" class="toc-item"><a href="validation-of-entities.html#validation-of-entities">Validation of Entities</a></li><li id="working-with-datetime-html-working-with-datetime-instances" class="toc-item"><a href="working-with-datetime.html#working-with-datetime-instances">Working with DateTime Instances</a></li><ul><li id="working-with-datetime-html-datetime-changes-are-detected-by-reference" class="toc-item"><a href="working-with-datetime.html#datetime-changes-are-detected-by-reference">DateTime changes are detected by Reference</a></li><li id="working-with-datetime-html-default-timezone-gotcha" class="toc-item"><a href="working-with-datetime.html#default-timezone-gotcha">Default Timezone Gotcha</a></li><li id="working-with-datetime-html-handling-different-timezones-with-the-datetime-type" class="toc-item"><a href="working-with-datetime.html#handling-different-timezones-with-the-datetime-type">Handling different Timezones with the DateTime Type</a></li></ul></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/orm.html">ORM</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.6/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Keeping your Modules independent</li>
                            </ol>
                        </nav>
                                    </div>

                

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-orm/en/2.6/cookbook/resolve-target-entity-listener.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.6
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/latest/cookbook/resolve-target-entity-listener.html">
                                                    3.0

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.7/cookbook/resolve-target-entity-listener.html">
                                                    2.7

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-orm/en/2.6/cookbook/resolve-target-entity-listener.html">
                                                    2.6

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-orm/en/2.5/cookbook/resolve-target-entity-listener.html">2.5</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-orm/en/2.4/cookbook/resolve-target-entity-listener.html">2.4</a>
                                                                                                                        </div>
                                </div>
                            
                            
<p></p>
<a class="section-anchor" id="keeping-your-modules-independent" name="keeping-your-modules-independent"></a><h1 class="section-header"><a href="#keeping-your-modules-independent">Keeping your Modules independent<i class="fas fa-link"></i></a></h1>
<div class="alert version-added bg-info text-white"><p class="new-version font-weight-bold"><i class="fas fa-plus-square"></i> New in version 2.2</p></div><p><p>One of the goals of using modules is to create discrete units of functionality
that do not have many (if any) dependencies, allowing you to use that
functionality in other applications without including unnecessary items.</p></p>
<p>Doctrine 2.2 includes a new utility called the <code>ResolveTargetEntityListener</code>,
that functions by intercepting certain calls inside Doctrine and rewrite
targetEntity parameters in your metadata mapping at runtime. It means that
in your bundle you are able to use an interface or abstract class in your
mappings and expect correct mapping to a concrete entity at runtime.</p>
<p>This functionality allows you to define relationships between different entities
but not making them hard dependencies.</p>
<a class="section-anchor" id="background" name="background"></a><h2 class="section-header"><a href="#background">Background<i class="fas fa-link"></i></a></h2>
<p>In the following example, the situation is we have an `InvoiceModule`
which provides invoicing functionality, and a `CustomerModule` that
contains customer management tools. We want to keep these separated,
because they can be used in other systems without each other, but for
our application we want to use them together.</p>
<p>In this case, we have an <code>Invoice</code> entity with a relationship to a
non-existent object, an <code>InvoiceSubjectInterface</code>. The goal is to get
the <code>ResolveTargetEntityListener</code> to replace any mention of the interface
with a real object that implements that interface.</p>
<a class="section-anchor" id="set-up" name="set-up"></a><h2 class="section-header"><a href="#set-up">Set up<i class="fas fa-link"></i></a></h2>
<p>We're going to use the following basic entities (which are incomplete
for brevity) to explain how to set up and use the RTEL.</p>
<p>A Customer entity</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-1" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Acme/AppModule/Entity/Customer.php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">AppModule</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Mapping</span> <span class="hljs-title">as</span> <span class="hljs-title">ORM</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">CustomerModule</span>\<span class="hljs-title">Entity</span>\<span class="hljs-title">Customer</span> <span class="hljs-title">as</span> <span class="hljs-title">BaseCustomer</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">InvoiceModule</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">InvoiceSubjectInterface</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ORM</span>\Entity
 * <span class="hljs-doctag">@ORM</span>\Table(name="customer")
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseCustomer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvoiceSubjectInterface</span>
</span>{
    <span class="hljs-comment">// In our example, any methods defined in the InvoiceSubjectInterface</span>
    <span class="hljs-comment">// are already implemented in the BaseCustomer</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-2" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-3" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-4" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-5" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-6" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-7" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-8" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-9" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-10" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-11" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-12" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-13" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-14" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-15" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-16" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-17" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-18" class="line-number-anchor" /><a href="#line-number-ec7e17e45a66dcb62a1d3a3e7c8fa10af76a473c-18">18</a></td></tr></table></div></code></pre>
<p>An Invoice entity</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-1" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Acme/InvoiceModule/Entity/Invoice.php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">InvoiceModule</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Mapping</span> <span class="hljs-title">AS</span> <span class="hljs-title">ORM</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">InvoiceModule</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">InvoiceSubjectInterface</span>;

<span class="hljs-comment">/**
 * Represents an Invoice.
 *
 * <span class="hljs-doctag">@ORM</span>\Entity
 * <span class="hljs-doctag">@ORM</span>\Table(name="invoice")
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Invoice</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@ORM</span>\ManyToOne(targetEntity="Acme\InvoiceModule\Model\InvoiceSubjectInterface")
     * <span class="hljs-doctag">@var</span> InvoiceSubjectInterface
     */</span>
    <span class="hljs-keyword">protected</span> $subject;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-2" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-3" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-4" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-5" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-6" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-7" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-8" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-9" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-10" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-11" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-12" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-13" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-14" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-15" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-16" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-17" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-18" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-19" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-20" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-21" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-22" class="line-number-anchor" /><a href="#line-number-ca71a7f2abfcd9113b3ca0ab4b40e617bfb26b96-22">22</a></td></tr></table></div></code></pre>
<p>An InvoiceSubjectInterface</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d4bf189e3190c92f70b76da463b734bc49c24b2b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d4bf189e3190c92f70b76da463b734bc49c24b2b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-1" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Acme/InvoiceModule/Model/InvoiceSubjectInterface.php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">InvoiceModule</span>\<span class="hljs-title">Model</span>;

<span class="hljs-comment">/**
 * An interface that the invoice Subject object should implement.
 * In most circumstances, only a single object should implement
 * this interface as the ResolveTargetEntityListener can only
 * change the target to a single object.
 */</span>
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">InvoiceSubjectInterface</span>
</span>{
    <span class="hljs-comment">// List any additional methods that your InvoiceModule</span>
    <span class="hljs-comment">// will need to access on the subject so that you can</span>
    <span class="hljs-comment">// be sure that you have access to those methods.</span>

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@return</span> string
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span></span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-2" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-3" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-4" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-5" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-6" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-7" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-8" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-9" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-10" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-11" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-12" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-13" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-14" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-15" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-16" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-17" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-18" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-19" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-20" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-21" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-22" class="line-number-anchor" /><a href="#line-number-d4bf189e3190c92f70b76da463b734bc49c24b2b-22">22</a></td></tr></table></div></code></pre>
<p>Next, we need to configure the listener. Add this to the area you set up Doctrine. You
must set this up in the way outlined below, otherwise you can not be guaranteed that
the targetEntity resolution will occur reliably:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="70f1a90f33222c4b3290d21daf4b63d61cbdb3a2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="70f1a90f33222c4b3290d21daf4b63d61cbdb3a2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-1" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">&lt;?php</span>
$evm  = <span class="hljs-keyword">new</span> \Doctrine\Common\EventManager;
$rtel = <span class="hljs-keyword">new</span> \Doctrine\ORM\Tools\ResolveTargetEntityListener;

<span class="hljs-comment">// Adds a target-entity class</span>
$rtel-&gt;addResolveTargetEntity(<span class="hljs-string">'Acme\\InvoiceModule\\Model\\InvoiceSubjectInterface'</span>, <span class="hljs-string">'Acme\\CustomerModule\\Entity\\Customer'</span>, <span class="hljs-keyword">array</span>());

<span class="hljs-comment">// Add the ResolveTargetEntityListener</span>
$evm-&gt;addEventListener(Doctrine\ORM\Events::loadClassMetadata, $rtel);

$em = \Doctrine\ORM\EntityManager::create($connectionOptions, $config, $evm);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-2" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-3" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-4" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-5" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-6" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-7" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-8" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-9" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-10" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-11" class="line-number-anchor" /><a href="#line-number-70f1a90f33222c4b3290d21daf4b63d61cbdb3a2-11">11</a></td></tr></table></div></code></pre>
<a class="section-anchor" id="final-thoughts" name="final-thoughts"></a><h2 class="section-header"><a href="#final-thoughts">Final Thoughts<i class="fas fa-link"></i></a></h2>
<p>With the <code>ResolveTargetEntityListener</code>, we are able to decouple our
bundles, keeping them usable by themselves, but still being able to
define relationships between different objects. By using this method,
I've found my bundles end up being easier to maintain independently.</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?3aa944"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'orm';
            var versionSlug = '2.6';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search ORM 2.6'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
