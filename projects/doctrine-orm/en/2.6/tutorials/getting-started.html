<!DOCTYPE html>
<html>
    <head>
        <title>Getting Started with Doctrine - Object Relational Mapper (ORM) - Doctrine</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Object Relational Mapper Documentation: Getting Started with Doctrine ">

        <meta name="keywords" content="php,orm,mysql,object,data,mapper,mapping,query,dql,documentation,getting,started,with,doctrine">

                    <meta name="robots" content="noindex">
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/getting-started.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?176a03"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/getting-started.html" />
        <meta property="og:title" content="Getting Started with Doctrine - Object Relational Mapper (ORM) - Doctrine" />
        <meta property="og:description" content="Doctrine Object Relational Mapper Documentation: Getting Started with Doctrine " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Object Relational Mapper",
            "description": "Getting Started with Doctrine",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?6c0dab" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/community/index.html">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                       <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/team/maintainers.html" id="navbarTeamDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Team</a>

                            <div class="dropdown-menu" aria-labelledby="navbarTeamDropdown">
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                            </div>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/orm/edit/2.6/docs/en/tutorials/getting-started.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        
<div class="toc"><ul><li id="composite-primary-keys-html-composite-and-foreign-keys-as-primary-key" class="toc-item"><a href="composite-primary-keys.html#composite-and-foreign-keys-as-primary-key">Composite and Foreign Keys as Primary Key</a></li><ul><li id="composite-primary-keys-html-general-considerations" class="toc-item"><a href="composite-primary-keys.html#general-considerations">General Considerations</a></li><li id="composite-primary-keys-html-primitive-types-only" class="toc-item"><a href="composite-primary-keys.html#primitive-types-only">Primitive Types only</a></li><li id="composite-primary-keys-html-identity-through-foreign-entities" class="toc-item"><a href="composite-primary-keys.html#identity-through-foreign-entities">Identity through foreign Entities</a></li><li id="composite-primary-keys-html-use-case-1-dynamic-attributes" class="toc-item"><a href="composite-primary-keys.html#use-case-1-dynamic-attributes">Use-Case 1: Dynamic Attributes</a></li><li id="composite-primary-keys-html-use-case-2-simple-derived-identity" class="toc-item"><a href="composite-primary-keys.html#use-case-2-simple-derived-identity">Use-Case 2: Simple Derived Identity</a></li><li id="composite-primary-keys-html-use-case-3-join-table-with-metadata" class="toc-item"><a href="composite-primary-keys.html#use-case-3-join-table-with-metadata">Use-Case 3: Join-Table with Metadata</a></li><li id="composite-primary-keys-html-performance-considerations" class="toc-item"><a href="composite-primary-keys.html#performance-considerations">Performance Considerations</a></li></ul><li id="embeddables-html-separating-concerns-using-embeddables" class="toc-item"><a href="embeddables.html#separating-concerns-using-embeddables">Separating Concerns using Embeddables</a></li><li id="embeddables-html-initializing-embeddables" class="toc-item"><a href="embeddables.html#initializing-embeddables">Initializing embeddables</a></li><li id="embeddables-html-column-prefixing" class="toc-item"><a href="embeddables.html#column-prefixing">Column Prefixing</a></li><li id="embeddables-html-dql" class="toc-item"><a href="embeddables.html#dql">DQL</a></li><li id="extra-lazy-associations-html-extra-lazy-associations" class="toc-item"><a href="extra-lazy-associations.html#extra-lazy-associations">Extra Lazy Associations</a></li><ul><li id="extra-lazy-associations-html-enabling-extra-lazy-associations" class="toc-item"><a href="extra-lazy-associations.html#enabling-extra-lazy-associations">Enabling Extra-Lazy Associations</a></li></ul><li id="getting-started-database-html-getting-started-database-first" class="toc-item"><a href="getting-started-database.html#getting-started-database-first">Getting Started: Database First</a></li><li id="getting-started-models-html-getting-started-model-first" class="toc-item"><a href="getting-started-models.html#getting-started-model-first">Getting Started: Model First</a></li><li id="getting-started-html-getting-started-with-doctrine" class="toc-item"><a href="getting-started.html#getting-started-with-doctrine">Getting Started with Doctrine</a></li><ul><li id="getting-started-html-guide-assumptions" class="toc-item"><a href="getting-started.html#guide-assumptions">Guide Assumptions</a></li><li id="getting-started-html-what-is-doctrine" class="toc-item"><a href="getting-started.html#what-is-doctrine">What is Doctrine?</a></li><ul><li id="getting-started-html-what-are-entities" class="toc-item"><a href="getting-started.html#what-are-entities">What are Entities?</a></li></ul><li id="getting-started-html-an-example-model-bug-tracker" class="toc-item"><a href="getting-started.html#an-example-model-bug-tracker">An Example Model: Bug Tracker</a></li><li id="getting-started-html-project-setup" class="toc-item"><a href="getting-started.html#project-setup">Project Setup</a></li><li id="getting-started-html-obtaining-the-entitymanager" class="toc-item"><a href="getting-started.html#obtaining-the-entitymanager">Obtaining the EntityManager</a></li><li id="getting-started-html-generating-the-database-schema" class="toc-item"><a href="getting-started.html#generating-the-database-schema">Generating the Database Schema</a></li><li id="getting-started-html-starting-with-the-product-entity" class="toc-item"><a href="getting-started.html#starting-with-the-product-entity">Starting with the Product Entity</a></li><li id="getting-started-html-adding-bug-and-user-entities" class="toc-item"><a href="getting-started.html#adding-bug-and-user-entities">Adding Bug and User Entities</a></li><li id="getting-started-html-implementing-more-requirements" class="toc-item"><a href="getting-started.html#implementing-more-requirements">Implementing more Requirements</a></li><li id="getting-started-html-queries-for-application-use-cases" class="toc-item"><a href="getting-started.html#queries-for-application-use-cases">Queries for Application Use-Cases</a></li><ul><li id="getting-started-html-list-of-bugs" class="toc-item"><a href="getting-started.html#list-of-bugs">List of Bugs</a></li><li id="getting-started-html-array-hydration-of-the-bug-list" class="toc-item"><a href="getting-started.html#array-hydration-of-the-bug-list">Array Hydration of the Bug List</a></li><li id="getting-started-html-find-by-primary-key" class="toc-item"><a href="getting-started.html#find-by-primary-key">Find by Primary Key</a></li></ul><li id="getting-started-html-dashboard-of-the-user" class="toc-item"><a href="getting-started.html#dashboard-of-the-user">Dashboard of the User</a></li><li id="getting-started-html-number-of-bugs" class="toc-item"><a href="getting-started.html#number-of-bugs">Number of Bugs</a></li><li id="getting-started-html-updating-entities" class="toc-item"><a href="getting-started.html#updating-entities">Updating Entities</a></li><li id="getting-started-html-entity-repositories" class="toc-item"><a href="getting-started.html#entity-repositories">Entity Repositories</a></li><li id="getting-started-html-conclusion" class="toc-item"><a href="getting-started.html#conclusion">Conclusion</a></li></ul><li id="ordered-associations-html-ordering-to-many-associations" class="toc-item"><a href="ordered-associations.html#ordering-to-many-associations">Ordering To-Many Associations</a></li><li id="override-field-association-mappings-in-subclasses-html-override-field-association-mappings-in-subclasses" class="toc-item"><a href="override-field-association-mappings-in-subclasses.html#override-field-association-mappings-in-subclasses">Override Field Association Mappings In Subclasses</a></li><li id="pagination-html-pagination" class="toc-item"><a href="pagination.html#pagination">Pagination</a></li><li id="working-with-indexed-associations-html-working-with-indexed-associations" class="toc-item"><a href="working-with-indexed-associations.html#working-with-indexed-associations">Working with Indexed Associations</a></li><ul><li id="working-with-indexed-associations-html-mapping-indexed-associations" class="toc-item"><a href="working-with-indexed-associations.html#mapping-indexed-associations">Mapping Indexed Associations</a></li><li id="working-with-indexed-associations-html-querying-indexed-associations" class="toc-item"><a href="working-with-indexed-associations.html#querying-indexed-associations">Querying indexed associations</a></li><li id="working-with-indexed-associations-html-outlook-into-the-future" class="toc-item"><a href="working-with-indexed-associations.html#outlook-into-the-future">Outlook into the Future</a></li></ul></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/orm.html">ORM</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.6/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Getting Started with Doctrine</li>
                            </ol>
                        </nav>
                                    </div>

                

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-orm/en/2.6/tutorials/getting-started.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.6
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/latest/tutorials/getting-started.html">
                                                    3.0

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.7/tutorials/getting-started.html">
                                                    2.7

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-orm/en/2.6/tutorials/getting-started.html">
                                                    2.6

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-orm/en/2.5/tutorials/getting-started.html">2.5</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-orm/en/2.4/tutorials/getting-started.html">2.4</a>
                                                                                                                        </div>
                                </div>
                            
                            
<p></p>
<a class="section-anchor" id="getting-started-with-doctrine" name="getting-started-with-doctrine"></a><h1 class="section-header"><a href="#getting-started-with-doctrine">Getting Started with Doctrine<i class="fas fa-link"></i></a></h1>
<p>This guide covers getting started with the Doctrine ORM. After working
through the guide you should know:</p>
<ul><li class="dash">How to install and configure Doctrine by connecting it to a database</li>
<li class="dash">Mapping PHP objects to database tables</li>
<li class="dash">Generating a database schema from PHP objects</li>
<li class="dash">Using the <code>EntityManager</code> to insert, update, delete and find
  objects in the database.</li>
</ul>

<a class="section-anchor" id="guide-assumptions" name="guide-assumptions"></a><h2 class="section-header"><a href="#guide-assumptions">Guide Assumptions<i class="fas fa-link"></i></a></h2>
<p>This guide is designed for beginners that haven't worked with Doctrine ORM
before. There are some prerequisites for the tutorial that have to be
installed:</p>
<ul><li class="dash">PHP (latest stable version)</li>
<li class="dash">Composer Package Manager (<a href="http://getcomposer.org/doc/00-intro.md">Install Composer
 </a>)</li>
</ul>

<p>The code of this tutorial is <a href="https://github.com/doctrine/doctrine2-orm-tutorial">available on Github</a>.</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>This tutorial assumes you work with <strong>Doctrine 2.6</strong> and above.
Some of the code will not work with lower versions.</p>
</td></tr></table></div>
<a class="section-anchor" id="what-is-doctrine" name="what-is-doctrine"></a><h2 class="section-header"><a href="#what-is-doctrine">What is Doctrine?<i class="fas fa-link"></i></a></h2>
<p>Doctrine 2 is an <a href="#object-relational-mapper-orm-http-en-wikipedia-org-wiki-object-relational-mapping">object-relational mapper (ORM)
&lt;http://en.wikipedia.org/wiki/Object-relational_mapping&gt;</a> for PHP 5.4+ that
provides transparent persistence for PHP objects. It uses the Data Mapper
pattern at the heart, aiming for a complete separation of your domain/business
logic from the persistence in a relational database management system.</p>
<p>The benefit of Doctrine for the programmer is the ability to focus
on the object-oriented business logic and worry about persistence only
as a secondary problem. This doesn't mean persistence is downplayed by Doctrine
2, however it is our belief that there are considerable benefits for
object-oriented programming if persistence and entities are kept
separated.</p>
<a class="section-anchor" id="what-are-entities" name="what-are-entities"></a><h3 class="section-header"><a href="#what-are-entities">What are Entities?<i class="fas fa-link"></i></a></h3>
<p>Entities are PHP Objects that can be identified over many requests
by a unique identifier or primary key. These classes don't need to extend any
abstract base class or interface. An entity class must not be final
or contain final methods. Additionally it must not implement
<strong>clone</strong> nor <strong>wakeup</strong>, unless it <a href="../cookbook/implementing-wakeup-or-clone.html">does so safely</a>.</p>
<p>An entity contains persistable properties. A persistable property
is an instance variable of the entity that is saved into and retrieved from the database
by Doctrine's data mapping capabilities.</p>
<a class="section-anchor" id="an-example-model-bug-tracker" name="an-example-model-bug-tracker"></a><h2 class="section-header"><a href="#an-example-model-bug-tracker">An Example Model: Bug Tracker<i class="fas fa-link"></i></a></h2>
<p>For this Getting Started Guide for Doctrine we will implement the
Bug Tracker domain model from the
<a href="http://framework.zend.com/manual/1.12/en/zend.db.adapter.html">Zend\_Db\_Table</a>
documentation. Reading their documentation we can extract the
requirements:</p>
<ul><li class="dash"> A Bug has a description, creation date, status, reporter and
   engineer</li>
<li class="dash"> A Bug can occur on different Products (platforms)</li>
<li class="dash"> A Product has a name.</li>
<li class="dash"> Bug reporters and engineers are both Users of the system.</li>
<li class="dash"> A User can create new Bugs.</li>
<li class="dash"> The assigned engineer can close a Bug.</li>
<li class="dash"> A User can see all his reported or assigned Bugs.</li>
<li class="dash"> Bugs can be paginated through a list-view.</li>
</ul>

<a class="section-anchor" id="project-setup" name="project-setup"></a><h2 class="section-header"><a href="#project-setup">Project Setup<i class="fas fa-link"></i></a></h2>
<p>Create a new empty folder for this tutorial project, for example
<code>doctrine2-tutorial</code> and create a new file <code>composer.json</code> inside
that directory with the following contents:</p>
<div class="console"><pre><code class="console">{
    "require": {
        "doctrine/orm": "^2.6.2",
        "symfony/yaml": "2.*"
    },
    "autoload": {
        "psr-0": {"": "src/"}
    }
}</code></pre></div>
<p>Install Doctrine using the Composer Dependency Management tool, by calling:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer install</code></pre></div>
<p>This will install the packages Doctrine Common, Doctrine DBAL, Doctrine ORM,
into the <code>vendor</code> directory.</p>
<p>Add the following directories:</p>
<div class="console"><pre><code class="console">doctrine2-tutorial
|-- config
|   `-- xml
|   `-- yaml
`-- src</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The YAML driver is deprecated and will be removed in version 3.0.
It is strongly recommended to switch to one of the other mappings.</p>
</td></tr></table></div>
<a class="section-anchor" id="obtaining-the-entitymanager" name="obtaining-the-entitymanager"></a><h2 class="section-header"><a href="#obtaining-the-entitymanager">Obtaining the EntityManager<i class="fas fa-link"></i></a></h2>
<p>Doctrine's public interface is through the <code>EntityManager</code>. This class
provides access points to the complete lifecycle management for your entities,
and transforms entities from and back to persistence. You have to
configure and create it to use your entities with Doctrine 2. I
will show the configuration steps and then discuss them step by
step:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="bafc1b9092783eb6d544808abc40a88fd3513e36"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="bafc1b9092783eb6d544808abc40a88fd3513e36"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-1" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// bootstrap.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Tools</span>\<span class="hljs-title">Setup</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">EntityManager</span>;

<span class="hljs-keyword">require_once</span> <span class="hljs-string">"vendor/autoload.php"</span>;

<span class="hljs-comment">// Create a simple "default" Doctrine ORM configuration for Annotations</span>
$isDevMode = <span class="hljs-keyword">true</span>;
$config = Setup::createAnnotationMetadataConfiguration(<span class="hljs-keyword">array</span>(<span class="hljs-keyword">__DIR__</span>.<span class="hljs-string">"/src"</span>), $isDevMode);
<span class="hljs-comment">// or if you prefer yaml or XML</span>
<span class="hljs-comment">//$config = Setup::createXMLMetadataConfiguration(array(__DIR__."/config/xml"), $isDevMode);</span>
<span class="hljs-comment">//$config = Setup::createYAMLMetadataConfiguration(array(__DIR__."/config/yaml"), $isDevMode);</span>

<span class="hljs-comment">// database configuration parameters</span>
$conn = <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'driver'</span> =&gt; <span class="hljs-string">'pdo_sqlite'</span>,
    <span class="hljs-string">'path'</span> =&gt; <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/db.sqlite'</span>,
);

<span class="hljs-comment">// obtaining the entity manager</span>
$entityManager = EntityManager::create($conn, $config);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-2" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-3" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-4" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-5" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-6" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-7" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-8" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-9" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-10" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-11" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-12" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-13" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-14" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-15" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-16" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-17" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-18" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-19" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-20" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-21" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-22" class="line-number-anchor" /><a href="#line-number-bafc1b9092783eb6d544808abc40a88fd3513e36-22">22</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The YAML driver is deprecated and will be removed in version 3.0.
It is strongly recommended to switch to one of the other mappings.</p>
</td></tr></table></div>
<p>The <code>require_once</code> statement sets up the class autoloading for Doctrine and
its dependencies using Composer's autoloader.</p>
<p>The second block consists of the instantiation of the ORM
<code>Configuration</code> object using the Setup helper. It assumes a bunch
of defaults that you don't have to bother about for now. You can
read up on the configuration details in the
<a href="../reference/configuration.html">reference chapter on configuration</a>.</p>
<p>The third block shows the configuration options required to connect to
a database. In this case, we'll use a file-based SQLite database. All the
configuration options for all the shipped drivers are given in the
<a href="http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/">DBAL Configuration section of the manual</a>.</p>
<p>The last block shows how the <code>EntityManager</code> is obtained from a
factory method.</p>
<a class="section-anchor" id="generating-the-database-schema" name="generating-the-database-schema"></a><h2 class="section-header"><a href="#generating-the-database-schema">Generating the Database Schema<i class="fas fa-link"></i></a></h2>
<p>Doctrine has a command-line interface that allows you to access the SchemaTool,
a component that can generate a relational database schema based entirely on the
defined entity classes and their metadata. For this tool to work, a
<code>cli-config.php</code> file must exist in the project root directory:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="da7cbfb681faad69925b8674469c9de87e64e002"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="da7cbfb681faad69925b8674469c9de87e64e002"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-da7cbfb681faad69925b8674469c9de87e64e002-1" class="line-number-anchor" /><a href="#line-number-da7cbfb681faad69925b8674469c9de87e64e002-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// cli-config.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

<span class="hljs-keyword">return</span> \Doctrine\ORM\Tools\Console\ConsoleRunner::createHelperSet($entityManager);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-da7cbfb681faad69925b8674469c9de87e64e002-2" class="line-number-anchor" /><a href="#line-number-da7cbfb681faad69925b8674469c9de87e64e002-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-da7cbfb681faad69925b8674469c9de87e64e002-3" class="line-number-anchor" /><a href="#line-number-da7cbfb681faad69925b8674469c9de87e64e002-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-da7cbfb681faad69925b8674469c9de87e64e002-4" class="line-number-anchor" /><a href="#line-number-da7cbfb681faad69925b8674469c9de87e64e002-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-da7cbfb681faad69925b8674469c9de87e64e002-5" class="line-number-anchor" /><a href="#line-number-da7cbfb681faad69925b8674469c9de87e64e002-5">5</a></td></tr></table></div></code></pre>
<p>Now call the Doctrine command-line tool:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>vendor/bin/doctrine orm:schema-tool:create</code></pre></div>
<p>Since we haven't added any entity metadata in <code>src</code> yet, you'll see a message
stating &quot;No Metadata Classes to process.&quot; In the next section, we'll create a
Product entity along with the corresponding metadata, and run this command again.</p>
<p>Note that as you modify your entities' metadata during the development process,
you'll need to update your database schema to stay in sync with the metadata.
You can easily recreate the database using the following commands:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>vendor/bin/doctrine orm:schema-tool:drop --force
<span class="noselect">$ </span>vendor/bin/doctrine orm:schema-tool:create</code></pre></div>
<p>Or you can use the update functionality:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>vendor/bin/doctrine orm:schema-tool:update --force</code></pre></div>
<p>The updating of databases uses a diff algorithm for a given
database schema. This is a cornerstone of the <code>Doctrine\DBAL</code> package,
which can even be used without the Doctrine ORM package.</p>
<a class="section-anchor" id="starting-with-the-product-entity" name="starting-with-the-product-entity"></a><h2 class="section-header"><a href="#starting-with-the-product-entity">Starting with the Product Entity<i class="fas fa-link"></i></a></h2>
<p>We start with the simplest entity, the Product. Create a <code>src/Product.php</code> file to contain the <code>Product</code>
entity definition:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b2a361833634b9b76a9b4155e66e54f0224b1fa2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b2a361833634b9b76a9b4155e66e54f0224b1fa2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-1" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-1">1</a></td><td class="code-line" rowspan="28"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Product.php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> int
     */</span>
    <span class="hljs-keyword">protected</span> $id;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> string
     */</span>
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span><span class="hljs-params">($name)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;name = $name;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-2" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-3" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-4" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-5" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-6" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-7" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-8" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-9" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-10" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-11" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-12" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-13" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-14" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-15" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-16" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-17" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-18" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-19" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-20" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-21" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-22" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-23" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-24" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-25" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-26" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-27" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-28" class="line-number-anchor" /><a href="#line-number-b2a361833634b9b76a9b4155e66e54f0224b1fa2-28">28</a></td></tr></table></div></code></pre>
<p>When creating entity classes, all of the fields should be <code>protected</code> or <code>private</code>
(not <code>public</code>), with getter and setter methods for each one (except <code>$id</code>).
The use of mutators allows Doctrine to hook into calls which
manipulate the entities in ways that it could not if you just
directly set the values with <code>entity#field = foo;</code></p>
<p>The id field has no setter since, generally speaking, your code
should not set this value since it represents a database id value.
(Note that Doctrine itself can still set the value using the
Reflection API instead of a defined setter function.)</p>
<p>The next step for persistence with Doctrine is to describe the
structure of the <code>Product</code> entity to Doctrine using a metadata
language. The metadata language describes how entities, their
properties and references should be persisted and what constraints
should be applied to them.</p>
<p>Metadata for an Entity can be configured using DocBlock annotations directly
in the Entity class itself, or in an external XML or YAML file. This Getting
Started guide will demonstrate metadata mappings using all three methods,
but you only need to choose one.</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="0c5c83ba85d89d86c897ba08a01b406077852d19"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="0c5c83ba85d89d86c897ba08a01b406077852d19"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-1" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Product.php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span> <span class="hljs-doctag">@Table</span>(name="products")
 **/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@Column</span>(type="integer") <span class="hljs-doctag">@GeneratedValue</span> **/</span>
    <span class="hljs-keyword">protected</span> $id;
    <span class="hljs-comment">/** <span class="hljs-doctag">@Column</span>(type="string") **/</span>
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-comment">// .. (other code)</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-2" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-3" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-4" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-5" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-6" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-7" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-8" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-9" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-10" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-11" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-12" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-13" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-14" class="line-number-anchor" /><a href="#line-number-0c5c83ba85d89d86c897ba08a01b406077852d19-14">14</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="89937f7650184e11e44d1b365a29aea536c19bb5"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="89937f7650184e11e44d1b365a29aea536c19bb5"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-1" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-comment">&lt;!-- config/xml/Product.dcm.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping
                          https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd"</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">entity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Product"</span> <span class="hljs-attr">table</span>=<span class="hljs-string">"products"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"integer"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">generator</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"AUTO"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>

          <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">entity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-2" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-3" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-4" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-5" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-6" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-7" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-8" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-9" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-10" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-11" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-12" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-13" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-89937f7650184e11e44d1b365a29aea536c19bb5-14" class="line-number-anchor" /><a href="#line-number-89937f7650184e11e44d1b365a29aea536c19bb5-14">14</a></td></tr></table></div></code></pre></div></li></ul></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The YAML driver is deprecated and will be removed in version 3.0.
It is strongly recommended to switch to one of the other mappings.</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ee6aa2b406d9b4141d5a45300f9677bddd667c40"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ee6aa2b406d9b4141d5a45300f9677bddd667c40"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-1" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-comment"># config/yaml/Product.dcm.yml</span>
<span class="hljs-attr">Product:</span>
<span class="hljs-attr">  type:</span> <span class="hljs-string">entity</span>
<span class="hljs-attr">  table:</span> <span class="hljs-string">products</span>
<span class="hljs-attr">  id:</span>
<span class="hljs-attr">    id:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">integer</span>
<span class="hljs-attr">      generator:</span>
<span class="hljs-attr">        strategy:</span> <span class="hljs-string">AUTO</span>
<span class="hljs-attr">  fields:</span>
<span class="hljs-attr">    name:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">string</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-2" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-3" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-4" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-5" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-6" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-7" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-8" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-9" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-10" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-11" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-12" class="line-number-anchor" /><a href="#line-number-ee6aa2b406d9b4141d5a45300f9677bddd667c40-12">12</a></td></tr></table></div></code></pre>
</td></tr></table></div>
<p>The top-level <code>entity</code> definition specifies information about
the class and table name. The primitive type <code>Product#name</code> is
defined as a <code>field</code> attribute. The <code>id</code> property is defined with
the <code>id</code> tag.  It has a <code>generator</code> tag nested inside, which
specifies that the primary key generation mechanism should automatically
use the database platform's native id generation strategy (for
example, AUTO INCREMENT in the case of MySql, or Sequences in the
case of PostgreSql and Oracle).</p>
<p>Now that we have defined our first entity and its metadata,
let's update the database schema:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>vendor/bin/doctrine orm:schema-tool:update --force --dump-sql</code></pre></div>
<p>Specifying both flags <code>--force</code> and <code>--dump-sql</code> will cause the DDL
statements to be executed and then printed to the screen.</p>
<p>Now, we'll create a new script to insert products into the database:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b5be97232c4ddb958a1d4e0e1952c4fb66af0296"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b5be97232c4ddb958a1d4e0e1952c4fb66af0296"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-1" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// create_product.php &lt;name&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$newProductName = $argv[<span class="hljs-number">1</span>];

$product = <span class="hljs-keyword">new</span> Product();
$product-&gt;setName($newProductName);

$entityManager-&gt;persist($product);
$entityManager-&gt;flush();

<span class="hljs-keyword">echo</span> <span class="hljs-string">"Created Product with ID "</span> . $product-&gt;getId() . <span class="hljs-string">"\n"</span>;</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-2" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-3" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-4" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-5" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-6" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-7" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-8" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-9" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-10" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-11" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-12" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-13" class="line-number-anchor" /><a href="#line-number-b5be97232c4ddb958a1d4e0e1952c4fb66af0296-13">13</a></td></tr></table></div></code></pre>
<p>Call this script from the command-line to see how new products are created:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php create_product.php ORM
<span class="noselect">$ </span>php create_product.php DBAL</code></pre></div>
<p>What is happening here? Using the <code>Product</code> class is pretty standard OOP.
The interesting bits are the use of the <code>EntityManager</code> service. To
notify the EntityManager that a new entity should be inserted into the database,
you have to call <code>persist()</code>. To initiate a transaction to actually <em>perform</em>
the insertion, you have to explicitly call <code>flush()</code> on the <code>EntityManager</code>.</p>
<p>This distinction between persist and flush is what allows the aggregation of
all database writes (INSERT, UPDATE, DELETE) into one single transaction, which
is executed when <code>flush()</code> is called. Using this approach, the write-performance
is significantly better than in a scenario in which writes are performed on
each entity in isolation.</p>
<p>Next, we'll fetch a list of all the Products in the database. Let's create a
new script for this:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="7350b7f5fc99224764363f04357f7143f3cd5a89"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="7350b7f5fc99224764363f04357f7143f3cd5a89"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-1" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// list_products.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$productRepository = $entityManager-&gt;getRepository(<span class="hljs-string">'Product'</span>);
$products = $productRepository-&gt;findAll();

<span class="hljs-keyword">foreach</span> ($products <span class="hljs-keyword">as</span> $product) {
    <span class="hljs-keyword">echo</span> sprintf(<span class="hljs-string">"-%s\n"</span>, $product-&gt;getName());
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-2" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-3" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-4" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-5" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-6" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-7" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-8" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-9" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-10" class="line-number-anchor" /><a href="#line-number-7350b7f5fc99224764363f04357f7143f3cd5a89-10">10</a></td></tr></table></div></code></pre>
<p>The <code>EntityManager#getRepository()</code> method can create a finder object (called
a repository) for every type of entity. It is provided by Doctrine and contains
some finder methods like <code>findAll()</code>.</p>
<p>Let's continue by creating a script to display the name of a product based on its ID:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="3e9150d7f488942a4a9ad2be3ab9b15338c405a1"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="3e9150d7f488942a4a9ad2be3ab9b15338c405a1"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-1" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// show_product.php &lt;id&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$id = $argv[<span class="hljs-number">1</span>];
$product = $entityManager-&gt;find(<span class="hljs-string">'Product'</span>, $id);

<span class="hljs-keyword">if</span> ($product === <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"No product found.\n"</span>;
    <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-keyword">echo</span> sprintf(<span class="hljs-string">"-%s\n"</span>, $product-&gt;getName());</td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-2" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-3" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-4" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-5" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-6" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-7" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-8" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-9" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-10" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-11" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-12" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-13" class="line-number-anchor" /><a href="#line-number-3e9150d7f488942a4a9ad2be3ab9b15338c405a1-13">13</a></td></tr></table></div></code></pre>
<p>Next we'll update a product's name, given its id. This simple example will
help demonstrate Doctrine's implementation of the UnitOfWork pattern. Doctrine
keeps track of all the entities that were retrieved from the Entity Manager,
and can detect when any of those entities' properties have been modified.
As a result, rather than needing to call <code>persist($entity)</code> for each individual
entity whose properties were changed, a single call to <code>flush()</code> at the end of a
request is sufficient to update the database for all of the modified entities.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e3b85e42876f5b73e20012b3d2847b9b18d59623"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e3b85e42876f5b73e20012b3d2847b9b18d59623"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-1" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// update_product.php &lt;id&gt; &lt;new-name&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$id = $argv[<span class="hljs-number">1</span>];
$newName = $argv[<span class="hljs-number">2</span>];

$product = $entityManager-&gt;find(<span class="hljs-string">'Product'</span>, $id);

<span class="hljs-keyword">if</span> ($product === <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Product $id does not exist.\n"</span>;
    <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>);
}

$product-&gt;setName($newName);

$entityManager-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-2" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-3" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-4" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-5" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-6" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-7" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-8" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-9" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-10" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-11" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-12" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-13" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-14" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-15" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-16" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-17" class="line-number-anchor" /><a href="#line-number-e3b85e42876f5b73e20012b3d2847b9b18d59623-17">17</a></td></tr></table></div></code></pre>
<p>After calling this script on one of the existing products, you can verify the
product name changed by calling the <code>show_product.php</code> script.</p>
<a class="section-anchor" id="adding-bug-and-user-entities" name="adding-bug-and-user-entities"></a><h2 class="section-header"><a href="#adding-bug-and-user-entities">Adding Bug and User Entities<i class="fas fa-link"></i></a></h2>
<p>We continue with the bug tracker example by creating the <code>Bug</code> and <code>User</code>
classes. We'll store them in <code>src/Bug.php</code> and <code>src/User.php</code>, respectively.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b2355de7261e145a6d719166ba4d3566d6eaa1a7"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b2355de7261e145a6d719166ba4d3566d6eaa1a7"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-1" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-1">1</a></td><td class="code-line" rowspan="63"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Bug.php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span>(repositoryClass="BugRepository") <span class="hljs-doctag">@Table</span>(name="bugs")
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@Column</span>(type="integer") <span class="hljs-doctag">@GeneratedValue</span>
     * <span class="hljs-doctag">@var</span> int
     */</span>
    <span class="hljs-keyword">protected</span> $id;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="string")
     * <span class="hljs-doctag">@var</span> string
     */</span>
    <span class="hljs-keyword">protected</span> $description;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="datetime")
     * <span class="hljs-doctag">@var</span> DateTime
     */</span>
    <span class="hljs-keyword">protected</span> $created;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="string")
     * <span class="hljs-doctag">@var</span> string
     */</span>
    <span class="hljs-keyword">protected</span> $status;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDescription</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;description;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDescription</span><span class="hljs-params">($description)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;description = $description;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setCreated</span><span class="hljs-params">(DateTime $created)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;created = $created;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCreated</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;created;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setStatus</span><span class="hljs-params">($status)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;status = $status;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStatus</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;status;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-2" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-3" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-4" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-5" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-6" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-7" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-8" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-9" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-10" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-11" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-12" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-13" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-14" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-15" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-16" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-17" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-18" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-19" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-20" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-21" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-22" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-23" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-24" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-25" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-26" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-27" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-28" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-29" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-30" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-31" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-32" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-33" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-34" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-35" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-36" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-37" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-38" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-39" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-40" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-41" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-42" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-43" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-44" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-44">44</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-45" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-45">45</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-46" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-46">46</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-47" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-47">47</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-48" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-48">48</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-49" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-49">49</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-50" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-50">50</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-51" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-51">51</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-52" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-52">52</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-53" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-53">53</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-54" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-54">54</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-55" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-55">55</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-56" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-56">56</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-57" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-57">57</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-58" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-58">58</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-59" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-59">59</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-60" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-60">60</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-61" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-61">61</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-62" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-62">62</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-63" class="line-number-anchor" /><a href="#line-number-b2355de7261e145a6d719166ba4d3566d6eaa1a7-63">63</a></td></tr></table></div></code></pre>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4822e20dca360d8827fff869859a0602806273a4"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4822e20dca360d8827fff869859a0602806273a4"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-1" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-1">1</a></td><td class="code-line" rowspan="33"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/User.php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span> <span class="hljs-doctag">@Table</span>(name="users")
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@GeneratedValue</span> <span class="hljs-doctag">@Column</span>(type="integer")
     * <span class="hljs-doctag">@var</span> int
     */</span>
    <span class="hljs-keyword">protected</span> $id;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="string")
     * <span class="hljs-doctag">@var</span> string
     */</span>
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span><span class="hljs-params">($name)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;name = $name;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-2" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-3" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-4" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-5" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-6" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-7" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-8" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-9" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-10" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-11" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-12" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-13" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-14" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-15" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-16" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-17" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-18" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-19" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-20" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-21" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-22" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-23" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-24" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-25" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-26" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-27" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-28" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-29" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-30" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-31" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-32" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4822e20dca360d8827fff869859a0602806273a4-33" class="line-number-anchor" /><a href="#line-number-4822e20dca360d8827fff869859a0602806273a4-33">33</a></td></tr></table></div></code></pre>
<p>All of the properties we've seen so far are of simple types (integer, string,
and datetime). But now, we'll add properties that will store objects of
specific <em>entity types</em> in order to model the relationships between different
entities.</p>
<p>At the database level, relationships between entities are represented by foreign
keys. But with Doctrine, you'll never have to (and never should) work with
the foreign keys directly. You should only work with objects that represent
foreign keys through their own identities.</p>
<p>For every foreign key you either have a Doctrine ManyToOne or OneToOne
association. On the inverse sides of these foreign keys you can have
OneToMany associations. Obviously you can have ManyToMany associations
that connect two tables with each other through a join table with<br />two foreign keys.</p>
<p>Now that you know the basics about references in Doctrine, we can extend the
domain model to match the requirements:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d489172872c136eee932e0da955165b4ff889825"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d489172872c136eee932e0da955165b4ff889825"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-1" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Bug.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Collections</span>\<span class="hljs-title">ArrayCollection</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-comment">// ... (previous code)</span>

    <span class="hljs-keyword">protected</span> $products;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;products = <span class="hljs-keyword">new</span> ArrayCollection();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-2" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-3" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-4" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-5" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-6" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-7" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-8" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-9" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-10" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-11" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-12" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-13" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-14" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d489172872c136eee932e0da955165b4ff889825-15" class="line-number-anchor" /><a href="#line-number-d489172872c136eee932e0da955165b4ff889825-15">15</a></td></tr></table></div></code></pre>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="014b94f1d825ad754121e906dc29e7525d4f54ce"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="014b94f1d825ad754121e906dc29e7525d4f54ce"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-1" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/User.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Collections</span>\<span class="hljs-title">ArrayCollection</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ... (previous code)</span>

    <span class="hljs-keyword">protected</span> $reportedBugs;
    <span class="hljs-keyword">protected</span> $assignedBugs;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;reportedBugs = <span class="hljs-keyword">new</span> ArrayCollection();
        <span class="hljs-keyword">$this</span>-&gt;assignedBugs = <span class="hljs-keyword">new</span> ArrayCollection();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-2" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-3" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-4" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-5" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-6" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-7" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-8" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-9" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-10" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-11" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-12" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-13" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-14" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-15" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-16" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-17" class="line-number-anchor" /><a href="#line-number-014b94f1d825ad754121e906dc29e7525d4f54ce-17">17</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Whenever an entity is created from the database, a <code>Collection</code>
implementation of the type <code>PersistentCollection</code> will be injected into
your entity instead of an <code>ArrayCollection</code>. This helps Doctrine ORM
understand the changes that have happened to the collection that are
noteworthy for persistence.</p>
</td></tr></table></div>
<div class="alert warning-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td><td><p>Lazy load proxies always contain an instance of
Doctrine's EntityManager and all its dependencies. Therefore a
var\_dump() will possibly dump a very large recursive structure
which is impossible to render and read. You have to use
<code>Doctrine\Common\Util\Debug::dump()</code> to restrict the dumping to a
human readable level. Additionally you should be aware that dumping
the EntityManager to a Browser may take several minutes, and the
Debug::dump() method just ignores any occurrences of it in Proxy
instances.</p>
</td></tr></table></div>
<p>Because we only work with collections for the references we must be
careful to implement a bidirectional reference in the domain model.
The concept of owning or inverse side of a relation is central to
this notion and should always be kept in mind. The following
assumptions are made about relations and have to be followed to be
able to work with Doctrine 2. These assumptions are not unique to
Doctrine 2 but are best practices in handling database relations
and Object-Relational Mapping.</p>
<ul><li class="dash"> In a one-to-one relation, the entity holding the foreign key of
   the related entity on its own database table is <em>always</em> the owning
   side of the relation.</li>
<li class="dash"> In a many-to-one relation, the Many-side is the owning side by
   default because it holds the foreign key. Accordingly, the One-side
   is the inverse side by default.</li>
<li class="dash"> In a many-to-one relation, the One-side can only be the owning side if
   the relation is implemented as a ManyToMany with a join table, and the
   One-side is restricted to allow only UNIQUE values per database constraint.</li>
<li class="dash"> In a many-to-many relation, both sides can be the owning side of
   the relation. However, in a bi-directional many-to-many relation,
   only one side is allowed to be the owning side.</li>
<li class="dash"> Changes to Collections are saved or updated, when the entity on
   the <em>owning</em> side of the collection is saved or updated.</li>
<li class="dash"> Saving an Entity at the inverse side of a relation never
   triggers a persist operation to changes to the collection.</li>
</ul>

<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Consistency of bi-directional references on the inverse side of a
relation have to be managed in userland application code. Doctrine
cannot magically update your collections to be consistent.</p>
</td></tr></table></div>
<p>In the case of Users and Bugs we have references back and forth to
the assigned and reported bugs from a user, making this relation
bi-directional. We have to change the code to ensure consistency of
the bi-directional reference:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="40a5a79273fd3e3956abe51cde3498f6d81a5493"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="40a5a79273fd3e3956abe51cde3498f6d81a5493"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-1" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-1">1</a></td><td class="code-line" rowspan="31"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Bug.php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-comment">// ... (previous code)</span>

    <span class="hljs-keyword">protected</span> $engineer;
    <span class="hljs-keyword">protected</span> $reporter;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setEngineer</span><span class="hljs-params">(User $engineer)</span>
    </span>{
        $engineer-&gt;assignedToBug(<span class="hljs-keyword">$this</span>);
        <span class="hljs-keyword">$this</span>-&gt;engineer = $engineer;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setReporter</span><span class="hljs-params">(User $reporter)</span>
    </span>{
        $reporter-&gt;addReportedBug(<span class="hljs-keyword">$this</span>);
        <span class="hljs-keyword">$this</span>-&gt;reporter = $reporter;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEngineer</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;engineer;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getReporter</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;reporter;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-2" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-3" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-4" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-5" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-6" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-7" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-8" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-9" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-10" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-11" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-12" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-13" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-14" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-15" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-16" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-17" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-18" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-19" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-20" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-21" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-22" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-23" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-24" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-25" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-26" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-27" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-28" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-29" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-30" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-31" class="line-number-anchor" /><a href="#line-number-40a5a79273fd3e3956abe51cde3498f6d81a5493-31">31</a></td></tr></table></div></code></pre>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="af14539eae207e7e951b7f66f813b9bc451ab597"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="af14539eae207e7e951b7f66f813b9bc451ab597"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-1" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/User.php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ... (previous code)</span>

    <span class="hljs-keyword">protected</span> $reportedBugs;
    <span class="hljs-keyword">protected</span> $assignedBugs;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addReportedBug</span><span class="hljs-params">(Bug $bug)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;reportedBugs[] = $bug;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assignedToBug</span><span class="hljs-params">(Bug $bug)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;assignedBugs[] = $bug;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-2" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-3" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-4" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-5" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-6" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-7" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-8" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-9" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-10" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-11" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-12" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-13" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-14" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-15" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-16" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-17" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-18" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-af14539eae207e7e951b7f66f813b9bc451ab597-19" class="line-number-anchor" /><a href="#line-number-af14539eae207e7e951b7f66f813b9bc451ab597-19">19</a></td></tr></table></div></code></pre>
<p>I chose to name the inverse methods in past-tense, which should
indicate that the actual assigning has already taken place and the
methods are only used for ensuring consistency of the references.
This approach is my personal preference, you can choose whatever
method to make this work.</p>
<p>You can see from <code>User#addReportedBug()</code> and
<code>User#assignedToBug()</code> that using this method in userland alone
would not add the Bug to the collection of the owning side in
<code>Bug#reporter</code> or <code>Bug#engineer</code>. Using these methods and
calling Doctrine for persistence would not update the Collections'
representation in the database.</p>
<p>Only using <code>Bug#setEngineer()</code> or <code>Bug#setReporter()</code>
correctly saves the relation information.</p>
<p>The <code>Bug#reporter</code> and <code>Bug#engineer</code> properties are
Many-To-One relations, which point to a User. In a normalized
relational model, the foreign key is saved on the Bug's table, hence
in our object-relation model the Bug is at the owning side of the
relation. You should always make sure that the use-cases of your
domain model should drive which side is an inverse or owning one in
your Doctrine mapping. In our example, whenever a new bug is saved
or an engineer is assigned to the bug, we don't want to update the
User to persist the reference, but the Bug. This is the case with
the Bug being at the owning side of the relation.</p>
<p>Bugs reference Products by a uni-directional ManyToMany relation in
the database that points from Bugs to Products.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2f7e9f23c9c7b6ba622825739f80a6f3e85e6370"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2f7e9f23c9c7b6ba622825739f80a6f3e85e6370"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-1" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Bug.php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-comment">// ... (previous code)</span>

    <span class="hljs-keyword">protected</span> $products = <span class="hljs-keyword">null</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assignToProduct</span><span class="hljs-params">(Product $product)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;products[] = $product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProducts</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;products;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-2" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-3" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-4" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-5" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-6" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-7" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-8" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-9" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-10" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-11" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-12" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-13" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-14" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-15" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-16" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-17" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-18" class="line-number-anchor" /><a href="#line-number-2f7e9f23c9c7b6ba622825739f80a6f3e85e6370-18">18</a></td></tr></table></div></code></pre>
<p>We are now finished with the domain model given the requirements.
Lets add metadata mappings for the <code>Bug</code> entity, as we did for
the <code>Product</code> before:</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5cdd364ab67e444420c4f69c057d9f025e9f918b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5cdd364ab67e444420c4f69c057d9f025e9f918b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-1" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-1">1</a></td><td class="code-line" rowspan="41"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Bug.php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span> <span class="hljs-doctag">@Table</span>(name="bugs")
 **/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@Column</span>(type="integer") <span class="hljs-doctag">@GeneratedValue</span>
     **/</span>
    <span class="hljs-keyword">protected</span> $id;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="string")
     **/</span>
    <span class="hljs-keyword">protected</span> $description;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="datetime")
     **/</span>
    <span class="hljs-keyword">protected</span> $created;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="string")
     **/</span>
    <span class="hljs-keyword">protected</span> $status;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@ManyToOne</span>(targetEntity="User", inversedBy="assignedBugs")
     **/</span>
    <span class="hljs-keyword">protected</span> $engineer;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@ManyToOne</span>(targetEntity="User", inversedBy="reportedBugs")
     **/</span>
    <span class="hljs-keyword">protected</span> $reporter;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@ManyToMany</span>(targetEntity="Product")
     **/</span>
    <span class="hljs-keyword">protected</span> $products;

    <span class="hljs-comment">// ... (other code)</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-2" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-3" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-4" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-5" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-6" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-7" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-8" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-9" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-10" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-11" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-12" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-13" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-14" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-15" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-16" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-17" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-18" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-19" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-20" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-21" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-22" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-23" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-24" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-25" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-26" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-27" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-28" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-29" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-30" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-31" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-32" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-33" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-34" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-35" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-36" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-37" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-38" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-39" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-40" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-41" class="line-number-anchor" /><a href="#line-number-5cdd364ab67e444420c4f69c057d9f025e9f918b-41">41</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="6e5d73e0484a4af5b7e8b1209a2be608956872a6"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="6e5d73e0484a4af5b7e8b1209a2be608956872a6"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-1" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-1">1</a></td><td class="code-line" rowspan="21"><span class="hljs-comment">&lt;!-- config/xml/Bug.dcm.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping
                          https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">entity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Bug"</span> <span class="hljs-attr">table</span>=<span class="hljs-string">"bugs"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"integer"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">generator</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"AUTO"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"created"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"datetime"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"status"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">many-to-one</span> <span class="hljs-attr">target-entity</span>=<span class="hljs-string">"User"</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"reporter"</span> <span class="hljs-attr">inversed-by</span>=<span class="hljs-string">"reportedBugs"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">many-to-one</span> <span class="hljs-attr">target-entity</span>=<span class="hljs-string">"User"</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"engineer"</span> <span class="hljs-attr">inversed-by</span>=<span class="hljs-string">"assignedBugs"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">many-to-many</span> <span class="hljs-attr">target-entity</span>=<span class="hljs-string">"Product"</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"products"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">entity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-2" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-3" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-4" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-5" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-6" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-7" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-8" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-9" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-10" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-11" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-12" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-13" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-14" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-15" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-16" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-17" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-18" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-19" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-20" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-21" class="line-number-anchor" /><a href="#line-number-6e5d73e0484a4af5b7e8b1209a2be608956872a6-21">21</a></td></tr></table></div></code></pre></div></li></ul></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The YAML driver is deprecated and will be removed in version 3.0.
It is strongly recommended to switch to one of the other mappings.</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d60746364acafea7eaed8d360dad46ff60333648"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d60746364acafea7eaed8d360dad46ff60333648"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-1" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-1">1</a></td><td class="code-line" rowspan="26"><span class="hljs-comment"># config/yaml/Bug.dcm.yml</span>
<span class="hljs-attr">Bug:</span>
<span class="hljs-attr">  type:</span> <span class="hljs-string">entity</span>
<span class="hljs-attr">  table:</span> <span class="hljs-string">bugs</span>
<span class="hljs-attr">  id:</span>
<span class="hljs-attr">    id:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">integer</span>
<span class="hljs-attr">      generator:</span>
<span class="hljs-attr">        strategy:</span> <span class="hljs-string">AUTO</span>
<span class="hljs-attr">  fields:</span>
<span class="hljs-attr">    description:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">text</span>
<span class="hljs-attr">    created:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">datetime</span>
<span class="hljs-attr">    status:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">  manyToOne:</span>
<span class="hljs-attr">    reporter:</span>
<span class="hljs-attr">      targetEntity:</span> <span class="hljs-string">User</span>
<span class="hljs-attr">      inversedBy:</span> <span class="hljs-string">reportedBugs</span>
<span class="hljs-attr">    engineer:</span>
<span class="hljs-attr">      targetEntity:</span> <span class="hljs-string">User</span>
<span class="hljs-attr">      inversedBy:</span> <span class="hljs-string">assignedBugs</span>
<span class="hljs-attr">  manyToMany:</span>
<span class="hljs-attr">    products:</span>
<span class="hljs-attr">      targetEntity:</span> <span class="hljs-string">Product</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-2" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-3" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-4" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-5" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-6" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-7" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-8" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-9" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-10" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-11" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-12" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-13" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-14" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-15" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-16" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-17" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-18" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-19" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-20" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-21" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-22" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-23" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-24" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-25" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d60746364acafea7eaed8d360dad46ff60333648-26" class="line-number-anchor" /><a href="#line-number-d60746364acafea7eaed8d360dad46ff60333648-26">26</a></td></tr></table></div></code></pre>
</td></tr></table></div>
<p>Here we have the entity, id and primitive type definitions.
For the &quot;created&quot; field we have used the <code>datetime</code> type,<br />which translates the YYYY-mm-dd HH:mm:ss database format<br />into a PHP DateTime instance and back.</p>
<p>After the field definitions, the two qualified references to the
user entity are defined. They are created by the <code>many-to-one</code>
tag. The class name of the related entity has to be specified with
the <code>target-entity</code> attribute, which is enough information for
the database mapper to access the foreign-table. Since
<code>reporter</code> and <code>engineer</code> are on the owning side of a
bi-directional relation, we also have to specify the <code>inversed-by</code>
attribute. They have to point to the field names on the inverse
side of the relationship. We will see in the next example that the <code>inversed-by</code>
attribute has a counterpart <code>mapped-by</code> which makes that
the inverse side.</p>
<p>The last definition is for the <code>Bug#products</code> collection. It
holds all products where the specific bug occurs. Again
you have to define the <code>target-entity</code> and <code>field</code> attributes
on the <code>many-to-many</code> tag.</p>
<p>Finally, we'll add metadata mappings for the <code>User</code> entity.</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-1" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-1">1</a></td><td class="code-line" rowspan="33"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/User.php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span> <span class="hljs-doctag">@Table</span>(name="users")
 **/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@GeneratedValue</span> <span class="hljs-doctag">@Column</span>(type="integer")
     * <span class="hljs-doctag">@var</span> int
     **/</span>
    <span class="hljs-keyword">protected</span> $id;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Column</span>(type="string")
     * <span class="hljs-doctag">@var</span> string
     **/</span>
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@OneToMany</span>(targetEntity="Bug", mappedBy="reporter")
     * <span class="hljs-doctag">@var</span> Bug[] An ArrayCollection of Bug objects.
     **/</span>
    <span class="hljs-keyword">protected</span> $reportedBugs = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@OneToMany</span>(targetEntity="Bug", mappedBy="engineer")
     * <span class="hljs-doctag">@var</span> Bug[] An ArrayCollection of Bug objects.
     **/</span>
    <span class="hljs-keyword">protected</span> $assignedBugs = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">// .. (other code)</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-2" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-3" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-4" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-5" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-6" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-7" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-8" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-9" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-10" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-11" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-12" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-13" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-14" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-15" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-16" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-17" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-18" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-19" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-20" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-21" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-22" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-23" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-24" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-25" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-26" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-27" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-28" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-29" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-30" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-31" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-32" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-33" class="line-number-anchor" /><a href="#line-number-d746d1b9fd1b59dcdd0ebefa539b0d5f6c7fa826-33">33</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b7408f05ac4512babea6f58f459fff38146aca3c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b7408f05ac4512babea6f58f459fff38146aca3c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-1" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-comment">&lt;!-- config/xml/User.dcm.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping
                          https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd"</span>&gt;</span>

     <span class="hljs-tag">&lt;<span class="hljs-name">entity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"User"</span> <span class="hljs-attr">table</span>=<span class="hljs-string">"users"</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"integer"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">generator</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"AUTO"</span> /&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>

         <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>

         <span class="hljs-tag">&lt;<span class="hljs-name">one-to-many</span> <span class="hljs-attr">target-entity</span>=<span class="hljs-string">"Bug"</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"reportedBugs"</span> <span class="hljs-attr">mapped-by</span>=<span class="hljs-string">"reporter"</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">one-to-many</span> <span class="hljs-attr">target-entity</span>=<span class="hljs-string">"Bug"</span> <span class="hljs-attr">field</span>=<span class="hljs-string">"assignedBugs"</span> <span class="hljs-attr">mapped-by</span>=<span class="hljs-string">"engineer"</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">entity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-2" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-3" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-4" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-5" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-6" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-7" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-8" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-9" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-10" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-11" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-12" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-13" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-14" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-15" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-16" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b7408f05ac4512babea6f58f459fff38146aca3c-17" class="line-number-anchor" /><a href="#line-number-b7408f05ac4512babea6f58f459fff38146aca3c-17">17</a></td></tr></table></div></code></pre></div></li></ul></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The YAML driver is deprecated and will be removed in version 3.0.
It is strongly recommended to switch to one of the other mappings.</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e58b4f6f8d591444689aa6f25b092a740ab2e5b2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e58b4f6f8d591444689aa6f25b092a740ab2e5b2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-1" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-comment"># config/yaml/User.dcm.yml</span>
<span class="hljs-attr">User:</span>
<span class="hljs-attr">  type:</span> <span class="hljs-string">entity</span>
<span class="hljs-attr">  table:</span> <span class="hljs-string">users</span>
<span class="hljs-attr">  id:</span>
<span class="hljs-attr">    id:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">integer</span>
<span class="hljs-attr">      generator:</span>
<span class="hljs-attr">        strategy:</span> <span class="hljs-string">AUTO</span>
<span class="hljs-attr">  fields:</span>
<span class="hljs-attr">    name:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">  oneToMany:</span>
<span class="hljs-attr">    reportedBugs:</span>
<span class="hljs-attr">      targetEntity:</span> <span class="hljs-string">Bug</span>
<span class="hljs-attr">      mappedBy:</span> <span class="hljs-string">reporter</span>
<span class="hljs-attr">    assignedBugs:</span>
<span class="hljs-attr">      targetEntity:</span> <span class="hljs-string">Bug</span>
<span class="hljs-attr">      mappedBy:</span> <span class="hljs-string">engineer</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-2" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-3" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-4" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-5" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-6" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-7" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-8" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-9" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-10" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-11" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-12" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-13" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-14" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-15" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-16" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-17" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-18" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-19" class="line-number-anchor" /><a href="#line-number-e58b4f6f8d591444689aa6f25b092a740ab2e5b2-19">19</a></td></tr></table></div></code></pre>
</td></tr></table></div>
<p>Here are some new things to mention about the <code>one-to-many</code> tags.
Remember that we discussed about the inverse and owning side. Now
both reportedBugs and assignedBugs are inverse relations, which
means the join details have already been defined on the owning
side. Therefore we only have to specify the property on the Bug
class that holds the owning sides.</p>
<p>Update your database schema by running:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>vendor/bin/doctrine orm:schema-tool:update --force</code></pre></div>
<a class="section-anchor" id="implementing-more-requirements" name="implementing-more-requirements"></a><h2 class="section-header"><a href="#implementing-more-requirements">Implementing more Requirements<i class="fas fa-link"></i></a></h2>
<p>So far, we've seen the most basic features of the metadata definition language.
To explore additional functionality, let's first create new <code>User</code> entities:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-1" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// create_user.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$newUsername = $argv[<span class="hljs-number">1</span>];

$user = <span class="hljs-keyword">new</span> User();
$user-&gt;setName($newUsername);

$entityManager-&gt;persist($user);
$entityManager-&gt;flush();

<span class="hljs-keyword">echo</span> <span class="hljs-string">"Created User with ID "</span> . $user-&gt;getId() . <span class="hljs-string">"\n"</span>;</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-2" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-3" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-4" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-5" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-6" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-7" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-8" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-9" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-10" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-11" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-12" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-13" class="line-number-anchor" /><a href="#line-number-5e54bc3bd9fe68fdc8c85ac7039f2f2c115d605d-13">13</a></td></tr></table></div></code></pre>
<p>Now call:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php create_user.php beberlei</code></pre></div>
<p>We now have the necessary data to create a new Bug entity:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="dd1ef5519515299a9a86d9d9aad723dcf20042da"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="dd1ef5519515299a9a86d9d9aad723dcf20042da"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-1" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-1">1</a></td><td class="code-line" rowspan="32"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// create_bug.php &lt;reporter-id&gt; &lt;engineer-id&gt; &lt;product-ids&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$reporterId = $argv[<span class="hljs-number">1</span>];
$engineerId = $argv[<span class="hljs-number">2</span>];
$productIds = explode(<span class="hljs-string">","</span>, $argv[<span class="hljs-number">3</span>]);

$reporter = $entityManager-&gt;find(<span class="hljs-string">"User"</span>, $reporterId);
$engineer = $entityManager-&gt;find(<span class="hljs-string">"User"</span>, $engineerId);
<span class="hljs-keyword">if</span> (!$reporter || !$engineer) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"No reporter and/or engineer found for the given id(s).\n"</span>;
    <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>);
}

$bug = <span class="hljs-keyword">new</span> Bug();
$bug-&gt;setDescription(<span class="hljs-string">"Something does not work!"</span>);
$bug-&gt;setCreated(<span class="hljs-keyword">new</span> DateTime(<span class="hljs-string">"now"</span>));
$bug-&gt;setStatus(<span class="hljs-string">"OPEN"</span>);

<span class="hljs-keyword">foreach</span> ($productIds <span class="hljs-keyword">as</span> $productId) {
    $product = $entityManager-&gt;find(<span class="hljs-string">"Product"</span>, $productId);
    $bug-&gt;assignToProduct($product);
}

$bug-&gt;setReporter($reporter);
$bug-&gt;setEngineer($engineer);

$entityManager-&gt;persist($bug);
$entityManager-&gt;flush();

<span class="hljs-keyword">echo</span> <span class="hljs-string">"Your new Bug Id: "</span>.$bug-&gt;getId().<span class="hljs-string">"\n"</span>;</td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-2" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-3" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-4" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-5" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-6" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-7" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-8" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-9" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-10" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-11" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-12" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-13" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-14" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-15" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-16" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-17" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-18" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-19" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-20" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-21" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-22" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-23" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-24" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-25" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-26" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-27" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-28" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-29" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-30" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-31" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-32" class="line-number-anchor" /><a href="#line-number-dd1ef5519515299a9a86d9d9aad723dcf20042da-32">32</a></td></tr></table></div></code></pre>
<p>Since we only have one user and product, probably with the ID of 1, we can
call this script as follows:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php create_bug.php 1 1 1
</code></pre></div>
<p>See how simple it is to relate a Bug, Reporter, Engineer and Products?
Also recall that thanks to the UnitOfWork pattern, Doctrine will detect
these relations and update all of the modified entities in the database
automatically when <code>flush()</code> is called.</p>
<a class="section-anchor" id="queries-for-application-use-cases" name="queries-for-application-use-cases"></a><h2 class="section-header"><a href="#queries-for-application-use-cases">Queries for Application Use-Cases<i class="fas fa-link"></i></a></h2>
<a class="section-anchor" id="list-of-bugs" name="list-of-bugs"></a><h3 class="section-header"><a href="#list-of-bugs">List of Bugs<i class="fas fa-link"></i></a></h3>
<p>Using the previous examples we can fill up the database quite a
bit. However, we now need to discuss how to query the underlying
mapper for the required view representations. When opening the
application, bugs can be paginated through a list-view, which is
the first read-only use-case:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-1" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// list_bugs.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$dql = <span class="hljs-string">"SELECT b, e, r FROM Bug b JOIN b.engineer e JOIN b.reporter r ORDER BY b.created DESC"</span>;

$query = $entityManager-&gt;createQuery($dql);
$query-&gt;setMaxResults(<span class="hljs-number">30</span>);
$bugs = $query-&gt;getResult();

<span class="hljs-keyword">foreach</span> ($bugs <span class="hljs-keyword">as</span> $bug) {
    <span class="hljs-keyword">echo</span> $bug-&gt;getDescription().<span class="hljs-string">" - "</span>.$bug-&gt;getCreated()-&gt;format(<span class="hljs-string">'d.m.Y'</span>).<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Reported by: "</span>.$bug-&gt;getReporter()-&gt;getName().<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Assigned to: "</span>.$bug-&gt;getEngineer()-&gt;getName().<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">foreach</span> ($bug-&gt;getProducts() <span class="hljs-keyword">as</span> $product) {
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Platform: "</span>.$product-&gt;getName().<span class="hljs-string">"\n"</span>;
    }
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"\n"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-2" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-3" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-4" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-5" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-6" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-7" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-8" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-9" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-10" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-11" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-12" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-13" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-14" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-15" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-16" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-17" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-18" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-19" class="line-number-anchor" /><a href="#line-number-02e6ba3eda645f6b5eef96fff3d7dffaccb6d58e-19">19</a></td></tr></table></div></code></pre>
<p>The DQL Query in this example fetches the 30 most recent bugs with
their respective engineer and reporter in one single SQL statement.
The console output of this script is then:</p>
<div class="console"><pre><code class="console">Something does not work! - 02.04.2010
    Reported by: beberlei
    Assigned to: beberlei
    Platform: My Product</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p><strong>DQL is not SQL</strong></p>
<p>You may wonder why we start writing SQL at the beginning of this
use-case. Don't we use an ORM to get rid of all the endless
hand-writing of SQL? Doctrine introduces DQL which is best
described as <strong>object-query-language</strong> and is a dialect of
<a href="http://en.wikipedia.org/wiki/Object_Query_Language">OQL</a> and
similar to <a href="http://www.hibernate.org">HQL</a> or
<a href="http://en.wikipedia.org/wiki/Java_Persistence_Query_Language">JPQL</a>.
It does not know the concept of columns and tables, but only those
of Entity-Class and property. Using the Metadata we defined before
it allows for very short distinctive and powerful queries.</p>
<p>An important reason why DQL is favourable to the Query API of most
ORMs is its similarity to SQL. The DQL language allows query
constructs that most ORMs don't: GROUP BY even with HAVING,
Sub-selects, Fetch-Joins of nested classes, mixed results with
entities and scalar data such as COUNT() results and much more.
Using DQL you should seldom come to the point where you want to
throw your ORM into the dumpster, because it doesn't support some
the more powerful SQL concepts.</p>
<p>Instead of handwriting DQL you can use the <code>QueryBuilder</code> retrieved
by calling <code>$entityManager-&gt;createQueryBuilder()</code>. There are more
details about this in the relevant part of the documentation.</p>
<p>As a last resort you can still use Native SQL and a description of the
result set to retrieve entities from the database. DQL boils down to a<br />Native SQL statement and a <code>ResultSetMapping</code> instance itself. Using<br />Native SQL you could even use stored procedures for data retrieval, or<br />make use of advanced non-portable database queries like PostgreSql's<br />recursive queries.</p>
</td></tr></table></div>
<a class="section-anchor" id="array-hydration-of-the-bug-list" name="array-hydration-of-the-bug-list"></a><h3 class="section-header"><a href="#array-hydration-of-the-bug-list">Array Hydration of the Bug List<i class="fas fa-link"></i></a></h3>
<p>In the previous use-case we retrieved the results as their
respective object instances. We are not limited to retrieving
objects only from Doctrine however. For a simple list view like the
previous one we only need read access to our entities and can
switch the hydration from objects to simple PHP arrays instead.</p>
<p>Hydration can be an expensive process so only retrieving what you need can<br />yield considerable performance benefits for read-only requests.</p>
<p>Implementing the same list view as before using array hydration we
can rewrite our code:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f85425157a6879dd8e6c853198c4bae688679d36"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f85425157a6879dd8e6c853198c4bae688679d36"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-1" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// list_bugs_array.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$dql = <span class="hljs-string">"SELECT b, e, r, p FROM Bug b JOIN b.engineer e "</span>.
       <span class="hljs-string">"JOIN b.reporter r JOIN b.products p ORDER BY b.created DESC"</span>;
$query = $entityManager-&gt;createQuery($dql);
$bugs = $query-&gt;getArrayResult();

<span class="hljs-keyword">foreach</span> ($bugs <span class="hljs-keyword">as</span> $bug) {
    <span class="hljs-keyword">echo</span> $bug[<span class="hljs-string">'description'</span>] . <span class="hljs-string">" - "</span> . $bug[<span class="hljs-string">'created'</span>]-&gt;format(<span class="hljs-string">'d.m.Y'</span>).<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Reported by: "</span>.$bug[<span class="hljs-string">'reporter'</span>][<span class="hljs-string">'name'</span>].<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Assigned to: "</span>.$bug[<span class="hljs-string">'engineer'</span>][<span class="hljs-string">'name'</span>].<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">foreach</span> ($bug[<span class="hljs-string">'products'</span>] <span class="hljs-keyword">as</span> $product) {
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Platform: "</span>.$product[<span class="hljs-string">'name'</span>].<span class="hljs-string">"\n"</span>;
    }
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"\n"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-2" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-3" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-4" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-5" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-6" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-7" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-8" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-9" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-10" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-11" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-12" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-13" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-14" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-15" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-16" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-17" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f85425157a6879dd8e6c853198c4bae688679d36-18" class="line-number-anchor" /><a href="#line-number-f85425157a6879dd8e6c853198c4bae688679d36-18">18</a></td></tr></table></div></code></pre>
<p>There is one significant difference in the DQL query however, we
have to add an additional fetch-join for the products connected to
a bug. The resulting SQL query for this single select statement is
pretty large, however still more efficient to retrieve compared to
hydrating objects.</p>
<a class="section-anchor" id="find-by-primary-key" name="find-by-primary-key"></a><h3 class="section-header"><a href="#find-by-primary-key">Find by Primary Key<i class="fas fa-link"></i></a></h3>
<p>The next Use-Case is displaying a Bug by primary key. This could be
done using DQL as in the previous example with a where clause,
however there is a convenience method on the <code>EntityManager</code> that
handles loading by primary key, which we have already seen in the
write scenarios:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="83ea7f659dcd7351105873491d448c95ea537deb"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="83ea7f659dcd7351105873491d448c95ea537deb"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-1" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// show_bug.php &lt;id&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$theBugId = $argv[<span class="hljs-number">1</span>];

$bug = $entityManager-&gt;find(<span class="hljs-string">"Bug"</span>, (int)$theBugId);

<span class="hljs-keyword">echo</span> <span class="hljs-string">"Bug: "</span>.$bug-&gt;getDescription().<span class="hljs-string">"\n"</span>;
<span class="hljs-keyword">echo</span> <span class="hljs-string">"Engineer: "</span>.$bug-&gt;getEngineer()-&gt;getName().<span class="hljs-string">"\n"</span>;</td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-2" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-3" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-4" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-5" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-6" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-7" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-8" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-9" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-83ea7f659dcd7351105873491d448c95ea537deb-10" class="line-number-anchor" /><a href="#line-number-83ea7f659dcd7351105873491d448c95ea537deb-10">10</a></td></tr></table></div></code></pre>
<p>The output of the engineer’s name is fetched from the database! What is happening?</p>
<p>Since we only retrieved the bug by primary key both the engineer and reporter
are not immediately loaded from the database but are replaced by LazyLoading
proxies. These proxies will load behind the scenes, when the first method
is called on them.</p>
<p>Sample code of this proxy generated code can be found in the specified Proxy
Directory, it looks like:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="0d0452f39e38ffe8cbc539cd967d95cf888c9f77"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="0d0452f39e38ffe8cbc539cd967d95cf888c9f77"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-1" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyProject</span>\<span class="hljs-title">Proxies</span>;

<span class="hljs-comment">/**
 * THIS CLASS WAS GENERATED BY THE DOCTRINE ORM. DO NOT EDIT THIS FILE.
 **/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserProxy</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> \<span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Proxy</span>\<span class="hljs-title">Proxy</span>
</span>{
    <span class="hljs-comment">// .. lazy load code here</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addReportedBug</span><span class="hljs-params">($bug)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;_load();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">parent</span>::addReportedBug($bug);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assignedToBug</span><span class="hljs-params">($bug)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;_load();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">parent</span>::assignedToBug($bug);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-2" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-3" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-4" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-5" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-6" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-7" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-8" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-9" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-10" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-11" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-12" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-13" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-14" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-15" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-16" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-17" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-18" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-19" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-20" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-21" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-22" class="line-number-anchor" /><a href="#line-number-0d0452f39e38ffe8cbc539cd967d95cf888c9f77-22">22</a></td></tr></table></div></code></pre>
<p>See how upon each method call the proxy is lazily loaded from the
database?</p>
<p>The call prints:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php show_bug.php 1
Bug: Something does not work!
Engineer: beberlei</code></pre></div>
<div class="alert warning-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td><td><p>Lazy loading additional data can be very convenient but the additional
queries create an overhead. If you know that certain fields will always
(or usually) be required by the query then you will get better performance
by explicitly retrieving them all in the first query.</p>
</td></tr></table></div>
<a class="section-anchor" id="dashboard-of-the-user" name="dashboard-of-the-user"></a><h2 class="section-header"><a href="#dashboard-of-the-user">Dashboard of the User<i class="fas fa-link"></i></a></h2>
<p>For the next use-case we want to retrieve the dashboard view, a
list of all open bugs the user reported or was assigned to. This
will be achieved using DQL again, this time with some WHERE clauses
and usage of bound parameters:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a51ddaa1379c4b2487fb7cbb47b0b187794bda33"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a51ddaa1379c4b2487fb7cbb47b0b187794bda33"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-1" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// dashboard.php &lt;user-id&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$theUserId = $argv[<span class="hljs-number">1</span>];

$dql = <span class="hljs-string">"SELECT b, e, r FROM Bug b JOIN b.engineer e JOIN b.reporter r "</span>.
       <span class="hljs-string">"WHERE b.status = 'OPEN' AND (e.id = ?1 OR r.id = ?1) ORDER BY b.created DESC"</span>;

$myBugs = $entityManager-&gt;createQuery($dql)
                        -&gt;setParameter(<span class="hljs-number">1</span>, $theUserId)
                        -&gt;setMaxResults(<span class="hljs-number">15</span>)
                        -&gt;getResult();

<span class="hljs-keyword">echo</span> <span class="hljs-string">"You have created or assigned to "</span> . count($myBugs) . <span class="hljs-string">" open bugs:\n\n"</span>;

<span class="hljs-keyword">foreach</span> ($myBugs <span class="hljs-keyword">as</span> $bug) {
    <span class="hljs-keyword">echo</span> $bug-&gt;getId() . <span class="hljs-string">" - "</span> . $bug-&gt;getDescription().<span class="hljs-string">"\n"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-2" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-3" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-4" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-5" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-6" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-7" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-8" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-9" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-10" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-11" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-12" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-13" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-14" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-15" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-16" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-17" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-18" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-19" class="line-number-anchor" /><a href="#line-number-a51ddaa1379c4b2487fb7cbb47b0b187794bda33-19">19</a></td></tr></table></div></code></pre>
<a class="section-anchor" id="number-of-bugs" name="number-of-bugs"></a><h2 class="section-header"><a href="#number-of-bugs">Number of Bugs<i class="fas fa-link"></i></a></h2>
<p>Until now we only retrieved entities or their array representation.
Doctrine also supports the retrieval of non-entities through DQL.
These values are called &quot;scalar result values&quot; and may even be
aggregate values using COUNT, SUM, MIN, MAX or AVG functions.</p>
<p>We will need this knowledge to retrieve the number of open bugs
grouped by product:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="43e9d5730ad27defc43afed0262c14061691c5e8"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="43e9d5730ad27defc43afed0262c14061691c5e8"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-1" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// products.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$dql = <span class="hljs-string">"SELECT p.id, p.name, count(b.id) AS openBugs FROM Bug b "</span>.
       <span class="hljs-string">"JOIN b.products p WHERE b.status = 'OPEN' GROUP BY p.id"</span>;
$productBugs = $entityManager-&gt;createQuery($dql)-&gt;getScalarResult();

<span class="hljs-keyword">foreach</span> ($productBugs <span class="hljs-keyword">as</span> $productBug) {
    <span class="hljs-keyword">echo</span> $productBug[<span class="hljs-string">'name'</span>].<span class="hljs-string">" has "</span> . $productBug[<span class="hljs-string">'openBugs'</span>] . <span class="hljs-string">" open bugs!\n"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-2" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-3" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-4" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-5" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-6" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-7" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-8" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-9" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-10" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-43e9d5730ad27defc43afed0262c14061691c5e8-11" class="line-number-anchor" /><a href="#line-number-43e9d5730ad27defc43afed0262c14061691c5e8-11">11</a></td></tr></table></div></code></pre>
<a class="section-anchor" id="updating-entities" name="updating-entities"></a><h2 class="section-header"><a href="#updating-entities">Updating Entities<i class="fas fa-link"></i></a></h2>
<p>There is a single use-case missing from the requirements, Engineers
should be able to close a bug. This looks like:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9811cc35891950a59934044714d8aeb2f358811a"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9811cc35891950a59934044714d8aeb2f358811a"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-1" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/Bug.php</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;status = <span class="hljs-string">"CLOSE"</span>;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-2" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-3" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-4" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-5" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-6" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-7" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-8" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-9" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9811cc35891950a59934044714d8aeb2f358811a-10" class="line-number-anchor" /><a href="#line-number-9811cc35891950a59934044714d8aeb2f358811a-10">10</a></td></tr></table></div></code></pre>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="adc4d9226edfbc1728da4e78af2271404c51a7bd"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="adc4d9226edfbc1728da4e78af2271404c51a7bd"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-1" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// close_bug.php &lt;bug-id&gt;</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$theBugId = $argv[<span class="hljs-number">1</span>];

$bug = $entityManager-&gt;find(<span class="hljs-string">"Bug"</span>, (int)$theBugId);
$bug-&gt;close();

$entityManager-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-2" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-3" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-4" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-5" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-6" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-7" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-8" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-9" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-10" class="line-number-anchor" /><a href="#line-number-adc4d9226edfbc1728da4e78af2271404c51a7bd-10">10</a></td></tr></table></div></code></pre>
<p>When retrieving the Bug from the database it is inserted into the
IdentityMap inside the UnitOfWork of Doctrine. This means your Bug
with exactly this id can only exist once during the whole request
no matter how often you call <code>EntityManager#find()</code>. It even
detects entities that are hydrated using DQL and are already
present in the Identity Map.</p>
<p>When flush is called the EntityManager loops over all the entities
in the identity map and performs a comparison between the values
originally retrieved from the database and those values the entity
currently has. If at least one of these properties is different the
entity is scheduled for an UPDATE against the database. Only the
changed columns are updated, which offers a pretty good performance
improvement compared to updating all the properties.</p>
<a class="section-anchor" id="entity-repositories" name="entity-repositories"></a><h2 class="section-header"><a href="#entity-repositories">Entity Repositories<i class="fas fa-link"></i></a></h2>
<p>For now we have not discussed how to separate the Doctrine query logic from your model.
In Doctrine 1 there was the concept of <code>Doctrine_Table</code> instances for this
separation. The similar concept in Doctrine2 is called Entity Repositories, integrating
the <a href="http://martinfowler.com/eaaCatalog/repository.html">repository pattern</a> at the heart of Doctrine.</p>
<p>Every Entity uses a default repository by default and offers a bunch of convenience
methods that you can use to query for instances of that Entity. Take for example
our Product entity. If we wanted to Query by name, we can use:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5a6c5fa900939da9ebe82862490e1e06beec1b9b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5a6c5fa900939da9ebe82862490e1e06beec1b9b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5a6c5fa900939da9ebe82862490e1e06beec1b9b-1" class="line-number-anchor" /><a href="#line-number-5a6c5fa900939da9ebe82862490e1e06beec1b9b-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$product = $entityManager-&gt;getRepository(<span class="hljs-string">'Product'</span>)
                         -&gt;findOneBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'name'</span> =&gt; $productName));</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5a6c5fa900939da9ebe82862490e1e06beec1b9b-2" class="line-number-anchor" /><a href="#line-number-5a6c5fa900939da9ebe82862490e1e06beec1b9b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5a6c5fa900939da9ebe82862490e1e06beec1b9b-3" class="line-number-anchor" /><a href="#line-number-5a6c5fa900939da9ebe82862490e1e06beec1b9b-3">3</a></td></tr></table></div></code></pre>
<p>The method <code>findOneBy()</code> takes an array of fields or association keys and the values to match against.</p>
<p>If you want to find all entities matching a condition you can use <code>findBy()</code>, for
example querying for all closed bugs:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4ec3c33def76d76750c7f747e7867733459ac615"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4ec3c33def76d76750c7f747e7867733459ac615"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-1" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-1">1</a></td><td class="code-line" rowspan="7"><span class="hljs-meta">&lt;?php</span>
$bugs = $entityManager-&gt;getRepository(<span class="hljs-string">'Bug'</span>)
                      -&gt;findBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'CLOSED'</span>));

<span class="hljs-keyword">foreach</span> ($bugs <span class="hljs-keyword">as</span> $bug) {
    <span class="hljs-comment">// do stuff</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-2" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-3" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-4" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-5" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-6" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ec3c33def76d76750c7f747e7867733459ac615-7" class="line-number-anchor" /><a href="#line-number-4ec3c33def76d76750c7f747e7867733459ac615-7">7</a></td></tr></table></div></code></pre>
<p>Compared to DQL these query methods are falling short of functionality very fast.
Doctrine offers you a convenient way to extend the functionalities of the default <code>EntityRepository</code>
and put all the specialized DQL query logic on it. For this you have to create a subclass
of <code>Doctrine\ORM\EntityRepository</code>, in our case a <code>BugRepository</code> and group all
the previously discussed query functionality in it:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b320b9eeb21c47d9842d00e0320b0735b5bd09fe"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b320b9eeb21c47d9842d00e0320b0735b5bd09fe"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-1" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-1">1</a></td><td class="code-line" rowspan="43"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// src/BugRepository.php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">EntityRepository</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BugRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">EntityRepository</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRecentBugs</span><span class="hljs-params">($number = <span class="hljs-number">30</span>)</span>
    </span>{
        $dql = <span class="hljs-string">"SELECT b, e, r FROM Bug b JOIN b.engineer e JOIN b.reporter r ORDER BY b.created DESC"</span>;

        $query = <span class="hljs-keyword">$this</span>-&gt;getEntityManager()-&gt;createQuery($dql);
        $query-&gt;setMaxResults($number);
        <span class="hljs-keyword">return</span> $query-&gt;getResult();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRecentBugsArray</span><span class="hljs-params">($number = <span class="hljs-number">30</span>)</span>
    </span>{
        $dql = <span class="hljs-string">"SELECT b, e, r, p FROM Bug b JOIN b.engineer e "</span>.
               <span class="hljs-string">"JOIN b.reporter r JOIN b.products p ORDER BY b.created DESC"</span>;
        $query = <span class="hljs-keyword">$this</span>-&gt;getEntityManager()-&gt;createQuery($dql);
        $query-&gt;setMaxResults($number);
        <span class="hljs-keyword">return</span> $query-&gt;getArrayResult();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUsersBugs</span><span class="hljs-params">($userId, $number = <span class="hljs-number">15</span>)</span>
    </span>{
        $dql = <span class="hljs-string">"SELECT b, e, r FROM Bug b JOIN b.engineer e JOIN b.reporter r "</span>.
               <span class="hljs-string">"WHERE b.status = 'OPEN' AND e.id = ?1 OR r.id = ?1 ORDER BY b.created DESC"</span>;

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;getEntityManager()-&gt;createQuery($dql)
                             -&gt;setParameter(<span class="hljs-number">1</span>, $userId)
                             -&gt;setMaxResults($number)
                             -&gt;getResult();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOpenBugsByProduct</span><span class="hljs-params">()</span>
    </span>{
        $dql = <span class="hljs-string">"SELECT p.id, p.name, count(b.id) AS openBugs FROM Bug b "</span>.
               <span class="hljs-string">"JOIN b.products p WHERE b.status = 'OPEN' GROUP BY p.id"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;getEntityManager()-&gt;createQuery($dql)-&gt;getScalarResult();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-2" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-3" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-4" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-5" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-6" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-7" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-8" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-9" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-10" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-11" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-12" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-13" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-14" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-15" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-16" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-17" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-18" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-19" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-20" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-21" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-22" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-23" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-24" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-25" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-26" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-27" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-28" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-29" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-30" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-31" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-32" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-33" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-34" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-35" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-36" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-37" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-38" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-39" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-40" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-41" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-42" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-43" class="line-number-anchor" /><a href="#line-number-b320b9eeb21c47d9842d00e0320b0735b5bd09fe-43">43</a></td></tr></table></div></code></pre>
<p>To be able to use this query logic through <code>$this-&gt;getEntityManager()-&gt;getRepository('Bug')</code>
we have to adjust the metadata slightly.</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="87095733373b696a2e0c5b4ae79492a407086d6f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="87095733373b696a2e0c5b4ae79492a407086d6f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-1" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-1">1</a></td><td class="code-line" rowspan="9"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span>(repositoryClass="BugRepository")
 * <span class="hljs-doctag">@Table</span>(name="bugs")
 **/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bug</span>
</span>{
    <span class="hljs-comment">//...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-2" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-3" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-4" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-5" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-6" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-7" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-8" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87095733373b696a2e0c5b4ae79492a407086d6f-9" class="line-number-anchor" /><a href="#line-number-87095733373b696a2e0c5b4ae79492a407086d6f-9">9</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c50bf6d1d0082515a7a103306f4b3145a7d36e74"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c50bf6d1d0082515a7a103306f4b3145a7d36e74"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-1" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-1">1</a></td><td class="code-line" rowspan="9"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/orm/doctrine-mapping
                          https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd"</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">entity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Bug"</span> <span class="hljs-attr">table</span>=<span class="hljs-string">"bugs"</span> <span class="hljs-attr">repository-class</span>=<span class="hljs-string">"BugRepository"</span>&gt;</span>

      <span class="hljs-tag">&lt;/<span class="hljs-name">entity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-2" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-3" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-4" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-5" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-6" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-7" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-8" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-9" class="line-number-anchor" /><a href="#line-number-c50bf6d1d0082515a7a103306f4b3145a7d36e74-9">9</a></td></tr></table></div></code></pre></div></li></ul></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The YAML driver is deprecated and will be removed in version 3.0.
It is strongly recommended to switch to one of the other mappings.</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4eacca44ca4ee091e2d133f388bf22a3de7ebd06"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4eacca44ca4ee091e2d133f388bf22a3de7ebd06"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4eacca44ca4ee091e2d133f388bf22a3de7ebd06-1" class="line-number-anchor" /><a href="#line-number-4eacca44ca4ee091e2d133f388bf22a3de7ebd06-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-attr">Bug:</span>
<span class="hljs-attr">  type:</span> <span class="hljs-string">entity</span>
<span class="hljs-attr">  repositoryClass:</span> <span class="hljs-string">BugRepository</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4eacca44ca4ee091e2d133f388bf22a3de7ebd06-2" class="line-number-anchor" /><a href="#line-number-4eacca44ca4ee091e2d133f388bf22a3de7ebd06-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4eacca44ca4ee091e2d133f388bf22a3de7ebd06-3" class="line-number-anchor" /><a href="#line-number-4eacca44ca4ee091e2d133f388bf22a3de7ebd06-3">3</a></td></tr></table></div></code></pre>
</td></tr></table></div>
<p>Now we can remove our query logic in all the places and instead use them through the EntityRepository.
As an example here is the code of the first use case &quot;List of Bugs&quot;:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4280a6f673e0d5a77f877a9ba349252402a837bd"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4280a6f673e0d5a77f877a9ba349252402a837bd"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-1" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// list_bugs_repository.php</span>
<span class="hljs-keyword">require_once</span> <span class="hljs-string">"bootstrap.php"</span>;

$bugs = $entityManager-&gt;getRepository(<span class="hljs-string">'Bug'</span>)-&gt;getRecentBugs();

<span class="hljs-keyword">foreach</span> ($bugs <span class="hljs-keyword">as</span> $bug) {
    <span class="hljs-keyword">echo</span> $bug-&gt;getDescription().<span class="hljs-string">" - "</span>.$bug-&gt;getCreated()-&gt;format(<span class="hljs-string">'d.m.Y'</span>).<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Reported by: "</span>.$bug-&gt;getReporter()-&gt;getName().<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Assigned to: "</span>.$bug-&gt;getEngineer()-&gt;getName().<span class="hljs-string">"\n"</span>;
    <span class="hljs-keyword">foreach</span> ($bug-&gt;getProducts() <span class="hljs-keyword">as</span> $product) {
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"    Platform: "</span>.$product-&gt;getName().<span class="hljs-string">"\n"</span>;
    }
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"\n"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-2" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-3" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-4" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-5" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-6" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-7" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-8" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-9" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-10" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-11" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-12" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-13" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-14" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-15" class="line-number-anchor" /><a href="#line-number-4280a6f673e0d5a77f877a9ba349252402a837bd-15">15</a></td></tr></table></div></code></pre>
<p>Using EntityRepositories you can avoid coupling your model with specific query logic.
You can also re-use query logic easily throughout your application.</p>
<p>The method <code>count()</code> takes an array of fields or association keys and the values to match against.
This provides you with a convenient and lightweight way to count a resultset when you don't need to
deal with it:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="09e044fe4ecfe597e457db377a413d517d46f67e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="09e044fe4ecfe597e457db377a413d517d46f67e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-09e044fe4ecfe597e457db377a413d517d46f67e-1" class="line-number-anchor" /><a href="#line-number-09e044fe4ecfe597e457db377a413d517d46f67e-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$productCount = $entityManager-&gt;getRepository(Product::class)
                         -&gt;count([<span class="hljs-string">'name'</span> =&gt; $productName]);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-09e044fe4ecfe597e457db377a413d517d46f67e-2" class="line-number-anchor" /><a href="#line-number-09e044fe4ecfe597e457db377a413d517d46f67e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-09e044fe4ecfe597e457db377a413d517d46f67e-3" class="line-number-anchor" /><a href="#line-number-09e044fe4ecfe597e457db377a413d517d46f67e-3">3</a></td></tr></table></div></code></pre>
<a class="section-anchor" id="conclusion" name="conclusion"></a><h2 class="section-header"><a href="#conclusion">Conclusion<i class="fas fa-link"></i></a></h2>
<p>This tutorial is over here, I hope you had fun. Additional content
will be added to this tutorial incrementally, topics will include:</p>
<ul><li class="dash">  More on Association Mappings</li>
<li class="dash">  Lifecycle Events triggered in the UnitOfWork</li>
<li class="dash">  Ordering of Collections</li>
</ul>

<p>Additional details on all the topics discussed here can be found in
the respective manual chapters.</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?3aa944"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'orm';
            var versionSlug = '2.6';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search ORM 2.6'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
