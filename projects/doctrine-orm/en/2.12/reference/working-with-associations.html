<!DOCTYPE html>
<html>
    <head>
        <title>        Working with Associations - Doctrine Object Relational Mapper (ORM)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Object Relational Mapper Documentation: Working with Associations ">

        <meta name="keywords" content="                    orm,database,documentation,working,with,associations
    ">

                    <meta name="robots" content="noindex">
        
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine-orm/en/3.2/reference/working-with-associations.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?30e146"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.12/reference/working-with-associations.html" />
        <meta property="og:title" content="        Working with Associations - Doctrine Object Relational Mapper (ORM)
    " />
        <meta property="og:description" content="Doctrine Object Relational Mapper Documentation: Working with Associations " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Object Relational Mapper",
            "description": "Working with Associations",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/orm/edit/2.12.x/docs/en/reference/working-with-associations.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc-section">
<h2 class="toc-header">Tutorials</h2><div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../tutorials/getting-started.html#getting-started-with-doctrine">Getting Started with Doctrine</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-database.html#getting-started-database-first">Getting Started: Database First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-models.html#getting-started-model-first">Getting Started: Model First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#working-with-indexed-associations">Working with Indexed Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/extra-lazy-associations.html#extra-lazy-associations">Extra Lazy Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#composite-and-foreign-keys-as-primary-key">Composite and Foreign Keys as Primary Key</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/ordered-associations.html#ordering-to-many-associations">Ordering To-Many Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/override-field-association-mappings-in-subclasses.html#override-field-association-mappings-in-subclasses">Override Field Association Mappings In Subclasses</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/embeddables.html#separating-concerns-using-embeddables">Separating Concerns using Embeddables</a>


</li>
    </ul>
</div>
</div><div class="toc-section">
<h2 class="toc-header">Reference</h2><div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>


</li>
    <li class="toc-item">
    <a href="configuration.html#installation-and-configuration">Installation and Configuration</a>


</li>
    <li class="toc-item">
    <a href="faq.html#frequently-asked-questions">Frequently Asked Questions</a>


</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>


</li>
    <li class="toc-item">
    <a href="association-mapping.html#association-mapping">Association Mapping</a>


</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>


</li>
    <li class="toc-item">
    <a href="working-with-objects.html#working-with-objects">Working with Objects</a>


</li>
    <li class="toc-item opened">
    <a href="#working-with-associations">Working with Associations</a>


</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>


</li>
    <li class="toc-item">
    <a href="unitofwork.html#doctrine-internals-explained">Doctrine Internals explained</a>


</li>
    <li class="toc-item">
    <a href="unitofwork-associations.html#association-updates-owning-side-and-inverse-side">Association Updates: Owning Side and Inverse Side</a>


</li>
    <li class="toc-item">
    <a href="transactions-and-concurrency.html#transactions-and-concurrency">Transactions and Concurrency</a>


</li>
    <li class="toc-item">
    <a href="batch-processing.html#batch-processing">Batch Processing</a>


</li>
    <li class="toc-item">
    <a href="dql-doctrine-query-language.html#doctrine-query-language">Doctrine Query Language</a>


</li>
    <li class="toc-item">
    <a href="query-builder.html#the-querybuilder">The QueryBuilder</a>


</li>
    <li class="toc-item">
    <a href="native-sql.html#native-sql">Native SQL</a>


</li>
    <li class="toc-item">
    <a href="change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a>


</li>
    <li class="toc-item">
    <a href="partial-objects.html#partial-objects">Partial Objects</a>


</li>
    <li class="toc-item">
    <a href="annotations-reference.html#annotations-reference">Annotations Reference</a>


</li>
    <li class="toc-item">
    <a href="attributes-reference.html#attributes-reference">Attributes Reference</a>


</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>


</li>
    <li class="toc-item">
    <a href="yaml-mapping.html#yaml-mapping">YAML Mapping</a>


</li>
    <li class="toc-item">
    <a href="php-mapping.html#php-mapping">PHP Mapping</a>


</li>
    <li class="toc-item">
    <a href="caching.html#caching">Caching</a>


</li>
    <li class="toc-item">
    <a href="improving-performance.html#improving-performance">Improving Performance</a>


</li>
    <li class="toc-item">
    <a href="tools.html#tools">Tools</a>


</li>
    <li class="toc-item">
    <a href="metadata-drivers.html#metadata-drivers">Metadata Drivers</a>


</li>
    <li class="toc-item">
    <a href="best-practices.html#best-practices">Best Practices</a>


</li>
    <li class="toc-item">
    <a href="limitations-and-known-issues.html#limitations-and-known-issues">Limitations and Known Issues</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="filters.html#filters">Filters</a>


</li>
    <li class="toc-item">
    <a href="namingstrategy.html#implementing-a-namingstrategy">Implementing a NamingStrategy</a>


</li>
    <li class="toc-item">
    <a href="advanced-configuration.html#advanced-configuration">Advanced Configuration</a>


</li>
    <li class="toc-item">
    <a href="second-level-cache.html#the-second-level-cache">The Second Level Cache</a>


</li>
    <li class="toc-item">
    <a href="security.html#security">Security</a>


</li>
    </ul>
</div>
</div><div class="toc-section">
<h2 class="toc-header">Cookbook</h2><div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#aggregate-fields">Aggregate Fields</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#persisting-the-decorator-pattern">Persisting the Decorator Pattern</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/dql-custom-walkers.html#extending-dql-in-doctrine-orm-custom-ast-walkers">Extending DQL in Doctrine ORM: Custom AST Walkers</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#dql-user-defined-functions">DQL User Defined Functions</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-the-notify-changetracking-policy.html#implementing-the-notify-changetracking-policy">Implementing the Notify ChangeTracking Policy</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-wakeup-or-clone.html#implementing-wakeup-or-clone">Implementing Wakeup or Clone</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#keeping-your-modules-independent">Keeping your Modules independent</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/sql-table-prefixes.html#sql-table-prefixes">SQL-Table Prefixes</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/strategy-cookbook-introduction.html#strategy-pattern">Strategy-Pattern</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/validation-of-entities.html#validation-of-entities">Validation of Entities</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#working-with-datetime-instances">Working with DateTime Instances</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/mysql-enums.html#mysql-enums">Mysql Enums</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#advanced-field-value-conversion-using-custom-mapping-types">Advanced field value conversion using custom mapping types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#entities-in-the-session">Entities in the Session</a>


</li>
    </ul>
</div>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://staging.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "ORM",
            "item": "https://staging.doctrine-project.org/projects/orm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://staging.doctrine-project.org/projects/doctrine-orm/en/2.12/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Working with Associations",
            "item": "https://staging.doctrine-project.org/projects/doctrine-orm/en/2.12/reference/working-with-associations.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/orm.html">ORM</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.12/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Working with Associations</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-orm/en/2.12/reference/working-with-associations.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.12.4
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/latest/reference/working-with-associations.html">
                                                        4.0

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/3.3/reference/working-with-associations.html">
                                                        3.3

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/3.2/reference/working-with-associations.html">
                                                        3.2.2

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.20/reference/working-with-associations.html">
                                                        2.20

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.19/reference/working-with-associations.html">
                                                        2.19.7

                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.1/reference/working-with-associations.html">3.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.0/reference/working-with-associations.html">3.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.18/reference/working-with-associations.html">2.18</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.17/reference/working-with-associations.html">2.17</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.16/reference/working-with-associations.html">2.16</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.15/reference/working-with-associations.html">2.15</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.14/reference/working-with-associations.html">2.14</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.13/reference/working-with-associations.html">2.13</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-orm/en/2.12/reference/working-with-associations.html">2.12</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.11/reference/working-with-associations.html">2.11</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.10/reference/working-with-associations.html">2.10</a>
                                                                                                                                                                        </div>
                                </div>
                            
                            

            <div class="section" id="working-with-associations">
            <h1 class="section-header ">
    <a href="#working-with-associations">
        Working with Associations
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>Associations between entities are represented just like in regular
object-oriented PHP code using references to other objects or
collections of objects.</p>

            
    <p>Changes to associations in your code are not synchronized to the
database directly, only when calling <code>EntityManager#flush()</code>.</p>

            
    <p>There are other concepts you should know about when working
with associations in Doctrine:</p>

            

<ul>
    <li class="dash">If an entity is removed from a collection, the association is
removed, not the entity itself. A collection of entities always
only represents the association to the containing entities, not the
entity itself.</li>
    <li class="dash">When a bidirectional association is updated, Doctrine only checks
on one of both sides for these changes. This is called the <a href="unitofwork-associations.html">owning side</a>
of the association.</li>
    <li class="dash">A property with a reference to many entities has to be instances of the
<code>Doctrine\Common\Collections\Collection</code> interface.</li>
</ul>

            <div class="section" id="association-example-entities">
            <h2 class="section-header ">
    <a href="#association-example-entities">
        Association Example Entities
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>We will use a simple comment system with Users and Comments as
entities to show examples of association management. See the PHP
docblocks of each association in the following example for
information about its type and if it&#039;s the owning or inverse side.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="39e8f37755874d3214ec5537236b3cb7083c4e22"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="39e8f37755874d3214ec5537236b3cb7083c4e22"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-1" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-1">1</a></td><td class="code-line" rowspan="58"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">/** <span class="hljs-doctag">@Entity</span> */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@GeneratedValue</span> <span class="hljs-doctag">@Column</span>(type="string") */</span>
    <span class="hljs-keyword">private</span> $id;

    <span class="hljs-comment">/**
     * Bidirectional - Many users have Many favorite comments (OWNING SIDE)
     *
     * <span class="hljs-doctag">@ManyToMany</span>(targetEntity="Comment", inversedBy="userFavorites")
     * <span class="hljs-doctag">@JoinTable</span>(name="user_favorite_comments")
     */</span>
    <span class="hljs-keyword">private</span> $favorites;

    <span class="hljs-comment">/**
     * Unidirectional - Many users have marked many comments as read
     *
     * <span class="hljs-doctag">@ManyToMany</span>(targetEntity="Comment")
     * <span class="hljs-doctag">@JoinTable</span>(name="user_read_comments")
     */</span>
    <span class="hljs-keyword">private</span> $commentsRead;

    <span class="hljs-comment">/**
     * Bidirectional - One-To-Many (INVERSE SIDE)
     *
     * <span class="hljs-doctag">@OneToMany</span>(targetEntity="Comment", mappedBy="author")
     */</span>
    <span class="hljs-keyword">private</span> $commentsAuthored;

    <span class="hljs-comment">/**
     * Unidirectional - Many-To-One
     *
     * <span class="hljs-doctag">@ManyToOne</span>(targetEntity="Comment")
     */</span>
    <span class="hljs-keyword">private</span> $firstComment;
}

<span class="hljs-comment">/** <span class="hljs-doctag">@Entity</span> */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@GeneratedValue</span> <span class="hljs-doctag">@Column</span>(type="string") */</span>
    <span class="hljs-keyword">private</span> $id;

    <span class="hljs-comment">/**
     * Bidirectional - Many comments are favorited by many users (INVERSE SIDE)
     *
     * <span class="hljs-doctag">@ManyToMany</span>(targetEntity="User", mappedBy="favorites")
     */</span>
    <span class="hljs-keyword">private</span> $userFavorites;

    <span class="hljs-comment">/**
     * Bidirectional - Many Comments are authored by one user (OWNING SIDE)
     *
     * <span class="hljs-doctag">@ManyToOne</span>(targetEntity="User", inversedBy="commentsAuthored")
     */</span>
     <span class="hljs-keyword">private</span> $author;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-2" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-3" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-4" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-5" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-6" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-7" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-8" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-9" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-10" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-11" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-12" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-13" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-14" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-15" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-16" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-17" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-18" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-19" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-20" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-21" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-22" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-23" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-24" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-25" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-26" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-27" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-28" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-29" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-30" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-31" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-32" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-33" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-34" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-35" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-36" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-37" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-38" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-39" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-40" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-41" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-42" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-43" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-44" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-44">44</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-45" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-45">45</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-46" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-46">46</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-47" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-47">47</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-48" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-48">48</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-49" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-49">49</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-50" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-50">50</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-51" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-51">51</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-52" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-52">52</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-53" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-53">53</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-54" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-54">54</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-55" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-55">55</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-56" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-56">56</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-57" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-57">57</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-58" class="line-number-anchor" /><a href="#line-number-39e8f37755874d3214ec5537236b3cb7083c4e22-58">58</a></td></tr></table></div></code></pre>
            
    <p>This two entities generate the following MySQL Schema (Foreign Key
definitions omitted):</p>

            <pre class="code-block-table"><code class="sql"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="96a0b9e8529839a1a210b41055378689e926c665"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="96a0b9e8529839a1a210b41055378689e926c665"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-1" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-1">1</a></td><td class="code-line" rowspan="23"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">User</span> (
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    firstComment_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span>(<span class="hljs-keyword">id</span>)
) <span class="hljs-keyword">ENGINE</span> = <span class="hljs-keyword">InnoDB</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">Comment</span> (
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    author_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span>(<span class="hljs-keyword">id</span>)
) <span class="hljs-keyword">ENGINE</span> = <span class="hljs-keyword">InnoDB</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_favorite_comments (
    user_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    favorite_comment_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span>(user_id, favorite_comment_id)
) <span class="hljs-keyword">ENGINE</span> = <span class="hljs-keyword">InnoDB</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_read_comments (
    user_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    comment_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span>(user_id, comment_id)
) <span class="hljs-keyword">ENGINE</span> = <span class="hljs-keyword">InnoDB</span>;</td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-2" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-3" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-4" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-5" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-6" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-7" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-8" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-9" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-10" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-11" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-12" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-13" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-14" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-15" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-16" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-17" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-18" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-19" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-20" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-21" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-22" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-96a0b9e8529839a1a210b41055378689e926c665-23" class="line-number-anchor" /><a href="#line-number-96a0b9e8529839a1a210b41055378689e926c665-23">23</a></td></tr></table></div></code></pre>
    </div>
            <div class="section" id="establishing-associations">
            <h2 class="section-header ">
    <a href="#establishing-associations">
        Establishing Associations
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Establishing an association between two entities is
straight-forward. Here are some examples for the unidirectional
relations of the <code>User</code>:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b842a6f3ffad4014d786041208feebc320660a50"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b842a6f3ffad4014d786041208feebc320660a50"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-1" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getReadComments</span><span class="hljs-params">()</span> </span>{
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;commentsRead;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFirstComment</span><span class="hljs-params">(Comment $c)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;firstComment = $c;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-2" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-3" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-4" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-5" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-6" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-7" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-8" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-9" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-10" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-11" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b842a6f3ffad4014d786041208feebc320660a50-12" class="line-number-anchor" /><a href="#line-number-b842a6f3ffad4014d786041208feebc320660a50-12">12</a></td></tr></table></div></code></pre>
            
    <p>The interaction code would then look like in the following snippet
(<code>$em</code> here is an instance of the EntityManager):</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="7d6f37812ef54be3675a408562335c6f14e31e17"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="7d6f37812ef54be3675a408562335c6f14e31e17"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-1" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-meta">&lt;?php</span>
$user = $em-&gt;find(<span class="hljs-string">'User'</span>, $userId);

<span class="hljs-comment">// unidirectional many to many</span>
$comment = $em-&gt;find(<span class="hljs-string">'Comment'</span>, $readCommentId);
$user-&gt;getReadComments()-&gt;add($comment);

$em-&gt;flush();

<span class="hljs-comment">// unidirectional many to one</span>
$myFirstComment = <span class="hljs-keyword">new</span> Comment();
$user-&gt;setFirstComment($myFirstComment);

$em-&gt;persist($myFirstComment);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-2" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-3" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-4" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-5" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-6" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-7" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-8" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-9" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-10" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-11" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-12" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-13" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-14" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d6f37812ef54be3675a408562335c6f14e31e17-15" class="line-number-anchor" /><a href="#line-number-7d6f37812ef54be3675a408562335c6f14e31e17-15">15</a></td></tr></table></div></code></pre>
            
    <p>In the case of bi-directional associations you have to update the
fields on both sides:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="10168b07e5ad8065770c726474319677efa6bc90"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="10168b07e5ad8065770c726474319677efa6bc90"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-1" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-1">1</a></td><td class="code-line" rowspan="40"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ..</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAuthoredComments</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;commentsAuthored;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFavoriteComments</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;favorites;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserFavorites</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;userFavorites;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setAuthor</span><span class="hljs-params">(User $author = null)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;author = $author;
    }
}

<span class="hljs-comment">// Many-to-Many</span>
$user-&gt;getFavorites()-&gt;add($favoriteComment);
$favoriteComment-&gt;getUserFavorites()-&gt;add($user);

$em-&gt;flush();

<span class="hljs-comment">// Many-To-One / One-To-Many Bidirectional</span>
$newComment = <span class="hljs-keyword">new</span> Comment();
$user-&gt;getAuthoredComments()-&gt;add($newComment);
$newComment-&gt;setAuthor($user);

$em-&gt;persist($newComment);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-2" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-3" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-4" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-5" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-6" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-7" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-8" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-9" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-10" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-11" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-12" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-13" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-14" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-15" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-16" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-17" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-18" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-19" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-20" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-21" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-22" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-23" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-24" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-25" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-26" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-27" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-28" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-29" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-30" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-31" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-32" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-33" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-34" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-35" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-36" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-37" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-38" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-39" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-10168b07e5ad8065770c726474319677efa6bc90-40" class="line-number-anchor" /><a href="#line-number-10168b07e5ad8065770c726474319677efa6bc90-40">40</a></td></tr></table></div></code></pre>
            
    <p>Notice how always both sides of the bidirectional association are
updated. The previous unidirectional associations were simpler to
handle.</p>

    </div>
            <div class="section" id="removing-associations">
            <h2 class="section-header ">
    <a href="#removing-associations">
        Removing Associations
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Removing an association between two entities is similarly
straight-forward. There are two strategies to do so, by key and by
element. Here are some examples:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="55a675d17476a63cf5f4f5fbf3f58e5c7157b511"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="55a675d17476a63cf5f4f5fbf3f58e5c7157b511"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-1" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// Remove by Elements</span>
$user-&gt;getComments()-&gt;removeElement($comment);
$comment-&gt;setAuthor(<span class="hljs-keyword">null</span>);

$user-&gt;getFavorites()-&gt;removeElement($comment);
$comment-&gt;getUserFavorites()-&gt;removeElement($user);

<span class="hljs-comment">// Remove by Key</span>
$user-&gt;getComments()-&gt;remove($ithComment);
$comment-&gt;setAuthor(<span class="hljs-keyword">null</span>);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-2" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-3" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-4" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-5" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-6" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-7" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-8" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-9" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-10" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-11" class="line-number-anchor" /><a href="#line-number-55a675d17476a63cf5f4f5fbf3f58e5c7157b511-11">11</a></td></tr></table></div></code></pre>
            
    <p>You need to call <code>$em-&gt;flush()</code> to make persist these changes in
the database permanently.</p>

            
    <p>Notice how both sides of the bidirectional association are always
updated. Unidirectional associations are consequently simpler to
handle.</p>

            
    <p>Also note that if you use type-hinting in your methods, you will 
have to specify a nullable type, i.e. <code>setAddress(?Address $address)</code>,
otherwise <code>setAddress(null)</code> will fail to remove the association.
Another way to deal with this is to provide a special method, like
<code>removeAddress()</code>. This can also provide better encapsulation as
it hides the internal meaning of not having an address.</p>

            
    <p>When working with collections, keep in mind that a Collection is
essentially an ordered map (just like a PHP array). That is why the
<code>remove</code> operation accepts an index/key. <code>removeElement</code> is a
separate method that has O(n) complexity using <code>array_search</code>,
where n is the size of the map.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Since Doctrine always only looks at the owning side of a
bidirectional association for updates, it is not necessary for
write operations that an inverse collection of a bidirectional
one-to-many or many-to-many association is updated. This knowledge
can often be used to improve performance by avoiding the loading of
the inverse collection.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>You can also clear the contents of a whole collection using the
<code>Collections::clear()</code> method. You should be aware that using
this method can lead to a straight and optimized database delete or
update call during the flush operation that is not aware of
entities that have been re-added to the collection.</p>

            
    <p>Say you clear a collection of tags by calling
<code>$post-&gt;getTags()-&gt;clear();</code> and then call
<code>$post-&gt;getTags()-&gt;add($tag)</code>. This will not recognize the tag having 
already been added previously and will consequently issue two separate database 
calls.</p>

    </div>
            <div class="section" id="association-management-methods">
            <h2 class="section-header ">
    <a href="#association-management-methods">
        Association Management Methods
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>It is generally a good idea to encapsulate proper association
management inside the entity classes. This makes it easier to use
the class correctly and can encapsulate details about how the
association is maintained.</p>

            
    <p>The following code shows updates to the previous User and Comment
example that encapsulate much of the association management code:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-1" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-1">1</a></td><td class="code-line" rowspan="44"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">markCommentRead</span><span class="hljs-params">(Comment $comment)</span> </span>{
        <span class="hljs-comment">// Collections implement ArrayAccess</span>
        <span class="hljs-keyword">$this</span>-&gt;commentsRead[] = $comment;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addComment</span><span class="hljs-params">(Comment $comment)</span> </span>{
        <span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;commentsAuthored) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">$this</span>-&gt;setFirstComment($comment);
        }
        <span class="hljs-keyword">$this</span>-&gt;comments[] = $comment;
        $comment-&gt;setAuthor(<span class="hljs-keyword">$this</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFirstComment</span><span class="hljs-params">(Comment $c)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;firstComment = $c;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addFavorite</span><span class="hljs-params">(Comment $comment)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;favorites-&gt;add($comment);
        $comment-&gt;addUserFavorite(<span class="hljs-keyword">$this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFavorite</span><span class="hljs-params">(Comment $comment)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;favorites-&gt;removeElement($comment);
        $comment-&gt;removeUserFavorite(<span class="hljs-keyword">$this</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span>
</span>{
    <span class="hljs-comment">// ..</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addUserFavorite</span><span class="hljs-params">(User $user)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;userFavorites[] = $user;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeUserFavorite</span><span class="hljs-params">(User $user)</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;userFavorites-&gt;removeElement($user);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-2" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-3" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-4" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-5" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-6" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-7" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-8" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-9" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-10" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-11" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-12" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-13" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-14" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-15" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-16" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-17" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-18" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-19" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-20" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-21" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-22" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-23" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-24" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-25" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-26" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-27" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-28" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-29" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-30" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-31" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-32" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-33" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-34" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-35" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-36" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-37" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-38" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-39" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-40" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-41" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-42" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-43" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-44" class="line-number-anchor" /><a href="#line-number-a07d3a5484dfa7d01bd8cfc3ce2075e223064a7a-44">44</a></td></tr></table></div></code></pre>
            
    <p>You will notice that <code>addUserFavorite</code> and <code>removeUserFavorite</code>
do not call <code>addFavorite</code> and <code>removeFavorite</code>, thus the
bidirectional association is strictly-speaking still incomplete.
However if you would naively add the <code>addFavorite</code> in
<code>addUserFavorite</code>, you end up with an infinite loop, so more work
is needed. As you can see, proper bidirectional association
management in plain OOP is a non-trivial task and encapsulating all
the details inside the classes can be challenging.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>If you want to make sure that your collections are perfectly
encapsulated you should not return them from a
<code>getCollectionName()</code> method directly, but call
<code>$collection-&gt;toArray()</code>. This way a client programmer for the
entity cannot circumvent the logic you implement on your entity for
association management. For example:</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="129a3bc0c1c6e26458e88f381a5d01803348e6d0"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="129a3bc0c1c6e26458e88f381a5d01803348e6d0"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-1" class="line-number-anchor" /><a href="#line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getReadComments</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;commentsRead-&gt;toArray();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-2" class="line-number-anchor" /><a href="#line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-3" class="line-number-anchor" /><a href="#line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-4" class="line-number-anchor" /><a href="#line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-5" class="line-number-anchor" /><a href="#line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-6" class="line-number-anchor" /><a href="#line-number-129a3bc0c1c6e26458e88f381a5d01803348e6d0-6">6</a></td></tr></table></div></code></pre>
            
    <p>This will however always initialize the collection, with all the
performance penalties given the size. In some scenarios of large
collections it might even be a good idea to completely hide the
read access behind methods on the EntityRepository.</p>

            
    <p>There is no single, best way for association management. It greatly
depends on the requirements of your concrete domain model as well
as your preferences.</p>

    </div>
            <div class="section" id="synchronizing-bidirectional-collections">
            <h2 class="section-header ">
    <a href="#synchronizing-bidirectional-collections">
        Synchronizing Bidirectional Collections
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>In the case of Many-To-Many associations you as the developer have the 
responsibility of keeping the collections on the owning and inverse side
in sync when you apply changes to them. Doctrine can only
guarantee a consistent state for the hydration, not for your client
code.</p>

            
    <p>Using the User-Comment entities from above, a very simple example
can show the possible caveats you can encounter:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="7b5dc74824d31a7a6c2327da71ff8c8e4d69624b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="7b5dc74824d31a7a6c2327da71ff8c8e4d69624b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-1" class="line-number-anchor" /><a href="#line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
$user-&gt;getFavorites()-&gt;add($favoriteComment);
<span class="hljs-comment">// not calling $favoriteComment-&gt;getUserFavorites()-&gt;add($user);</span>

$user-&gt;getFavorites()-&gt;contains($favoriteComment); <span class="hljs-comment">// TRUE</span>
$favoriteComment-&gt;getUserFavorites()-&gt;contains($user); <span class="hljs-comment">// FALSE</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-2" class="line-number-anchor" /><a href="#line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-3" class="line-number-anchor" /><a href="#line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-4" class="line-number-anchor" /><a href="#line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-5" class="line-number-anchor" /><a href="#line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-6" class="line-number-anchor" /><a href="#line-number-7b5dc74824d31a7a6c2327da71ff8c8e4d69624b-6">6</a></td></tr></table></div></code></pre>
            
    <p>There are two approaches to handle this problem in your code:</p>

            
    
<ol start="1" type="1">
    <li value="1">Ignore updating the inverse side of bidirectional collections,
BUT never read from them in requests that changed their state. In
the next request Doctrine hydrates the consistent collection state
again.</li>
    <li value="2">Always keep the bidirectional collections in sync through
association management methods. Reads of the Collections directly
after changes are consistent then.</li>
</ol>

    </div>
            <div class="section" id="transitive-persistence-cascade-operations">
            <a id="transitive-persistence"></a>
            <h2 class="section-header ">
    <a href="#transitive-persistence-cascade-operations">
        Transitive persistence / Cascade Operations
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine ORM provides a mechanism for transitive persistence through cascading of certain operations.
Each association to another entity or a collection of
entities can be configured to automatically cascade the following operations to the associated entities:
<code>persist</code>, <code>remove</code>, <code>merge</code>, <code>detach</code>, <code>refresh</code> or <code>all</code>.</p>

            
    <p>The main use case for <code>cascade: persist</code> is to avoid &quot;exposing&quot; associated entities to your PHP application.
Continuing with the User-Comment example of this chapter, this is how the creation of a new user and a new
comment might look like in your controller (without <code>cascade: persist</code>):</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5eb7f35f70591c4aaaf7e5cb7c36df23b245406e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5eb7f35f70591c4aaaf7e5cb7c36df23b245406e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-1" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
$user = <span class="hljs-keyword">new</span> User();
$myFirstComment = <span class="hljs-keyword">new</span> Comment();
$user-&gt;addComment($myFirstComment);

$em-&gt;persist($user);
$em-&gt;persist($myFirstComment); <span class="hljs-comment">// required, if `cascade: persist` is not set</span>
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-2" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-3" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-4" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-5" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-6" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-7" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-8" class="line-number-anchor" /><a href="#line-number-5eb7f35f70591c4aaaf7e5cb7c36df23b245406e-8">8</a></td></tr></table></div></code></pre>
            
    <p>Note that the Comment entity is instantiated right here in the controller.
To avoid this, <code>cascade: persist</code> allows you to &quot;hide&quot; the Comment entity from the controller,
only accessing it through the User entity:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ec49bbb4bdd51fdbae655ad430144662918d5f59"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ec49bbb4bdd51fdbae655ad430144662918d5f59"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-1" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// User entity</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-keyword">private</span> $id;
    <span class="hljs-keyword">private</span> $comments;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;id = User::new();
        <span class="hljs-keyword">$this</span>-&gt;comments = <span class="hljs-keyword">new</span> ArrayCollection();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">comment</span><span class="hljs-params">(string $text, DateTimeInterface $time)</span> : <span class="hljs-title">void</span>
    </span>{
        $newComment = Comment::create($text, $time);
        $newComment-&gt;setUser(<span class="hljs-keyword">$this</span>);
        <span class="hljs-keyword">$this</span>-&gt;comments-&gt;add($newComment);
    }

    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-2" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-3" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-4" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-5" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-6" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-7" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-8" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-9" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-10" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-11" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-12" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-13" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-14" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-15" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-16" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-17" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-18" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-19" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-20" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-21" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-22" class="line-number-anchor" /><a href="#line-number-ec49bbb4bdd51fdbae655ad430144662918d5f59-22">22</a></td></tr></table></div></code></pre>
            
    <p>If you then set up the cascading to the <code>User#commentsAuthored</code> property...</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a40348578a88cf2162ccfa5a651fbeeab31fa686"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a40348578a88cf2162ccfa5a651fbeeab31fa686"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-1" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">/**
     * Bidirectional - One-To-Many (INVERSE SIDE)
     *
     * <span class="hljs-doctag">@OneToMany</span>(targetEntity="Comment", mappedBy="author", cascade={"persist", "remove"})
     */</span>
    <span class="hljs-keyword">private</span> $commentsAuthored;
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-2" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-3" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-4" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-5" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-6" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-7" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-8" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-9" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-10" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-11" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-12" class="line-number-anchor" /><a href="#line-number-a40348578a88cf2162ccfa5a651fbeeab31fa686-12">12</a></td></tr></table></div></code></pre>
            
    <p>...you can now create a user and an associated comment like this:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-1" class="line-number-anchor" /><a href="#line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
$user = <span class="hljs-keyword">new</span> User();
$user-&gt;comment(<span class="hljs-string">'Lorem ipsum'</span>, <span class="hljs-keyword">new</span> DateTime());

$em-&gt;persist($user);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-2" class="line-number-anchor" /><a href="#line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-3" class="line-number-anchor" /><a href="#line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-4" class="line-number-anchor" /><a href="#line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-5" class="line-number-anchor" /><a href="#line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-6" class="line-number-anchor" /><a href="#line-number-8f5b9ccd79009076c5cd7245cd5c5c709dfd36ba-6">6</a></td></tr></table></div></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The idea of <code>cascade: persist</code> is not to save you any lines of code in the controller.
If you instantiate the comment object in the controller (i.e. don&#039;t set up the user entity as shown above),
even with <code>cascade: persist</code> you still have to call <code>$myFirstComment-&gt;setUser($user);</code>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Thanks to <code>cascade: remove</code>, you can easily delete a user and all linked comments without having to loop through them:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="6ea1aa27ee20e7ef0b3a7648a2a708217165b55e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="6ea1aa27ee20e7ef0b3a7648a2a708217165b55e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-1" class="line-number-anchor" /><a href="#line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-meta">&lt;?php</span>
$user = $em-&gt;find(<span class="hljs-string">'User'</span>, $deleteUserId);

$em-&gt;remove($user);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-2" class="line-number-anchor" /><a href="#line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-3" class="line-number-anchor" /><a href="#line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-4" class="line-number-anchor" /><a href="#line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-5" class="line-number-anchor" /><a href="#line-number-6ea1aa27ee20e7ef0b3a7648a2a708217165b55e-5">5</a></td></tr></table></div></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Cascade operations are performed in memory. That means collections and related entities
are fetched into memory (even if they are marked as lazy) when
the cascade operation is about to be performed. This approach allows
entity lifecycle events to be performed for each of these operations.</p>

    <p>However, pulling object graphs into memory on cascade can cause considerable performance
overhead, especially when the cascaded collections are large. Make sure
to weigh the benefits and downsides of each cascade operation that you define.</p>

    <p>To rely on the database level cascade operations for the delete operation instead, you can
configure each join column with <a href="working-with-objects.html">the onDelete option</a>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Even though automatic cascading is convenient, it should be used
with care. Do not blindly apply <code>cascade=all</code> to all associations as
it will unnecessarily degrade the performance of your application.
For each cascade operation that gets activated, Doctrine also
applies that operation to the association, be it single or
collection valued.</p>

            <div class="section" id="persistence-by-reachability-cascade-persist">
            <a id="persistence-by-reachability"></a>
            <h3 class="section-header ">
    <a href="#persistence-by-reachability-cascade-persist">
        Persistence by Reachability: Cascade Persist
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>There are additional semantics that apply to the Cascade Persist
operation. During each <code>flush()</code> operation Doctrine detects if there
are new entities in any collection and three possible cases can
happen:</p>

            
    
<ol start="1" type="1">
    <li value="1">New entities in a collection marked as <code>cascade: persist</code> will be
directly persisted by Doctrine.</li>
    <li value="2">New entities in a collection not marked as <code>cascade: persist</code> will
produce an Exception and rollback the <code>flush()</code> operation.</li>
    <li value="3">Collections without new entities are skipped.</li>
</ol>

            
    <p>This concept is called Persistence by Reachability: New entities
that are found on already managed entities are automatically
persisted as long as the association is defined as <code>cascade: persist</code>.</p>

    </div>
    </div>
            <div class="section" id="orphan-removal">
            <h2 class="section-header ">
    <a href="#orphan-removal">
        Orphan Removal
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>There is another concept of cascading that is relevant only when removing entities
from collections. If an Entity of type <code>A</code> contains references to privately
owned Entities <code>B</code> then if the reference from <code>A</code> to <code>B</code> is removed the
entity <code>B</code> should also be removed, because it is not used anymore.</p>

            
    <p>OrphanRemoval works with one-to-one, one-to-many and many-to-many associations.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>When using the <code>orphanRemoval=true</code> option Doctrine makes the assumption
that the entities are privately owned and will <strong>NOT</strong> be reused by other entities.
If you neglect this assumption your entities will get deleted by Doctrine even if
you assigned the orphaned entity to another one.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>As a better example consider an Addressbook application where you have Contacts, Addresses
and StandingData:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5e44063d8c08f6c347bb6efc44afef377f7fc64f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5e44063d8c08f6c347bb6efc44afef377f7fc64f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-1" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-1">1</a></td><td class="code-line" rowspan="35"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Addressbook</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Collections</span>\<span class="hljs-title">ArrayCollection</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span>
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Contact</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@Column</span>(type="integer") <span class="hljs-doctag">@GeneratedValue</span> */</span>
    <span class="hljs-keyword">private</span> $id;

    <span class="hljs-comment">/** <span class="hljs-doctag">@OneToOne</span>(targetEntity="StandingData", orphanRemoval=true) */</span>
    <span class="hljs-keyword">private</span> $standingData;

    <span class="hljs-comment">/** <span class="hljs-doctag">@OneToMany</span>(targetEntity="Address", mappedBy="contact", orphanRemoval=true) */</span>
    <span class="hljs-keyword">private</span> $addresses;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;addresses = <span class="hljs-keyword">new</span> ArrayCollection();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newStandingData</span><span class="hljs-params">(StandingData $sd)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;standingData = $sd;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeAddress</span><span class="hljs-params">($pos)</span>
    </span>{
        <span class="hljs-keyword">unset</span>(<span class="hljs-keyword">$this</span>-&gt;addresses[$pos]);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-2" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-3" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-4" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-5" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-6" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-7" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-8" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-9" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-10" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-11" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-12" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-13" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-14" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-15" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-16" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-17" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-18" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-19" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-20" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-21" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-22" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-23" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-24" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-25" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-26" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-27" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-28" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-29" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-30" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-31" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-32" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-33" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-34" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-35" class="line-number-anchor" /><a href="#line-number-5e44063d8c08f6c347bb6efc44afef377f7fc64f-35">35</a></td></tr></table></div></code></pre>
            
    <p>Now two examples of what happens when you remove the references:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f0df9cee322b04b5b7b6926adb2cddf62eefe028"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f0df9cee322b04b5b7b6926adb2cddf62eefe028"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-1" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-1">1</a></td><td class="code-line" rowspan="7"><span class="hljs-meta">&lt;?php</span>

$contact = $em-&gt;find(<span class="hljs-string">"Addressbook\Contact"</span>, $contactId);
$contact-&gt;newStandingData(<span class="hljs-keyword">new</span> StandingData(<span class="hljs-string">"Firstname"</span>, <span class="hljs-string">"Lastname"</span>, <span class="hljs-string">"Street"</span>));
$contact-&gt;removeAddress(<span class="hljs-number">1</span>);

$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-2" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-3" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-4" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-5" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-6" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-7" class="line-number-anchor" /><a href="#line-number-f0df9cee322b04b5b7b6926adb2cddf62eefe028-7">7</a></td></tr></table></div></code></pre>
            
    <p>In this case you have not only changed the <code>Contact</code> entity itself but 
you have also removed the references for standing data and as well as one 
address reference. When flush is called not only are the references removed 
but both the old standing data and the one address entity are also deleted 
from the database.</p>

    </div>
            <div class="section" id="filtering-collections">
            <a id="filtering-collections"></a>
            <h2 class="section-header ">
    <a href="#filtering-collections">
        Filtering Collections
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Collections have a filtering API that allows to slice parts of data from
a collection. If the collection has not been loaded from the database yet,
the filtering API can work on the SQL level to make optimized access to
large collections.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="700c83d0a99e62b511f95e84b510952b6ae4ec46"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="700c83d0a99e62b511f95e84b510952b6ae4ec46"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-1" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Collections</span>\<span class="hljs-title">Criteria</span>;

$group          = $entityManager-&gt;find(<span class="hljs-string">'Group'</span>, $groupId);
$userCollection = $group-&gt;getUsers();

$criteria = Criteria::create()
    -&gt;where(Criteria::expr()-&gt;eq(<span class="hljs-string">"birthday"</span>, <span class="hljs-string">"1982-02-17"</span>))
    -&gt;orderBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">"username"</span> =&gt; Criteria::ASC))
    -&gt;setFirstResult(<span class="hljs-number">0</span>)
    -&gt;setMaxResults(<span class="hljs-number">20</span>)
;

$birthdayUsers = $userCollection-&gt;matching($criteria);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-2" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-3" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-4" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-5" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-6" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-7" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-8" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-9" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-10" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-11" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-12" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-13" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-14" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-15" class="line-number-anchor" /><a href="#line-number-700c83d0a99e62b511f95e84b510952b6ae4ec46-15">15</a></td></tr></table></div></code></pre>
            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>You can move the access of slices of collections into dedicated methods of
an entity. For example <code>Group#getTodaysBirthdayUsers()</code>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>The Criteria has a limited matching language that works both on the
SQL and on the PHP collection level. This means you can use collection matching
interchangeably, independent of in-memory or sql-backed collections.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e28e6ba0a9f2dfce03e85ece73a061adc1b77b43"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e28e6ba0a9f2dfce03e85ece73a061adc1b77b43"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-1" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-1">1</a></td><td class="code-line" rowspan="45"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Common</span>\<span class="hljs-title">Collections</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Criteria</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">()</span></span>;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> Expression $where
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">where</span><span class="hljs-params">(Expression $where)</span></span>;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> Expression $where
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">andWhere</span><span class="hljs-params">(Expression $where)</span></span>;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> Expression $where
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">orWhere</span><span class="hljs-params">(Expression $where)</span></span>;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> array $orderings
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">orderBy</span><span class="hljs-params">(array $orderings)</span></span>;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> int $firstResult
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFirstResult</span><span class="hljs-params">($firstResult)</span></span>;
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> int $maxResults
     * <span class="hljs-doctag">@return</span> Criteria
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMaxResults</span><span class="hljs-params">($maxResults)</span></span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOrderings</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getWhereExpression</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFirstResult</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMaxResults</span><span class="hljs-params">()</span></span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-2" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-3" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-4" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-5" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-6" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-7" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-8" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-9" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-10" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-11" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-12" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-13" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-14" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-15" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-16" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-17" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-18" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-19" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-20" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-21" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-22" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-23" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-24" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-25" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-26" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-27" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-28" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-29" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-30" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-31" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-32" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-33" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-34" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-35" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-36" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-37" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-38" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-39" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-40" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-41" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-42" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-43" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-44" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-44">44</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-45" class="line-number-anchor" /><a href="#line-number-e28e6ba0a9f2dfce03e85ece73a061adc1b77b43-45">45</a></td></tr></table></div></code></pre>
            
    <p>You can build expressions through the ExpressionBuilder. It has the following
methods:</p>

            

<ul>
    <li><code>andX($arg1, $arg2, ...)</code></li>
    <li><code>orX($arg1, $arg2, ...)</code></li>
    <li><code>eq($field, $value)</code></li>
    <li><code>gt($field, $value)</code></li>
    <li><code>lt($field, $value)</code></li>
    <li><code>lte($field, $value)</code></li>
    <li><code>gte($field, $value)</code></li>
    <li><code>neq($field, $value)</code></li>
    <li><code>isNull($field)</code></li>
    <li><code>in($field, array $values)</code></li>
    <li><code>notIn($field, array $values)</code></li>
    <li><code>contains($field, $value)</code></li>
    <li><code>memberOf($value, $field)</code></li>
    <li><code>startsWith($field, $value)</code></li>
    <li><code>endsWith($field, $value)</code></li>
</ul>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>There is a limitation on the compatibility of Criteria comparisons.
You have to use scalar values only as the value in a comparison or
the behaviour between different backends is not the same.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?ff3b61"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'orm';
            var versionSlug = '2.12';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search ORM 2.12'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
