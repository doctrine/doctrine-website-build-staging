<!DOCTYPE html>
<html>
    <head>
        <title>        Transactions and Concurrency - Doctrine Object Relational Mapper (ORM)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Object Relational Mapper Documentation: Transactions and Concurrency ">

        <meta name="keywords" content="                    orm,database,documentation,transactions,and,concurrency
    ">

                    <meta name="robots" content="noindex">
        
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine-orm/en/3.2/reference/transactions-and-concurrency.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?33995b"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.16/reference/transactions-and-concurrency.html" />
        <meta property="og:title" content="        Transactions and Concurrency - Doctrine Object Relational Mapper (ORM)
    " />
        <meta property="og:description" content="Doctrine Object Relational Mapper Documentation: Transactions and Concurrency " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Object Relational Mapper",
            "description": "Transactions and Concurrency",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/orm/edit/2.16.x/docs/en/reference/transactions-and-concurrency.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="menu">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../tutorials/getting-started.html#getting-started-with-doctrine">Getting Started with Doctrine</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-database.html#getting-started-database-first">Getting Started: Database First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-models.html#getting-started-model-first">Getting Started: Model First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#working-with-indexed-associations">Working with Indexed Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/extra-lazy-associations.html#extra-lazy-associations">Extra Lazy Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#composite-and-foreign-keys-as-primary-key">Composite and Foreign Keys as Primary Key</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/ordered-associations.html#ordering-to-many-associations">Ordering To-Many Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/override-field-association-mappings-in-subclasses.html#override-field-association-mappings-in-subclasses">Override Field Association Mappings In Subclasses</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/embeddables.html#separating-concerns-using-embeddables">Separating Concerns using Embeddables</a>


</li>
    </ul>
</div><div class="toc-section">
<h2 class="toc-header">Tutorials</h2><div class="menu">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../tutorials/getting-started.html#getting-started-with-doctrine">Getting Started with Doctrine</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-database.html#getting-started-database-first">Getting Started: Database First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-models.html#getting-started-model-first">Getting Started: Model First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#working-with-indexed-associations">Working with Indexed Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/extra-lazy-associations.html#extra-lazy-associations">Extra Lazy Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#composite-and-foreign-keys-as-primary-key">Composite and Foreign Keys as Primary Key</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/ordered-associations.html#ordering-to-many-associations">Ordering To-Many Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/override-field-association-mappings-in-subclasses.html#override-field-association-mappings-in-subclasses">Override Field Association Mappings In Subclasses</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/embeddables.html#separating-concerns-using-embeddables">Separating Concerns using Embeddables</a>


</li>
    </ul>
</div>
</div><div class="menu">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>


</li>
    <li class="toc-item">
    <a href="configuration.html#installation-and-configuration">Installation and Configuration</a>


</li>
    <li class="toc-item">
    <a href="faq.html#frequently-asked-questions">Frequently Asked Questions</a>


</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>


</li>
    <li class="toc-item">
    <a href="association-mapping.html#association-mapping">Association Mapping</a>


</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>


</li>
    <li class="toc-item">
    <a href="working-with-objects.html#working-with-objects">Working with Objects</a>


</li>
    <li class="toc-item">
    <a href="working-with-associations.html#working-with-associations">Working with Associations</a>


</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>


</li>
    <li class="toc-item">
    <a href="unitofwork.html#doctrine-internals-explained">Doctrine Internals explained</a>


</li>
    <li class="toc-item">
    <a href="unitofwork-associations.html#association-updates-owning-side-and-inverse-side">Association Updates: Owning Side and Inverse Side</a>


</li>
    <li class="toc-item opened">
    <a href="#transactions-and-concurrency">Transactions and Concurrency</a>


</li>
    <li class="toc-item">
    <a href="batch-processing.html#batch-processing">Batch Processing</a>


</li>
    <li class="toc-item">
    <a href="dql-doctrine-query-language.html#doctrine-query-language">Doctrine Query Language</a>


</li>
    <li class="toc-item">
    <a href="query-builder.html#the-querybuilder">The QueryBuilder</a>


</li>
    <li class="toc-item">
    <a href="native-sql.html#native-sql">Native SQL</a>


</li>
    <li class="toc-item">
    <a href="change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a>


</li>
    <li class="toc-item">
    <a href="partial-objects.html#partial-objects">Partial Objects</a>


</li>
    <li class="toc-item">
    <a href="annotations-reference.html#annotations-reference">Annotations Reference</a>


</li>
    <li class="toc-item">
    <a href="attributes-reference.html#attributes-reference">Attributes Reference</a>


</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>


</li>
    <li class="toc-item">
    <a href="yaml-mapping.html#yaml-mapping">YAML Mapping</a>


</li>
    <li class="toc-item">
    <a href="php-mapping.html#php-mapping">PHP Mapping</a>


</li>
    <li class="toc-item">
    <a href="caching.html#caching">Caching</a>


</li>
    <li class="toc-item">
    <a href="improving-performance.html#improving-performance">Improving Performance</a>


</li>
    <li class="toc-item">
    <a href="tools.html#tools">Tools</a>


</li>
    <li class="toc-item">
    <a href="metadata-drivers.html#metadata-drivers">Metadata Drivers</a>


</li>
    <li class="toc-item">
    <a href="best-practices.html#best-practices">Best Practices</a>


</li>
    <li class="toc-item">
    <a href="limitations-and-known-issues.html#limitations-and-known-issues">Limitations and Known Issues</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="filters.html#filters">Filters</a>


</li>
    <li class="toc-item">
    <a href="namingstrategy.html#implementing-a-namingstrategy">Implementing a NamingStrategy</a>


</li>
    <li class="toc-item">
    <a href="advanced-configuration.html#advanced-configuration">Advanced Configuration</a>


</li>
    <li class="toc-item">
    <a href="second-level-cache.html#the-second-level-cache">The Second Level Cache</a>


</li>
    <li class="toc-item">
    <a href="security.html#security">Security</a>


</li>
    </ul>
</div><div class="toc-section">
<h2 class="toc-header">Reference</h2><div class="menu">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>


</li>
    <li class="toc-item">
    <a href="configuration.html#installation-and-configuration">Installation and Configuration</a>


</li>
    <li class="toc-item">
    <a href="faq.html#frequently-asked-questions">Frequently Asked Questions</a>


</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>


</li>
    <li class="toc-item">
    <a href="association-mapping.html#association-mapping">Association Mapping</a>


</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>


</li>
    <li class="toc-item">
    <a href="working-with-objects.html#working-with-objects">Working with Objects</a>


</li>
    <li class="toc-item">
    <a href="working-with-associations.html#working-with-associations">Working with Associations</a>


</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>


</li>
    <li class="toc-item">
    <a href="unitofwork.html#doctrine-internals-explained">Doctrine Internals explained</a>


</li>
    <li class="toc-item">
    <a href="unitofwork-associations.html#association-updates-owning-side-and-inverse-side">Association Updates: Owning Side and Inverse Side</a>


</li>
    <li class="toc-item opened">
    <a href="#transactions-and-concurrency">Transactions and Concurrency</a>


</li>
    <li class="toc-item">
    <a href="batch-processing.html#batch-processing">Batch Processing</a>


</li>
    <li class="toc-item">
    <a href="dql-doctrine-query-language.html#doctrine-query-language">Doctrine Query Language</a>


</li>
    <li class="toc-item">
    <a href="query-builder.html#the-querybuilder">The QueryBuilder</a>


</li>
    <li class="toc-item">
    <a href="native-sql.html#native-sql">Native SQL</a>


</li>
    <li class="toc-item">
    <a href="change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a>


</li>
    <li class="toc-item">
    <a href="partial-objects.html#partial-objects">Partial Objects</a>


</li>
    <li class="toc-item">
    <a href="annotations-reference.html#annotations-reference">Annotations Reference</a>


</li>
    <li class="toc-item">
    <a href="attributes-reference.html#attributes-reference">Attributes Reference</a>


</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>


</li>
    <li class="toc-item">
    <a href="yaml-mapping.html#yaml-mapping">YAML Mapping</a>


</li>
    <li class="toc-item">
    <a href="php-mapping.html#php-mapping">PHP Mapping</a>


</li>
    <li class="toc-item">
    <a href="caching.html#caching">Caching</a>


</li>
    <li class="toc-item">
    <a href="improving-performance.html#improving-performance">Improving Performance</a>


</li>
    <li class="toc-item">
    <a href="tools.html#tools">Tools</a>


</li>
    <li class="toc-item">
    <a href="metadata-drivers.html#metadata-drivers">Metadata Drivers</a>


</li>
    <li class="toc-item">
    <a href="best-practices.html#best-practices">Best Practices</a>


</li>
    <li class="toc-item">
    <a href="limitations-and-known-issues.html#limitations-and-known-issues">Limitations and Known Issues</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="filters.html#filters">Filters</a>


</li>
    <li class="toc-item">
    <a href="namingstrategy.html#implementing-a-namingstrategy">Implementing a NamingStrategy</a>


</li>
    <li class="toc-item">
    <a href="advanced-configuration.html#advanced-configuration">Advanced Configuration</a>


</li>
    <li class="toc-item">
    <a href="second-level-cache.html#the-second-level-cache">The Second Level Cache</a>


</li>
    <li class="toc-item">
    <a href="security.html#security">Security</a>


</li>
    </ul>
</div>
</div><div class="menu">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#aggregate-fields">Aggregate Fields</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#persisting-the-decorator-pattern">Persisting the Decorator Pattern</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/dql-custom-walkers.html#extending-dql-in-doctrine-orm-custom-ast-walkers">Extending DQL in Doctrine ORM: Custom AST Walkers</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#dql-user-defined-functions">DQL User Defined Functions</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-the-notify-changetracking-policy.html#implementing-the-notify-changetracking-policy">Implementing the Notify ChangeTracking Policy</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#keeping-your-modules-independent">Keeping your Modules independent</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/sql-table-prefixes.html#sql-table-prefixes">SQL-Table Prefixes</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/strategy-cookbook-introduction.html#strategy-pattern">Strategy-Pattern</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/validation-of-entities.html#validation-of-entities">Validation of Entities</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#working-with-datetime-instances">Working with DateTime Instances</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/mysql-enums.html#mysql-enums">Mysql Enums</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#advanced-field-value-conversion-using-custom-mapping-types">Advanced field value conversion using custom mapping types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#entities-in-the-session">Entities in the Session</a>


</li>
    </ul>
</div><div class="toc-section">
<h2 class="toc-header">Cookbook</h2><div class="menu">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#aggregate-fields">Aggregate Fields</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#persisting-the-decorator-pattern">Persisting the Decorator Pattern</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/dql-custom-walkers.html#extending-dql-in-doctrine-orm-custom-ast-walkers">Extending DQL in Doctrine ORM: Custom AST Walkers</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#dql-user-defined-functions">DQL User Defined Functions</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-the-notify-changetracking-policy.html#implementing-the-notify-changetracking-policy">Implementing the Notify ChangeTracking Policy</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#keeping-your-modules-independent">Keeping your Modules independent</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/sql-table-prefixes.html#sql-table-prefixes">SQL-Table Prefixes</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/strategy-cookbook-introduction.html#strategy-pattern">Strategy-Pattern</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/validation-of-entities.html#validation-of-entities">Validation of Entities</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#working-with-datetime-instances">Working with DateTime Instances</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/mysql-enums.html#mysql-enums">Mysql Enums</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#advanced-field-value-conversion-using-custom-mapping-types">Advanced field value conversion using custom mapping types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#entities-in-the-session">Entities in the Session</a>


</li>
    </ul>
</div>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://staging.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "ORM",
            "item": "https://staging.doctrine-project.org/projects/orm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://staging.doctrine-project.org/projects/doctrine-orm/en/2.16/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Transactions and Concurrency",
            "item": "https://staging.doctrine-project.org/projects/doctrine-orm/en/2.16/reference/transactions-and-concurrency.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/orm.html">ORM</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine-orm/en/2.16/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Transactions and Concurrency</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-orm/en/2.16/reference/transactions-and-concurrency.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.16.3
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/latest/reference/transactions-and-concurrency.html">
                                                        4.0

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/3.3/reference/transactions-and-concurrency.html">
                                                        3.3

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/3.2/reference/transactions-and-concurrency.html">
                                                        3.2.2

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.20/reference/transactions-and-concurrency.html">
                                                        2.20

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.19/reference/transactions-and-concurrency.html">
                                                        2.19.7

                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.1/reference/transactions-and-concurrency.html">3.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.0/reference/transactions-and-concurrency.html">3.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.18/reference/transactions-and-concurrency.html">2.18</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.17/reference/transactions-and-concurrency.html">2.17</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-orm/en/2.16/reference/transactions-and-concurrency.html">2.16</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.15/reference/transactions-and-concurrency.html">2.15</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.14/reference/transactions-and-concurrency.html">2.14</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.13/reference/transactions-and-concurrency.html">2.13</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.12/reference/transactions-and-concurrency.html">2.12</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.11/reference/transactions-and-concurrency.html">2.11</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.10/reference/transactions-and-concurrency.html">2.10</a>
                                                                                                                                                                        </div>
                                </div>
                            
                            

            <div class="toc-section">
<h2 class="toc-header">Tutorials</h2>
</div>
                <div class="toc-section">
<h2 class="toc-header">Reference</h2>
</div>
                <div class="toc-section">
<h2 class="toc-header">Cookbook</h2>
</div>
                <div class="section" id="transactions-and-concurrency">
            <h1 class="section-header ">
    <a href="#transactions-and-concurrency">
        Transactions and Concurrency
        <i class="fas fa-link"></i>
    </a>
</h1>
            <div class="section" id="transaction-demarcation">
            <a id="transactions-and-concurrency_transaction-demarcation"></a>
            <h2 class="section-header ">
    <a href="#transaction-demarcation">
        Transaction Demarcation
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Transaction demarcation is the task of defining your transaction
boundaries. Proper transaction demarcation is very important
because if not done properly it can negatively affect the
performance of your application. Many databases and database
abstraction layers like PDO by default operate in auto-commit mode,
which means that every single SQL statement is wrapped in a small
transaction. Without any explicit transaction demarcation from your
side, this quickly results in poor performance because transactions
are not cheap.</p>

            
    <p>For the most part, Doctrine ORM already takes care of proper
transaction demarcation for you: All the write operations
(INSERT/UPDATE/DELETE) are queued until <code>EntityManager#flush()</code>
is invoked which wraps all of these changes in a single
transaction.</p>

            
    <p>However, Doctrine ORM also allows (and encourages) you to take over
and control transaction demarcation yourself.</p>

            
    <p>These are two ways to deal with transactions when using the
Doctrine ORM and are now described in more detail.</p>

            <div class="section" id="approach-1-implicitly">
            <a id="transactions-and-concurrency_approach-implicitly"></a>
            <h3 class="section-header ">
    <a href="#approach-1-implicitly">
        Approach 1: Implicitly
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The first approach is to use the implicit transaction handling
provided by the Doctrine ORM EntityManager. Given the following
code snippet, without any explicit transaction demarcation:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="aa983b3d2a5caf9798bebde31e622c63c767310b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="aa983b3d2a5caf9798bebde31e622c63c767310b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-1" class="line-number-anchor" /><a href="#line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>
$user = <span class="hljs-keyword">new</span> User;
$user-&gt;setName(<span class="hljs-string">'George'</span>);
$em-&gt;persist($user);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-2" class="line-number-anchor" /><a href="#line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-3" class="line-number-anchor" /><a href="#line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-4" class="line-number-anchor" /><a href="#line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-5" class="line-number-anchor" /><a href="#line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-6" class="line-number-anchor" /><a href="#line-number-aa983b3d2a5caf9798bebde31e622c63c767310b-6">6</a></td></tr></table></div></code></pre>
            
    <p>Since we do not do any custom transaction demarcation in the above
code, <code>EntityManager#flush()</code> will begin and commit/rollback a
transaction. This behavior is made possible by the aggregation of
the DML operations by the Doctrine ORM and is sufficient if all the
data manipulation that is part of a unit of work happens through
the domain model and thus the ORM.</p>

    </div>
            <div class="section" id="approach-2-explicitly">
            <a id="transactions-and-concurrency_approach-explicitly"></a>
            <h3 class="section-header ">
    <a href="#approach-2-explicitly">
        Approach 2: Explicitly
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The explicit alternative is to use the <code>Doctrine\DBAL\Connection</code>
API directly to control the transaction boundaries. The code then
looks like this:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f4617abe0f4830df09086487723eb567794ccad4"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f4617abe0f4830df09086487723eb567794ccad4"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-1" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>
$em-&gt;getConnection()-&gt;beginTransaction(); <span class="hljs-comment">// suspend auto-commit</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ... do some work</span>
    $user = <span class="hljs-keyword">new</span> User;
    $user-&gt;setName(<span class="hljs-string">'George'</span>);
    $em-&gt;persist($user);
    $em-&gt;flush();
    $em-&gt;getConnection()-&gt;commit();
} <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">Exception</span> $e) {
    $em-&gt;getConnection()-&gt;rollBack();
    <span class="hljs-keyword">throw</span> $e;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-2" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-3" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-4" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-5" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-6" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-7" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-8" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-9" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-10" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-11" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-12" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-13" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f4617abe0f4830df09086487723eb567794ccad4-14" class="line-number-anchor" /><a href="#line-number-f4617abe0f4830df09086487723eb567794ccad4-14">14</a></td></tr></table></div></code></pre>
            
    <p>Explicit transaction demarcation is required when you want to
include custom DBAL operations in a unit of work or when you want
to make use of some methods of the <code>EntityManager</code> API that
require an active transaction. Such methods will throw a
<code>TransactionRequiredException</code> to inform you of that
requirement.</p>

            
    <p>A more convenient alternative for explicit transaction demarcation is the use
of provided control abstractions in the form of
<code>Connection#transactional($func)</code> and <code>EntityManager#transactional($func)</code>.
When used, these control abstractions ensure that you never forget to rollback
the transaction, in addition to the obvious code reduction. An example that is
functionally equivalent to the previously shown code looks as follows:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e21f15c72d3f770aa881795b301523475428d162"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e21f15c72d3f770aa881795b301523475428d162"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-1" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>
$em-&gt;transactional(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($em)</span> </span>{
    <span class="hljs-comment">// ... do some work</span>
    $user = <span class="hljs-keyword">new</span> User;
    $user-&gt;setName(<span class="hljs-string">'George'</span>);
    $em-&gt;persist($user);
});</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-2" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-3" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-4" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-5" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-6" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-7" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e21f15c72d3f770aa881795b301523475428d162-8" class="line-number-anchor" /><a href="#line-number-e21f15c72d3f770aa881795b301523475428d162-8">8</a></td></tr></table></div></code></pre>
                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-primary mr-2"></i></td>
            <td>
                                                
    <p>For historical reasons, <code>EntityManager#transactional($func)</code> will return
<code>true</code> whenever the return value of <code>$func</code> is loosely false.
Some examples of this include <code>array()</code>, <code>&quot;0&quot;</code>, <code>&quot;&quot;</code>, <code>0</code>, and
<code>null</code>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>The difference between <code>Connection#transactional($func)</code> and
<code>EntityManager#transactional($func)</code> is that the latter
abstraction flushes the <code>EntityManager</code> prior to transaction
commit and in case of an exception the <code>EntityManager</code> gets closed
in addition to the transaction rollback.</p>

    </div>
            <div class="section" id="exception-handling">
            <a id="transactions-and-concurrency_exception-handling"></a>
            <h3 class="section-header ">
    <a href="#exception-handling">
        Exception Handling
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>When using implicit transaction demarcation and an exception occurs
during <code>EntityManager#flush()</code>, the transaction is automatically
rolled back and the <code>EntityManager</code> closed.</p>

            
    <p>When using explicit transaction demarcation and an exception
occurs, the transaction should be rolled back immediately and the
<code>EntityManager</code> closed by invoking <code>EntityManager#close()</code> and
subsequently discarded, as demonstrated in the example above. This
can be handled elegantly by the control abstractions shown earlier.
Note that when catching <code>Exception</code> you should generally re-throw
the exception. If you intend to recover from some exceptions, catch
them explicitly in earlier catch blocks (but do not forget to
rollback the transaction and close the <code>EntityManager</code> there as
well). All other best practices of exception handling apply
similarly (i.e. either log or re-throw, not both, etc.).</p>

            
    <p>As a result of this procedure, all previously managed or removed
instances of the <code>EntityManager</code> become detached. The state of
the detached objects will be the state at the point at which the
transaction was rolled back. The state of the objects is in no way
rolled back and thus the objects are now out of synch with the
database. The application can continue to use the detached objects,
knowing that their state is potentially no longer accurate.</p>

            
    <p>If you intend to start another unit of work after an exception has
occurred you should do that with a new <code>EntityManager</code>.</p>

    </div>
    </div>
            <div class="section" id="locking-support">
            <a id="transactions-and-concurrency_locking-support"></a>
            <h2 class="section-header ">
    <a href="#locking-support">
        Locking Support
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine ORM offers support for Pessimistic- and Optimistic-locking
strategies natively. This allows to take very fine-grained control
over what kind of locking is required for your Entities in your
application.</p>

            <div class="section" id="optimistic-locking">
            <a id="transactions-and-concurrency_optimistic-locking"></a>
            <h3 class="section-header ">
    <a href="#optimistic-locking">
        Optimistic Locking
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Database transactions are fine for concurrency control during a
single request. However, a database transaction should not span
across requests, the so-called &quot;user think time&quot;. Therefore a
long-running &quot;business transaction&quot; that spans multiple requests
needs to involve several database transactions. Thus, database
transactions alone can no longer control concurrency during such a
long-running business transaction. Concurrency control becomes the
partial responsibility of the application itself.</p>

            
    <p>Doctrine has integrated support for automatic optimistic locking
via a version field. In this approach any entity that should be
protected against concurrent modifications during long-running
business transactions gets a version field that is either a simple
number (mapping type: integer) or a timestamp (mapping type:
datetime). When changes to such an entity are persisted at the end
of a long-running conversation the version of the entity is
compared to the version in the database and if they don&#039;t match, an
<code>OptimisticLockException</code> is thrown, indicating that the entity
has been modified by someone else already.</p>

            
    <p>You designate a version field in an entity as follows. In this
example we&#039;ll use an integer.</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-4">
                    <button role="tab" type="button" data-language="attribute"
                    aria-controls="configuration-block-tabpanel-4c295ca35425ce4058908af90414ee92" aria-selected="true"
                    data-active="true" >
                <span>Attribute</span>
            </button>
                    <button role="tab" type="button" data-language="annotation"
                    aria-controls="configuration-block-tabpanel-6dfa82994889f98434f09e2c047a732a" aria-selected="false"
                     tabindex="-1">
                <span>Annotation</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                    aria-controls="configuration-block-tabpanel-bf1fcb2d6f782f6e56150571435cec72" aria-selected="false"
                     tabindex="-1">
                <span>Xml</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-5614fc4dad93622cd5084d4938f01faf" aria-selected="false"
                     tabindex="-1">
                <span>Yaml</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-4c295ca35425ce4058908af90414ee92" aria-label="Attribute" class="configuration-codeblock" data-language="attribute" style="">
            <pre class="code-block-table"><code class="attribute"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2d929cc16973736812494509a09ab890cacd9d57"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2d929cc16973736812494509a09ab890cacd9d57"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-1" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">#[Version, Column(type: 'integer')]</span>
    <span class="hljs-keyword">private</span> int $version;
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-2" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-3" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-4" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-5" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-6" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-7" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d929cc16973736812494509a09ab890cacd9d57-8" class="line-number-anchor" /><a href="#line-number-2d929cc16973736812494509a09ab890cacd9d57-8">8</a></td></tr></table></div></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-6dfa82994889f98434f09e2c047a732a" aria-label="Annotation" class="configuration-codeblock" data-language="annotation" style="display: none">
            <pre class="code-block-table"><code class="annotation"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="adac594c8949d36871ac172b356f8b4f03defb03"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="adac594c8949d36871ac172b356f8b4f03defb03"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-1" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">/** <span class="hljs-doctag">@Version</span> <span class="hljs-doctag">@Column</span>(type="integer") */</span>
    <span class="hljs-keyword">private</span> int $version;
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-2" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-3" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-4" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-5" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-6" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-7" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adac594c8949d36871ac172b356f8b4f03defb03-8" class="line-number-anchor" /><a href="#line-number-adac594c8949d36871ac172b356f8b4f03defb03-8">8</a></td></tr></table></div></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-bf1fcb2d6f782f6e56150571435cec72" aria-label="Xml" class="configuration-codeblock" data-language="xml" style="display: none">
            <pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="3a4b2894675ed13d6781ca0983ccd945a07a0010"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="3a4b2894675ed13d6781ca0983ccd945a07a0010"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-1" class="line-number-anchor" /><a href="#line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">entity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"version"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"integer"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"true"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">entity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-2" class="line-number-anchor" /><a href="#line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-3" class="line-number-anchor" /><a href="#line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-4" class="line-number-anchor" /><a href="#line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-5" class="line-number-anchor" /><a href="#line-number-3a4b2894675ed13d6781ca0983ccd945a07a0010-5">5</a></td></tr></table></div></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5614fc4dad93622cd5084d4938f01faf" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="display: none">
            <pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="93084e6dc1d7071a1122ee50f7d11c13587fd300"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="93084e6dc1d7071a1122ee50f7d11c13587fd300"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-1" class="line-number-anchor" /><a href="#line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-attr">User:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">entity</span>
  <span class="hljs-attr">fields:</span>
    <span class="hljs-attr">version:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
      <span class="hljs-attr">version:</span> <span class="hljs-literal">true</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-2" class="line-number-anchor" /><a href="#line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-3" class="line-number-anchor" /><a href="#line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-4" class="line-number-anchor" /><a href="#line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-5" class="line-number-anchor" /><a href="#line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-6" class="line-number-anchor" /><a href="#line-number-93084e6dc1d7071a1122ee50f7d11c13587fd300-6">6</a></td></tr></table></div></code></pre>
        </div>
    </div>
            
    <p>Alternatively a datetime type can be used (which maps to a SQL
timestamp or datetime):</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-4">
                    <button role="tab" type="button" data-language="attribute"
                    aria-controls="configuration-block-tabpanel-cb1ded4190cd387e890583cef56f1198" aria-selected="true"
                    data-active="true" >
                <span>Attribute</span>
            </button>
                    <button role="tab" type="button" data-language="annotation"
                    aria-controls="configuration-block-tabpanel-018c3d8fac056c9611bf685ff9a48601" aria-selected="false"
                     tabindex="-1">
                <span>Annotation</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                    aria-controls="configuration-block-tabpanel-079d7997f1a0a5b6ba528072724cbc85" aria-selected="false"
                     tabindex="-1">
                <span>Xml</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-22b8fe347775a12f2cfa386046b78fe8" aria-selected="false"
                     tabindex="-1">
                <span>Yaml</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-cb1ded4190cd387e890583cef56f1198" aria-label="Attribute" class="configuration-codeblock" data-language="attribute" style="">
            <pre class="code-block-table"><code class="attribute"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e8fdf6f99946c8e8cbeb7467af351f580d040015"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e8fdf6f99946c8e8cbeb7467af351f580d040015"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-1" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">#[Version, Column(type: 'datetime')]</span>
    <span class="hljs-keyword">private</span> DateTime $version;
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-2" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-3" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-4" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-5" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-6" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-7" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-8" class="line-number-anchor" /><a href="#line-number-e8fdf6f99946c8e8cbeb7467af351f580d040015-8">8</a></td></tr></table></div></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-018c3d8fac056c9611bf685ff9a48601" aria-label="Annotation" class="configuration-codeblock" data-language="annotation" style="display: none">
            <pre class="code-block-table"><code class="annotation"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="16e7a21c3f0c2c82567200a64c37f1d844fa91a8"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="16e7a21c3f0c2c82567200a64c37f1d844fa91a8"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-1" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">/** <span class="hljs-doctag">@Version</span> <span class="hljs-doctag">@Column</span>(type="datetime") */</span>
    <span class="hljs-keyword">private</span> DateTime $version;
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-2" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-3" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-4" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-5" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-6" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-7" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-8" class="line-number-anchor" /><a href="#line-number-16e7a21c3f0c2c82567200a64c37f1d844fa91a8-8">8</a></td></tr></table></div></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-079d7997f1a0a5b6ba528072724cbc85" aria-label="Xml" class="configuration-codeblock" data-language="xml" style="display: none">
            <pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9c3a6b2f07164137a5c9dee94b5808617b9e18eb"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9c3a6b2f07164137a5c9dee94b5808617b9e18eb"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-1" class="line-number-anchor" /><a href="#line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">entity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"version"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"datetime"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"true"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">entity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-2" class="line-number-anchor" /><a href="#line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-3" class="line-number-anchor" /><a href="#line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-4" class="line-number-anchor" /><a href="#line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-5" class="line-number-anchor" /><a href="#line-number-9c3a6b2f07164137a5c9dee94b5808617b9e18eb-5">5</a></td></tr></table></div></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-22b8fe347775a12f2cfa386046b78fe8" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="display: none">
            <pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="3d65a48acb359de014405df37b3d2a6e8faf17af"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="3d65a48acb359de014405df37b3d2a6e8faf17af"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-1" class="line-number-anchor" /><a href="#line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-attr">User:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">entity</span>
  <span class="hljs-attr">fields:</span>
    <span class="hljs-attr">version:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">datetime</span>
      <span class="hljs-attr">version:</span> <span class="hljs-literal">true</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-2" class="line-number-anchor" /><a href="#line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-3" class="line-number-anchor" /><a href="#line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-4" class="line-number-anchor" /><a href="#line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-5" class="line-number-anchor" /><a href="#line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-6" class="line-number-anchor" /><a href="#line-number-3d65a48acb359de014405df37b3d2a6e8faf17af-6">6</a></td></tr></table></div></code></pre>
        </div>
    </div>
            
    <p>Version numbers (not timestamps) should however be preferred as
they can not potentially conflict in a highly concurrent
environment, unlike timestamps where this is a possibility,
depending on the resolution of the timestamp on the particular
database platform.</p>

            
    <p>When a version conflict is encountered during
<code>EntityManager#flush()</code>, an <code>OptimisticLockException</code> is thrown
and the active transaction rolled back (or marked for rollback).
This exception can be caught and handled. Potential responses to an
OptimisticLockException are to present the conflict to the user or
to refresh or reload objects in a new transaction and then retrying
the transaction.</p>

            
    <p>With PHP promoting a share-nothing architecture, the time between
showing an update form and actually modifying the entity can in the
worst scenario be as long as your applications session timeout. If
changes happen to the entity in that time frame you want to know
directly when retrieving the entity that you will hit an optimistic
locking exception:</p>

            
    <p>You can always verify the version of an entity during a request
either when calling <code>EntityManager#find()</code>:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="29b49ccb2dc90101e7f94bb8d041d260d3868e60"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="29b49ccb2dc90101e7f94bb8d041d260d3868e60"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-1" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-1">1</a></td><td class="code-line" rowspan="16"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">LockMode</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">OptimisticLockException</span>;

$theEntityId = <span class="hljs-number">1</span>;
$expectedVersion = <span class="hljs-number">184</span>;

<span class="hljs-keyword">try</span> {
    $entity = $em-&gt;find(<span class="hljs-string">'User'</span>, $theEntityId, LockMode::OPTIMISTIC, $expectedVersion);

    <span class="hljs-comment">// do the work</span>

    $em-&gt;flush();
} <span class="hljs-keyword">catch</span>(OptimisticLockException $e) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Sorry, but someone else has already changed this entity. Please apply the changes again!"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-2" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-3" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-4" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-5" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-6" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-7" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-8" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-9" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-10" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-11" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-12" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-13" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-14" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-15" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-16" class="line-number-anchor" /><a href="#line-number-29b49ccb2dc90101e7f94bb8d041d260d3868e60-16">16</a></td></tr></table></div></code></pre>
            
    <p>Or you can use <code>EntityManager#lock()</code> to find out:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c1a7bb07687eaf61615b5269f8d435b8f11a0b36"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c1a7bb07687eaf61615b5269f8d435b8f11a0b36"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-1" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-1">1</a></td><td class="code-line" rowspan="16"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">LockMode</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">OptimisticLockException</span>;

$theEntityId = <span class="hljs-number">1</span>;
$expectedVersion = <span class="hljs-number">184</span>;

$entity = $em-&gt;find(<span class="hljs-string">'User'</span>, $theEntityId);

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// assert version</span>
    $em-&gt;lock($entity, LockMode::OPTIMISTIC, $expectedVersion);

} <span class="hljs-keyword">catch</span>(OptimisticLockException $e) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Sorry, but someone else has already changed this entity. Please apply the changes again!"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-2" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-3" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-4" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-5" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-6" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-7" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-8" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-9" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-10" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-11" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-12" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-13" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-14" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-15" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-16" class="line-number-anchor" /><a href="#line-number-c1a7bb07687eaf61615b5269f8d435b8f11a0b36-16">16</a></td></tr></table></div></code></pre>
            <div class="section" id="important-implementation-notes">
            <h4 class="section-header ">
    <a href="#important-implementation-notes">
        Important Implementation Notes
        <i class="fas fa-link"></i>
    </a>
</h4>
            
    <p>You can easily get the optimistic locking workflow wrong if you
compare the wrong versions. Say you have Alice and Bob editing a
hypothetical blog post:</p>

            

<ul>
    <li class="dash">Alice reads the headline of the blog post being &quot;Foo&quot;, at
optimistic lock version 1 (GET Request)</li>
    <li class="dash">Bob reads the headline of the blog post being &quot;Foo&quot;, at
optimistic lock version 1 (GET Request)</li>
    <li class="dash">Bob updates the headline to &quot;Bar&quot;, upgrading the optimistic lock
version to 2 (POST Request of a Form)</li>
    <li class="dash">Alice updates the headline to &quot;Baz&quot;, ... (POST Request of a
Form)</li>
</ul>

            
    <p>Now at the last stage of this scenario the blog post has to be read
again from the database before Alice&#039;s headline can be applied. At
this point you will want to check if the blog post is still at
version 1 (which it is not in this scenario).</p>

            
    <p>Using optimistic locking correctly, you <em>have</em> to add the version
as an additional hidden field (or into the SESSION for more
safety). Otherwise you cannot verify the version is still the one
being originally read from the database when Alice performed her
GET request for the blog post. If this happens you might see lost
updates you wanted to prevent with Optimistic Locking.</p>

            
    <p>See the example code, The form (GET Request):</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="52f5f29ff33eada51684a7387a23fad30b1c11b5"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="52f5f29ff33eada51684a7387a23fad30b1c11b5"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-1" class="line-number-anchor" /><a href="#line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-meta">&lt;?php</span>
$post = $em-&gt;find(<span class="hljs-string">'BlogPost'</span>, <span class="hljs-number">123456</span>);

<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;input type="hidden" name="id" value="'</span> . $post-&gt;getId() . <span class="hljs-string">'" /&gt;'</span>;
<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;input type="hidden" name="version" value="'</span> . $post-&gt;getCurrentVersion() . <span class="hljs-string">'" /&gt;'</span>;</td></tr>
<tr><td class="line-number noselect"><a name="line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-2" class="line-number-anchor" /><a href="#line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-3" class="line-number-anchor" /><a href="#line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-4" class="line-number-anchor" /><a href="#line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-5" class="line-number-anchor" /><a href="#line-number-52f5f29ff33eada51684a7387a23fad30b1c11b5-5">5</a></td></tr></table></div></code></pre>
            
    <p>And the change headline action (POST Request):</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e31b01bebd91216b3613fc9a34c6274b5d38eed6"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e31b01bebd91216b3613fc9a34c6274b5d38eed6"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-1" class="line-number-anchor" /><a href="#line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-meta">&lt;?php</span>
$postId = (int)$_GET[<span class="hljs-string">'id'</span>];
$postVersion = (int)$_GET[<span class="hljs-string">'version'</span>];

$post = $em-&gt;find(<span class="hljs-string">'BlogPost'</span>, $postId, \Doctrine\DBAL\LockMode::OPTIMISTIC, $postVersion);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-2" class="line-number-anchor" /><a href="#line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-3" class="line-number-anchor" /><a href="#line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-4" class="line-number-anchor" /><a href="#line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-5" class="line-number-anchor" /><a href="#line-number-e31b01bebd91216b3613fc9a34c6274b5d38eed6-5">5</a></td></tr></table></div></code></pre>
    </div>
    </div>
            <div class="section" id="pessimistic-locking">
            <a id="transactions-and-concurrency_pessimistic-locking"></a>
            <h3 class="section-header ">
    <a href="#pessimistic-locking">
        Pessimistic Locking
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine ORM supports Pessimistic Locking at the database level. No
attempt is being made to implement pessimistic locking inside
Doctrine, rather vendor-specific and ANSI-SQL commands are used to
acquire row-level locks. Every Entity can be part of a pessimistic
lock, there is no special metadata required to use this feature.</p>

            
    <p>However for Pessimistic Locking to work you have to disable the
Auto-Commit Mode of your Database and start a transaction around
your pessimistic lock use-case using the &quot;Approach 2: Explicit
Transaction Demarcation&quot; described above. Doctrine ORM will throw an
Exception if you attempt to acquire an pessimistic lock and no
transaction is running.</p>

            
    <p>Doctrine ORM currently supports two pessimistic lock modes:</p>

            

<ul>
    <li class="dash">Pessimistic Write
(<code>Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE</code>), locks the
underlying database rows for concurrent Read and Write Operations.</li>
    <li class="dash">Pessimistic Read (<code>Doctrine\DBAL\LockMode::PESSIMISTIC_READ</code>),
locks other concurrent requests that attempt to update or lock rows
in write mode.</li>
</ul>

            
    <p>You can use pessimistic locks in four different scenarios:</p>

            
    
<ol start="1" type="1">
    <li value="1">Using
<code>EntityManager#find($className, $id, \Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE)</code>
or
<code>EntityManager#find($className, $id, \Doctrine\DBAL\LockMode::PESSIMISTIC_READ)</code></li>
    <li value="2">Using
<code>EntityManager#lock($entity, \Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE)</code>
or
<code>EntityManager#lock($entity, \Doctrine\DBAL\LockMode::PESSIMISTIC_READ)</code></li>
    <li value="3">Using
<code>EntityManager#refresh($entity, \Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE)</code>
or
<code>EntityManager#refresh($entity, \Doctrine\DBAL\LockMode::PESSIMISTIC_READ)</code></li>
    <li value="4">Using
<code>Query#setLockMode(\Doctrine\DBAL\LockMode::PESSIMISTIC_WRITE)</code>
or
<code>Query#setLockMode(\Doctrine\DBAL\LockMode::PESSIMISTIC_READ)</code></li>
</ol>

    </div>
    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?ff3b61"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'orm';
            var versionSlug = '2.16';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search ORM 2.16'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
