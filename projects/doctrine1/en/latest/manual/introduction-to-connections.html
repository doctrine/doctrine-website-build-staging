<!DOCTYPE html>
<html>
    <head>
        <title>        Introduction to Connections - Doctrine Doctrine1 ORM (Doctrine1)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine1 ORM Documentation: Introduction to Connections ">

        <meta name="keywords" content="                    php,doctrine1,orm,database,documentation,introduction,to,connections
    ">

                    <meta name="robots" content="noindex">
        
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/introduction-to-connections.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?c900c9"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/introduction-to-connections.html" />
        <meta property="og:title" content="        Introduction to Connections - Doctrine Doctrine1 ORM (Doctrine1)
    " />
        <meta property="og:description" content="Doctrine Doctrine1 ORM Documentation: Introduction to Connections " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Introduction to Connections",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine1/edit/master/docs/en/manual/introduction-to-connections.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://staging.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Doctrine1",
            "item": "https://staging.doctrine-project.org/projects/doctrine1.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://staging.doctrine-project.org/projects/doctrine1/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Introduction to Connections",
            "item": "https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/introduction-to-connections.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine1/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Introduction to Connections</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>This project is no longer maintained and has been archived.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine1/en/latest/manual/introduction-to-connections.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item active" href="/projects/doctrine1/en/latest/manual/introduction-to-connections.html">
                                                        master

                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                                                                                    </div>
                                </div>
                            
                            

            <div class="section" id="introduction-to-connections">
            <h1 class="section-header ">
    <a href="#introduction-to-connections">
        Introduction to Connections
        <i class="fas fa-link"></i>
    </a>
</h1>
            <div class="section" id="dsn-the-data-source-name">
            <h2 class="section-header ">
    <a href="#dsn-the-data-source-name">
        DSN, the Data Source Name
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>In order to connect to a database through Doctrine, you have to create a
valid DSN (Data Source Name).</p>

            
    <p>Doctrine supports both PEAR DB/MDB2 like data source names as well as
PDO style data source names. The following section deals with PEAR like
data source names. If you need more info about the PDO-style data source
names see the documentation on <a href="http://www.php.net/PDO">PDO</a>.</p>

            <div class="section" id="main-parts">
            <h3 class="section-header ">
    <a href="#main-parts">
        Main Parts
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The DSN consists in the following parts:</p>

            <table>
                <thead>
            <tr>
                            <th>DSN part</th>
                            <th>Description</th>
                    </tr>
        </thead>
    <tbody>
    <tr>
            <td><code>phptype</code></td>
            <td>Database backend used in PHP (i.e. mysql, pgsql etc.)</td>
    </tr>
    <tr>
            <td><code>dbsyntax</code></td>
            <td>Database used with regards to SQL syntax etc</td>
    </tr>
    <tr>
            <td><code>protocol</code></td>
            <td>Communication protocol to use ( i.e. tcp, unix etc.)</td>
    </tr>
    <tr>
            <td><code>hostspec</code></td>
            <td>Host specification (hostname[:port]) ||</td>
    </tr>
    <tr>
            <td><code>database</code></td>
            <td>Database to use on the DBMS server</td>
    </tr>
    <tr>
            <td><code>username</code></td>
            <td>User name for login</td>
    </tr>
    <tr>
            <td><code>password</code></td>
            <td>Password for login</td>
    </tr>
    <tr>
            <td><code>proto_opts</code></td>
            <td>Maybe used with protocol</td>
    </tr>
    <tr>
            <td><code>option</code></td>
            <td>Additional connection options in URI query string
format. Options are separated by ampersand (<code>&amp;</code>).
The following section shows a non-complete list of
options.</td>
    </tr>
</tbody>
</table>
            <div class="section" id="options">
            <h4 class="section-header ">
    <a href="#options">
        Options
        <i class="fas fa-link"></i>
    </a>
</h4>
            <table>
                <thead>
            <tr>
                            <th>Name</th>
                            <th>Description</th>
                    </tr>
        </thead>
    <tbody>
    <tr>
            <td><code>charset</code></td>
            <td>Some backends support setting the client charset.</td>
    </tr>
    <tr>
            <td><code>new_link</code></td>
            <td>Some RDBMS do not create new connections when connecting to the
same host multiple times. This option will attempt to force a new
connection.</td>
    </tr>
</tbody>
</table>
    </div>
    </div>
            <div class="section" id="providing-the-dsn">
            <h3 class="section-header ">
    <a href="#providing-the-dsn">
        Providing the DSN
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The DSN can either be provided as an associative array or as a string.
The string format of the supplied DSN is in its fullest form:</p>

            <pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="21b833ec0234730e8655c1955c5c9ffdbd3d3cf7"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="21b833ec0234730e8655c1955c5c9ffdbd3d3cf7"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-21b833ec0234730e8655c1955c5c9ffdbd3d3cf7-1" class="line-number-anchor" /><a href="#line-number-21b833ec0234730e8655c1955c5c9ffdbd3d3cf7-1">1</a></td><td class="code-line" rowspan="1">phptype(dbsyntax)://username:password@protocol+hostspec/database?option=value</td></tr></table></div></code></pre>
            
    <p>Most variations are allowed:</p>

            <pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="365ef9587ce8be5c7c650002db2ce13be4d50f63"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="365ef9587ce8be5c7c650002db2ce13be4d50f63"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-1" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-1">1</a></td><td class="code-line" rowspan="7">phptype://username:password@protocol+hostspec:110//usr/db_file.db
phptype://username:password@hostspec/database
phptype://username:password@hostspec
phptype://username@hostspec
phptype://hostspec/database phptype://hostspec phptype:///database
phptype:///database?option=value&anotheroption=anothervalue
phptype(dbsyntax) phptype</td></tr>
<tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-2" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-3" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-4" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-5" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-6" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-7" class="line-number-anchor" /><a href="#line-number-365ef9587ce8be5c7c650002db2ce13be4d50f63-7">7</a></td></tr></table></div></code></pre>
            
    <p>The currently supported PDO database drivers are:</p>

            <table>
                <thead>
            <tr>
                            <th>Driver name</th>
                            <th>Supported databases</th>
                    </tr>
        </thead>
    <tbody>
    <tr>
            <td><code>fbsql</code></td>
            <td>FrontBase</td>
    </tr>
    <tr>
            <td><code>ibase</code></td>
            <td>InterBase / Firebird (requires PHP 5)</td>
    </tr>
    <tr>
            <td><code>mssql</code></td>
            <td>Microsoft SQL Server (NOT for Sybase. Compile PHP --with-mssql)</td>
    </tr>
    <tr>
            <td><code>mysql</code></td>
            <td>MySQL</td>
    </tr>
    <tr>
            <td><code>mysqli</code></td>
            <td>MySQL (supports new authentication protocol) (requires PHP 5)</td>
    </tr>
    <tr>
            <td><code>oci</code></td>
            <td>Oracle 7/8/9/10</td>
    </tr>
    <tr>
            <td><code>pgsql</code></td>
            <td>PostgreSQL</td>
    </tr>
    <tr>
            <td><code>querysim</code></td>
            <td>QuerySim</td>
    </tr>
    <tr>
            <td><code>sqlite</code></td>
            <td>SQLite 2</td>
    </tr>
</tbody>
</table>
            
    <p>A second DSN format supported is</p>

            <pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="48c034f9342a606b8ea28f1ca20d5fb5b7d2029d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="48c034f9342a606b8ea28f1ca20d5fb5b7d2029d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-48c034f9342a606b8ea28f1ca20d5fb5b7d2029d-1" class="line-number-anchor" /><a href="#line-number-48c034f9342a606b8ea28f1ca20d5fb5b7d2029d-1">1</a></td><td class="code-line" rowspan="1">phptype(syntax)://user:pass@protocol(proto_opts)/database</td></tr></table></div></code></pre>
            
    <p>If your database, option values, username or password contain characters
used to delineate DSN parts, you can escape them via URI hex encodings:</p>

            <table>
                <thead>
            <tr>
                            <th>Character</th>
                            <th>Hex Code</th>
                    </tr>
        </thead>
    <tbody>
    <tr>
            <td><code>:</code></td>
            <td><code>%3a</code></td>
    </tr>
    <tr>
            <td><code>/</code></td>
            <td><code>%2f</code></td>
    </tr>
    <tr>
            <td><code>@</code></td>
            <td><code>%40</code></td>
    </tr>
    <tr>
            <td><code>+</code></td>
            <td><code>%2b</code></td>
    </tr>
    <tr>
            <td><code>(</code></td>
            <td><code>%28</code></td>
    </tr>
    <tr>
            <td><code>)</code></td>
            <td><code>%29</code></td>
    </tr>
    <tr>
            <td><code>?</code></td>
            <td><code>%3f</code></td>
    </tr>
    <tr>
            <td><code>=</code></td>
            <td><code>%3d</code></td>
    </tr>
    <tr>
            <td><code>&amp;</code></td>
            <td><code>%26</code></td>
    </tr>
</tbody>
</table>
            
    <p>Please note, that some features may be not supported by all database drivers.</p>

    </div>
            <div class="section" id="examples">
            <h3 class="section-header ">
    <a href="#examples">
        Examples
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    
<ol>
    <li>
    <p>Connect to database through a socket</p>
<blockquote><pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5f331b49f7b1d386d65379e69b4fcb2eb5c1ef1c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5f331b49f7b1d386d65379e69b4fcb2eb5c1ef1c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5f331b49f7b1d386d65379e69b4fcb2eb5c1ef1c-1" class="line-number-anchor" /><a href="#line-number-5f331b49f7b1d386d65379e69b4fcb2eb5c1ef1c-1">1</a></td><td class="code-line" rowspan="1">mysql://user@unix(/path/to/socket)/pear</td></tr></table></div></code></pre></blockquote></li>
    <li>
    <p>Connect to database on a non standard port</p>
<blockquote><pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1c379765a8d73234abbd19b1311985676a437f8e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1c379765a8d73234abbd19b1311985676a437f8e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1c379765a8d73234abbd19b1311985676a437f8e-1" class="line-number-anchor" /><a href="#line-number-1c379765a8d73234abbd19b1311985676a437f8e-1">1</a></td><td class="code-line" rowspan="1">pgsql://user:pass@tcp(localhost:5555)/pear</td></tr></table></div></code></pre>            <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>If you use, the IP address <code>127.0.0.1</code>, the port parameter is ignored
(default: 3306).</p>

            </td>
        </tr>
        </tbody>
    </table>
</div></blockquote></li>
    <li>
    <p>Connect to SQLite on a Unix machine using options</p>
<blockquote><pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="daf833673e8d4fb36844fb36d5bae93168f05bfc"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="daf833673e8d4fb36844fb36d5bae93168f05bfc"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-daf833673e8d4fb36844fb36d5bae93168f05bfc-1" class="line-number-anchor" /><a href="#line-number-daf833673e8d4fb36844fb36d5bae93168f05bfc-1">1</a></td><td class="code-line" rowspan="1">sqlite:////full/unix/path/to/file.db?mode=0666</td></tr></table></div></code></pre></blockquote></li>
    <li>
    <p>Connect to SQLite on a Windows machine using options</p>
<blockquote><pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="8e29fbcb9dd0c3e0e29f92bbcf20ea95a74f31f0"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="8e29fbcb9dd0c3e0e29f92bbcf20ea95a74f31f0"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-8e29fbcb9dd0c3e0e29f92bbcf20ea95a74f31f0-1" class="line-number-anchor" /><a href="#line-number-8e29fbcb9dd0c3e0e29f92bbcf20ea95a74f31f0-1">1</a></td><td class="code-line" rowspan="1">sqlite:///c:/full/windows/path/to/file.db?mode=0666</td></tr></table></div></code></pre></blockquote></li>
    <li>
    <p>Connect to MySQLi using SSL</p>
<blockquote><pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fceab5b10af653c6eb807e3524357ee2daa38b7d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fceab5b10af653c6eb807e3524357ee2daa38b7d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fceab5b10af653c6eb807e3524357ee2daa38b7d-1" class="line-number-anchor" /><a href="#line-number-fceab5b10af653c6eb807e3524357ee2daa38b7d-1">1</a></td><td class="code-line" rowspan="1">mysqli://user:pass@localhost/pear?key=client-key.pem&cert=client-cert.pem</td></tr></table></div></code></pre></blockquote></li>
</ol>

    </div>
    </div>
            <div class="section" id="opening-new-connections">
            <h2 class="section-header ">
    <a href="#opening-new-connections">
        Opening New Connections
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Opening a new database connection in Doctrine is very easy. If you wish
to use <a href="http://www.php.net/PDO">PDO</a> you can just initialize a new PDO
object.</p>

            
    <p>Remember our <code>bootstrap.php</code> file we created in the <a href="getting-started.html">Getting Started</a> chapter? Under the code where we registered the
Doctrine autoloader we are going to instantiate our new connection:</p>

            <div class="console"><pre><code class="console">// bootstrap.php
<span class="noselect">$ </span>dsn = 'mysql:dbname=testdb;host=127.0.0.1';
<span class="noselect">$ </span>user = 'dbuser';
<span class="noselect">$ </span>password = 'dbpass';

<span class="noselect">$ </span>dbh = new PDO($dsn, $user, $password);
<span class="noselect">$ </span>conn = Doctrine_Manager::connection($dbh);</code></pre></div>
            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>Directly passing a PDO instance to <code>Doctrine_Manager::connection</code> will not
allow Doctrine to be aware of the username and password for the connection,
since their is no way to retrieve it from an existing PDO instance. The
username and password is required in order for Doctrine to be able to create
and drop databases. To get around this you can manually set the username and
password option directly on the <code>$conn</code> object.</p>
<div class="console"><pre><code class="console">// bootstrap.php
<span class="noselect">$ </span>conn->setOption('username', $user);
<span class="noselect">$ </span>conn->setOption('password', $password);</code></pre></div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="lazy-database-connecting">
            <h2 class="section-header ">
    <a href="#lazy-database-connecting">
        Lazy Database Connecting
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Lazy-connecting to database can save a lot of resources. There might be
many times where you don&#039;t need an actual database connection, hence its
always recommended to use lazy-connecting (that means Doctrine will only
connect to database when needed).</p>

            
    <p>This feature can be very useful when using for example page caching,
hence not actually needing a database connection on every request.
Remember connecting to database is an expensive operation.</p>

            
    <p>In the example below we will show you when you create a new Doctrine
connection, the connection to the database isn&#039;t created until it is
actually needed.</p>

            <div class="console"><pre><code class="console">// bootstrap.php
// At this point no actual connection to the database is created
<span class="noselect">$ </span>conn = Doctrine_Manager::connection('mysql://username:password@localhost/test');

// The first time the connection is needed, it is instantiated
// This query triggers the connection to be created
<span class="noselect">$ </span>conn->execute('SHOW TABLES');</code></pre></div>
    </div>
            <div class="section" id="testing-your-connection">
            <h2 class="section-header ">
    <a href="#testing-your-connection">
        Testing your Connection
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>After reading the previous sections of this chapter, you should now know
how to create a connection. So, lets modify our bootstrap file to
include the initialization of a connection. For this example we will
just be using a sqlite memory database but you can use whatever type of
database connection you prefer.</p>

            
    <p>Add your database connection to <code>bootstrap.php</code> and it should look
something like the following:</p>

            <div class="console"><pre><code class="console">/* Bootstrap Doctrine.php, register autoloader and specify
   configuration attributes */

require_once('../doctrine/branches/1.2/lib/Doctrine.php');
spl_autoload_register(array('Doctrine', 'autoload'));
<span class="noselect">$ </span>manager = Doctrine_Manager::getInstance();

<span class="noselect">$ </span>conn = Doctrine_Manager::connection('sqlite::memory:', 'doctrine');
</code></pre></div>
            
    <p>To test the connection lets modify our <code>test.php</code> script and perform a
small test. Since we create a variable name <code>$conn</code>, that variable is
available to the test script so lets setup a small test to make sure our
connection is working:</p>

            
    <p>First lets create a test table and insert a record:</p>

            <div class="console"><pre><code class="console">// test.php
<span class="noselect">$ </span>conn->export->createTable('test', array('name' => array('type' => 'string')));
<span class="noselect">$ </span>conn->execute('INSERT INTO test (name) VALUES (?)', array('jwage'));
</code></pre></div>
            
    <p>Now lets execute a simple <code>SELECT</code> query from the <code>test</code> table we
just created to make sure the data was inserted and that we can retrieve
it:</p>

            <div class="console"><pre><code class="console">// test.php
<span class="noselect">$ </span>stmt = $conn->prepare('SELECT \* FROM test');
<span class="noselect">$ </span>stmt->execute();
<span class="noselect">$ </span>results = $stmt->fetchAll();
print_r($results);
</code></pre></div>
            
    <p>Execute <code>test.php</code> from your terminal and you should see:</p>

            <pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="886764022bd92df89848d5a5adeaa812458a7b40"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="886764022bd92df89848d5a5adeaa812458a7b40"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-1" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-1">1</a></td><td class="code-line" rowspan="7">php test.php
Array(
  [0] => Array(
    [name] => jwage,
    [0] => jwage
  )
)</td></tr>
<tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-2" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-3" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-4" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-5" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-6" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-886764022bd92df89848d5a5adeaa812458a7b40-7" class="line-number-anchor" /><a href="#line-number-886764022bd92df89848d5a5adeaa812458a7b40-7">7</a></td></tr></table></div></code></pre>
    </div>
            <div class="section" id="conclusion">
            <h2 class="section-header ">
    <a href="#conclusion">
        Conclusion
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Great! Now we learned some basic operations of Doctrine connections. We
have modified our Doctrine test environment to have a new connection.
This is required because the examples in the coming chapters will
require a connection.</p>

            
    <p>Lets move on to the <a href="configuration.html">Configuration</a> chapter and learn how you
can control functionality and configurations using the Doctrine
attribute system.</p>

    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?ff3b61"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Doctrine1 master'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
