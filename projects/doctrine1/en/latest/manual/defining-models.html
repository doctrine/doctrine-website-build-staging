<!DOCTYPE html>
<html>
    <head>
        <title>Defining Models - Doctrine1 ORM (Doctrine1)</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="PHP 5 Doctrine1 Object Relational Mapper (ORM)
">

        <meta name="keywords" content="php,doctrine1,orm">

                    <meta name="robots" content="noindex">
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/defining-models.html" />
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?3625e4" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/defining-models.html" />
        <meta property="og:title" content="Defining Models - Doctrine1 ORM (Doctrine1)" />
        <meta property="og:description" content="PHP 5 Doctrine1 Object Relational Mapper (ORM)
" />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Defining Models",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects.html" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="https://staging.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://staging.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <div class="container-wrapper container-fluid">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="about-author-html-title-1" class="toc-item"><a href="about-author.html#title.1">About the Author</a></li><li id="about-sensio-html-title-1" class="toc-item"><a href="about-sensio.html#title.1">About Sensio</a></li><li id="acknowledgements-html-title-1" class="toc-item"><a href="acknowledgements.html#title.1">Acknowledgements and Contributors</a></li><ul><li id="acknowledgements-html-title-1-1" class="toc-item"><a href="acknowledgements.html#title.1.1">Contributors</a></li><ul><li id="acknowledgements-html-title-1-1-1" class="toc-item"><a href="acknowledgements.html#title.1.1.1">Roman S. Borschel</a></li><li id="acknowledgements-html-title-1-1-2" class="toc-item"><a href="acknowledgements.html#title.1.1.2">Guilherme Blanco</a></li><li id="acknowledgements-html-title-1-1-3" class="toc-item"><a href="acknowledgements.html#title.1.1.3">Konsta Vesterinen</a></li></ul><li id="acknowledgements-html-title-1-2" class="toc-item"><a href="acknowledgements.html#title.1.2">Companies</a></li><ul><li id="acknowledgements-html-title-1-2-1" class="toc-item"><a href="acknowledgements.html#title.1.2.1">centre{source}</a></li><li id="acknowledgements-html-title-1-2-2" class="toc-item"><a href="acknowledgements.html#title.1.2.2">Sensio Labs</a></li></ul><li id="acknowledgements-html-title-1-3" class="toc-item"><a href="acknowledgements.html#title.1.3">Other Contributors</a></li></ul><li id="behaviors-html-title-1" class="toc-item"><a href="behaviors.html#title.1">Behaviors</a></li><ul><li id="behaviors-html-title-1-1" class="toc-item"><a href="behaviors.html#title.1.1">Introduction</a></li><li id="behaviors-html-title-1-2" class="toc-item"><a href="behaviors.html#title.1.2">Simple Templates</a></li><li id="behaviors-html-title-1-3" class="toc-item"><a href="behaviors.html#title.1.3">Templates with Relations</a></li><li id="behaviors-html-title-1-4" class="toc-item"><a href="behaviors.html#title.1.4">Delegate Methods</a></li><li id="behaviors-html-title-1-5" class="toc-item"><a href="behaviors.html#title.1.5">Creating Behaviors</a></li><li id="behaviors-html-title-1-6" class="toc-item"><a href="behaviors.html#title.1.6">Core Behaviors</a></li><ul><li id="behaviors-html-title-1-6-1" class="toc-item"><a href="behaviors.html#title.1.6.1">Introduction</a></li><li id="behaviors-html-title-1-6-2" class="toc-item"><a href="behaviors.html#title.1.6.2">Versionable</a></li><li id="behaviors-html-title-1-6-3" class="toc-item"><a href="behaviors.html#title.1.6.3">Timestampable</a></li><li id="behaviors-html-title-1-6-4" class="toc-item"><a href="behaviors.html#title.1.6.4">Sluggable</a></li><li id="behaviors-html-title-1-6-5" class="toc-item"><a href="behaviors.html#title.1.6.5">I18n</a></li><li id="behaviors-html-title-1-6-6" class="toc-item"><a href="behaviors.html#title.1.6.6">NestedSet</a></li><li id="behaviors-html-title-1-6-7" class="toc-item"><a href="behaviors.html#title.1.6.7">Searchable</a></li><li id="behaviors-html-title-1-6-8" class="toc-item"><a href="behaviors.html#title.1.6.8">Geographical</a></li><li id="behaviors-html-title-1-6-9" class="toc-item"><a href="behaviors.html#title.1.6.9">SoftDelete</a></li></ul><li id="behaviors-html-title-1-7" class="toc-item"><a href="behaviors.html#title.1.7">Nesting Behaviors</a></li><li id="behaviors-html-title-1-8" class="toc-item"><a href="behaviors.html#title.1.8">Generating Files</a></li><li id="behaviors-html-title-1-9" class="toc-item"><a href="behaviors.html#title.1.9">Querying Generated Classes</a></li><li id="behaviors-html-title-1-10" class="toc-item"><a href="behaviors.html#title.1.10">Conclusion</a></li></ul><li id="caching-html-title-1" class="toc-item"><a href="caching.html#title.1">Caching</a></li><ul><li id="caching-html-title-1-1" class="toc-item"><a href="caching.html#title.1.1">Introduction</a></li><li id="caching-html-title-1-2" class="toc-item"><a href="caching.html#title.1.2">Drivers</a></li><ul><li id="caching-html-title-1-2-1" class="toc-item"><a href="caching.html#title.1.2.1">Memcache</a></li><li id="caching-html-title-1-2-2" class="toc-item"><a href="caching.html#title.1.2.2">APC</a></li></ul><li id="caching-html-title-1-3" class="toc-item"><a href="caching.html#title.1.3">Query Cache &amp; Result Cache</a></li><ul><li id="caching-html-title-1-3-1" class="toc-item"><a href="caching.html#title.1.3.1">Introduction</a></li><li id="caching-html-title-1-3-2" class="toc-item"><a href="caching.html#title.1.3.2">Query Cache</a></li><ul></ul><li id="caching-html-title-1-3-3" class="toc-item"><a href="caching.html#title.1.3.3">Result Cache</a></li><ul></ul></ul><li id="caching-html-title-1-4" class="toc-item"><a href="caching.html#title.1.4">Conclusion</a></li></ul><li id="coding-standards-html-title-1" class="toc-item"><a href="coding-standards.html#title.1">Coding Standards</a></li><ul><li id="coding-standards-html-title-1-1" class="toc-item"><a href="coding-standards.html#title.1.1">PHP File Formatting</a></li><ul><li id="coding-standards-html-title-1-1-1" class="toc-item"><a href="coding-standards.html#title.1.1.1">General</a></li><li id="coding-standards-html-title-1-1-2" class="toc-item"><a href="coding-standards.html#title.1.1.2">Indentation</a></li><li id="coding-standards-html-title-1-1-3" class="toc-item"><a href="coding-standards.html#title.1.1.3">Maximum Line Length</a></li><li id="coding-standards-html-title-1-1-4" class="toc-item"><a href="coding-standards.html#title.1.1.4">Line Termination</a></li></ul><li id="coding-standards-html-title-1-2" class="toc-item"><a href="coding-standards.html#title.1.2">Naming Conventions</a></li><ul><li id="coding-standards-html-title-1-2-1" class="toc-item"><a href="coding-standards.html#title.1.2.1">Classes</a></li><li id="coding-standards-html-title-1-2-2" class="toc-item"><a href="coding-standards.html#title.1.2.2">Interfaces</a></li><li id="coding-standards-html-title-1-2-3" class="toc-item"><a href="coding-standards.html#title.1.2.3">Filenames</a></li><li id="coding-standards-html-title-1-2-4" class="toc-item"><a href="coding-standards.html#title.1.2.4">Functions and Methods</a></li><li id="coding-standards-html-title-1-2-5" class="toc-item"><a href="coding-standards.html#title.1.2.5">Variables</a></li><li id="coding-standards-html-title-1-2-6" class="toc-item"><a href="coding-standards.html#title.1.2.6">Constants</a></li><li id="coding-standards-html-title-1-2-7" class="toc-item"><a href="coding-standards.html#title.1.2.7">Record Columns</a></li></ul><li id="coding-standards-html-title-1-3" class="toc-item"><a href="coding-standards.html#title.1.3">Coding Style</a></li><ul><li id="coding-standards-html-title-1-3-1" class="toc-item"><a href="coding-standards.html#title.1.3.1">PHP Code Demarcation</a></li><li id="coding-standards-html-title-1-3-2" class="toc-item"><a href="coding-standards.html#title.1.3.2">Strings</a></li><ul></ul><li id="coding-standards-html-title-1-3-3" class="toc-item"><a href="coding-standards.html#title.1.3.3">Arrays</a></li><li id="coding-standards-html-title-1-3-4" class="toc-item"><a href="coding-standards.html#title.1.3.4">Classes</a></li><li id="coding-standards-html-title-1-3-5" class="toc-item"><a href="coding-standards.html#title.1.3.5">Functions and Methods</a></li><li id="coding-standards-html-title-1-3-6" class="toc-item"><a href="coding-standards.html#title.1.3.6">Control Statements</a></li><li id="coding-standards-html-title-1-3-7" class="toc-item"><a href="coding-standards.html#title.1.3.7">Inline Documentation</a></li></ul><li id="coding-standards-html-title-1-4" class="toc-item"><a href="coding-standards.html#title.1.4">Conclusion</a></li></ul><li id="component-overview-html-title-1" class="toc-item"><a href="component-overview.html#title.1">Component Overview</a></li><ul><li id="component-overview-html-title-1-1" class="toc-item"><a href="component-overview.html#title.1.1">Manager</a></li><ul><li id="component-overview-html-title-1-1-1" class="toc-item"><a href="component-overview.html#title.1.1.1">Retrieving Connections</a></li></ul><li id="component-overview-html-title-1-2" class="toc-item"><a href="component-overview.html#title.1.2">Connection</a></li><ul><li id="component-overview-html-title-1-2-1" class="toc-item"><a href="component-overview.html#title.1.2.1">Available Drivers</a></li><li id="component-overview-html-title-1-2-2" class="toc-item"><a href="component-overview.html#title.1.2.2">Creating Connections</a></li><li id="component-overview-html-title-1-2-3" class="toc-item"><a href="component-overview.html#title.1.2.3">Flushing the Connection</a></li></ul><li id="component-overview-html-title-1-3" class="toc-item"><a href="component-overview.html#title.1.3">Table</a></li><ul><li id="component-overview-html-title-1-3-1" class="toc-item"><a href="component-overview.html#title.1.3.1">Getting a Table Object</a></li><li id="component-overview-html-title-1-3-2" class="toc-item"><a href="component-overview.html#title.1.3.2">Getting Column Information</a></li><li id="component-overview-html-title-1-3-3" class="toc-item"><a href="component-overview.html#title.1.3.3">Getting Relation Information</a></li><li id="component-overview-html-title-1-3-4" class="toc-item"><a href="component-overview.html#title.1.3.4">Finder Methods</a></li><ul></ul><li id="component-overview-html-title-1-3-5" class="toc-item"><a href="component-overview.html#title.1.3.5">Custom Finders</a></li></ul><li id="component-overview-html-title-1-4" class="toc-item"><a href="component-overview.html#title.1.4">Record</a></li><ul><li id="component-overview-html-title-1-4-1" class="toc-item"><a href="component-overview.html#title.1.4.1">Properties</a></li><li id="component-overview-html-title-1-4-2" class="toc-item"><a href="component-overview.html#title.1.4.2">Updating Records</a></li><li id="component-overview-html-title-1-4-3" class="toc-item"><a href="component-overview.html#title.1.4.3">Replacing Records</a></li><li id="component-overview-html-title-1-4-4" class="toc-item"><a href="component-overview.html#title.1.4.4">Refreshing Records</a></li><li id="component-overview-html-title-1-4-5" class="toc-item"><a href="component-overview.html#title.1.4.5">Refreshing relationships</a></li><li id="component-overview-html-title-1-4-6" class="toc-item"><a href="component-overview.html#title.1.4.6">Deleting Records</a></li><li id="component-overview-html-title-1-4-7" class="toc-item"><a href="component-overview.html#title.1.4.7">Using Expression Values</a></li><li id="component-overview-html-title-1-4-8" class="toc-item"><a href="component-overview.html#title.1.4.8">Getting Record State</a></li><li id="component-overview-html-title-1-4-9" class="toc-item"><a href="component-overview.html#title.1.4.9">Getting Object Copy</a></li><li id="component-overview-html-title-1-4-10" class="toc-item"><a href="component-overview.html#title.1.4.10">Saving a Blank Record</a></li><li id="component-overview-html-title-1-4-11" class="toc-item"><a href="component-overview.html#title.1.4.11">Mapping Custom Values</a></li><li id="component-overview-html-title-1-4-12" class="toc-item"><a href="component-overview.html#title.1.4.12">Serializing</a></li><li id="component-overview-html-title-1-4-13" class="toc-item"><a href="component-overview.html#title.1.4.13">Checking Existence</a></li><li id="component-overview-html-title-1-4-14" class="toc-item"><a href="component-overview.html#title.1.4.14">Function Callbacks for Columns</a></li></ul><li id="component-overview-html-title-1-5" class="toc-item"><a href="component-overview.html#title.1.5">Collection</a></li><ul><li id="component-overview-html-title-1-5-1" class="toc-item"><a href="component-overview.html#title.1.5.1">Accessing Elements</a></li><li id="component-overview-html-title-1-5-2" class="toc-item"><a href="component-overview.html#title.1.5.2">Adding new Elements</a></li><li id="component-overview-html-title-1-5-3" class="toc-item"><a href="component-overview.html#title.1.5.3">Getting Collection Count</a></li><li id="component-overview-html-title-1-5-4" class="toc-item"><a href="component-overview.html#title.1.5.4">Saving the Collection</a></li><li id="component-overview-html-title-1-5-5" class="toc-item"><a href="component-overview.html#title.1.5.5">Deleting the Collection</a></li><li id="component-overview-html-title-1-5-6" class="toc-item"><a href="component-overview.html#title.1.5.6">Key Mapping</a></li><li id="component-overview-html-title-1-5-7" class="toc-item"><a href="component-overview.html#title.1.5.7">Loading Related Records</a></li></ul><li id="component-overview-html-title-1-6" class="toc-item"><a href="component-overview.html#title.1.6">Validator</a></li><ul><li id="component-overview-html-title-1-6-1" class="toc-item"><a href="component-overview.html#title.1.6.1">More Validation</a></li><li id="component-overview-html-title-1-6-2" class="toc-item"><a href="component-overview.html#title.1.6.2">Valid or Not Valid</a></li><ul></ul></ul><li id="component-overview-html-title-1-7" class="toc-item"><a href="component-overview.html#title.1.7">Profiler</a></li><ul><li id="component-overview-html-title-1-7-1" class="toc-item"><a href="component-overview.html#title.1.7.1">Basic Usage</a></li></ul><li id="component-overview-html-title-1-8" class="toc-item"><a href="component-overview.html#title.1.8">Locking Manager</a></li><ul><li id="component-overview-html-title-1-8-1" class="toc-item"><a href="component-overview.html#title.1.8.1">Optimistic Locking</a></li><li id="component-overview-html-title-1-8-2" class="toc-item"><a href="component-overview.html#title.1.8.2">Pessimistic Locking</a></li><li id="component-overview-html-title-1-8-3" class="toc-item"><a href="component-overview.html#title.1.8.3">Examples</a></li><li id="component-overview-html-title-1-8-4" class="toc-item"><a href="component-overview.html#title.1.8.4">Technical Details</a></li></ul><li id="component-overview-html-title-1-9" class="toc-item"><a href="component-overview.html#title.1.9">Views</a></li><ul><li id="component-overview-html-title-1-9-1" class="toc-item"><a href="component-overview.html#title.1.9.1">Using Views</a></li></ul><li id="component-overview-html-title-1-10" class="toc-item"><a href="component-overview.html#title.1.10">Conclusion</a></li></ul><li id="configuration-html-title-1" class="toc-item"><a href="configuration.html#title.1">Configuration</a></li><ul><li id="configuration-html-title-1-1" class="toc-item"><a href="configuration.html#title.1.1">Levels of Configuration</a></li><li id="configuration-html-title-1-2" class="toc-item"><a href="configuration.html#title.1.2">Default Attributes</a></li><ul><li id="configuration-html-title-1-2-1" class="toc-item"><a href="configuration.html#title.1.2.1">Default Column Options</a></li><li id="configuration-html-title-1-2-2" class="toc-item"><a href="configuration.html#title.1.2.2">Default Added Auto Id</a></li></ul><li id="configuration-html-title-1-3" class="toc-item"><a href="configuration.html#title.1.3">Portability</a></li><ul><li id="configuration-html-title-1-3-1" class="toc-item"><a href="configuration.html#title.1.3.1">Portability Mode Attributes</a></li><li id="configuration-html-title-1-3-2" class="toc-item"><a href="configuration.html#title.1.3.2">Examples</a></li></ul><li id="configuration-html-title-1-4" class="toc-item"><a href="configuration.html#title.1.4">Identifier quoting</a></li><li id="configuration-html-title-1-5" class="toc-item"><a href="configuration.html#title.1.5">Hydration Overwriting</a></li><li id="configuration-html-title-1-6" class="toc-item"><a href="configuration.html#title.1.6">Configure Table Class</a></li><li id="configuration-html-title-1-7" class="toc-item"><a href="configuration.html#title.1.7">Configure Query Class</a></li><li id="configuration-html-title-1-8" class="toc-item"><a href="configuration.html#title.1.8">Configure Collection Class</a></li><li id="configuration-html-title-1-9" class="toc-item"><a href="configuration.html#title.1.9">Disabling Cascading Saves</a></li><li id="configuration-html-title-1-10" class="toc-item"><a href="configuration.html#title.1.10">Exporting</a></li><li id="configuration-html-title-1-11" class="toc-item"><a href="configuration.html#title.1.11">Naming convention attributes</a></li><ul><li id="configuration-html-title-1-11-1" class="toc-item"><a href="configuration.html#title.1.11.1">Index name format</a></li><li id="configuration-html-title-1-11-2" class="toc-item"><a href="configuration.html#title.1.11.2">Sequence name format</a></li><li id="configuration-html-title-1-11-3" class="toc-item"><a href="configuration.html#title.1.11.3">Table name format</a></li><li id="configuration-html-title-1-11-4" class="toc-item"><a href="configuration.html#title.1.11.4">Database name format</a></li><li id="configuration-html-title-1-11-5" class="toc-item"><a href="configuration.html#title.1.11.5">Validation attributes</a></li><li id="configuration-html-title-1-11-6" class="toc-item"><a href="configuration.html#title.1.11.6">Validation mode constants</a></li><li id="configuration-html-title-1-11-7" class="toc-item"><a href="configuration.html#title.1.11.7">Examples</a></li></ul><li id="configuration-html-title-1-12" class="toc-item"><a href="configuration.html#title.1.12">Conclusion</a></li></ul><li id="connections-html-title-1" class="toc-item"><a href="connections.html#title.1">Connections</a></li><ul><li id="connections-html-title-1-1" class="toc-item"><a href="connections.html#title.1.1">Introduction</a></li><li id="connections-html-title-1-2" class="toc-item"><a href="connections.html#title.1.2">Opening Connections</a></li><li id="connections-html-title-1-3" class="toc-item"><a href="connections.html#title.1.3">Retrieve Connections</a></li><li id="connections-html-title-1-4" class="toc-item"><a href="connections.html#title.1.4">Current Connection</a></li><li id="connections-html-title-1-5" class="toc-item"><a href="connections.html#title.1.5">Change Current Connection</a></li><li id="connections-html-title-1-6" class="toc-item"><a href="connections.html#title.1.6">Iterating Connections</a></li><li id="connections-html-title-1-7" class="toc-item"><a href="connections.html#title.1.7">Get Connection Name</a></li><li id="connections-html-title-1-8" class="toc-item"><a href="connections.html#title.1.8">Close Connection</a></li><li id="connections-html-title-1-9" class="toc-item"><a href="connections.html#title.1.9">Get All Connections</a></li><li id="connections-html-title-1-10" class="toc-item"><a href="connections.html#title.1.10">Count Connections</a></li><li id="connections-html-title-1-11" class="toc-item"><a href="connections.html#title.1.11">Creating and Dropping Database</a></li><ul><li id="connections-html-title-1-11-1" class="toc-item"><a href="connections.html#title.1.11.1">For a Specific Connection</a></li></ul><li id="connections-html-title-1-12" class="toc-item"><a href="connections.html#title.1.12">Writing Custom Connections</a></li><li id="connections-html-title-1-13" class="toc-item"><a href="connections.html#title.1.13">Conclusion</a></li></ul><li id="data-fixtures-html-title-1" class="toc-item"><a href="data-fixtures.html#title.1">Data Fixtures</a></li><ul><li id="data-fixtures-html-title-1-1" class="toc-item"><a href="data-fixtures.html#title.1.1">Importing</a></li><li id="data-fixtures-html-title-1-2" class="toc-item"><a href="data-fixtures.html#title.1.2">Dumping</a></li><li id="data-fixtures-html-title-1-3" class="toc-item"><a href="data-fixtures.html#title.1.3">Implement</a></li><li id="data-fixtures-html-title-1-4" class="toc-item"><a href="data-fixtures.html#title.1.4">Writing</a></li><li id="data-fixtures-html-title-1-5" class="toc-item"><a href="data-fixtures.html#title.1.5">Fixtures For Nested Sets</a></li><li id="data-fixtures-html-title-1-6" class="toc-item"><a href="data-fixtures.html#title.1.6">Fixtures For I18n</a></li><li id="data-fixtures-html-title-1-7" class="toc-item"><a href="data-fixtures.html#title.1.7">Conclusion</a></li></ul><li id="data-hydrators-html-title-1" class="toc-item"><a href="data-hydrators.html#title.1">Data Hydrators</a></li><ul><li id="data-hydrators-html-title-1-1" class="toc-item"><a href="data-hydrators.html#title.1.1">Core Hydration Methods</a></li><ul><li id="data-hydrators-html-title-1-1-1" class="toc-item"><a href="data-hydrators.html#title.1.1.1">Record</a></li><li id="data-hydrators-html-title-1-1-2" class="toc-item"><a href="data-hydrators.html#title.1.1.2">Array</a></li><li id="data-hydrators-html-title-1-1-3" class="toc-item"><a href="data-hydrators.html#title.1.1.3">Scalar</a></li><li id="data-hydrators-html-title-1-1-4" class="toc-item"><a href="data-hydrators.html#title.1.1.4">Single Scalar</a></li><li id="data-hydrators-html-title-1-1-5" class="toc-item"><a href="data-hydrators.html#title.1.1.5">On Demand</a></li><li id="data-hydrators-html-title-1-1-6" class="toc-item"><a href="data-hydrators.html#title.1.1.6">Nested Set Record Hierarchy</a></li><li id="data-hydrators-html-title-1-1-7" class="toc-item"><a href="data-hydrators.html#title.1.1.7">Nested Set Array Hierarchy</a></li></ul><li id="data-hydrators-html-title-1-2" class="toc-item"><a href="data-hydrators.html#title.1.2">Writing Hydration Method</a></li></ul><li id="data-validation-html-title-1" class="toc-item"><a href="data-validation.html#title.1">Data Validation</a></li><ul><li id="data-validation-html-title-1-1" class="toc-item"><a href="data-validation.html#title.1.1">Introduction</a></li><li id="data-validation-html-title-1-2" class="toc-item"><a href="data-validation.html#title.1.2">Examples</a></li><li id="data-validation-html-title-1-3" class="toc-item"><a href="data-validation.html#title.1.3">Conclusion</a></li></ul><li id="database-abstraction-layer-html-title-1" class="toc-item"><a href="database-abstraction-layer.html#title.1">Database Abstraction Layer</a></li><ul><li id="database-abstraction-layer-html-title-1-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.1">Export</a></li><ul><li id="database-abstraction-layer-html-title-1-1-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.1">Introduction</a></li><li id="database-abstraction-layer-html-title-1-1-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.2">Creating Databases</a></li><li id="database-abstraction-layer-html-title-1-1-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.3">Creating Tables</a></li><li id="database-abstraction-layer-html-title-1-1-4" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.4">Creating Foreign Keys</a></li><li id="database-abstraction-layer-html-title-1-1-5" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.5">Altering table</a></li><li id="database-abstraction-layer-html-title-1-1-6" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.6">Creating Indexes</a></li><li id="database-abstraction-layer-html-title-1-1-7" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.7">Deleting database elements</a></li></ul><li id="database-abstraction-layer-html-title-1-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.2">Import</a></li><ul><li id="database-abstraction-layer-html-title-1-2-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.1">Introduction</a></li><li id="database-abstraction-layer-html-title-1-2-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.2">Listing Databases</a></li><li id="database-abstraction-layer-html-title-1-2-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.3">Listing Sequences</a></li><li id="database-abstraction-layer-html-title-1-2-4" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.4">Listing Constraints</a></li><li id="database-abstraction-layer-html-title-1-2-5" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.5">Listing Table Columns</a></li><li id="database-abstraction-layer-html-title-1-2-6" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.6">Listing Table Indexes</a></li><li id="database-abstraction-layer-html-title-1-2-7" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.7">Listing Tables</a></li><li id="database-abstraction-layer-html-title-1-2-8" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.8">Listing Views</a></li></ul><li id="database-abstraction-layer-html-title-1-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.3">DataDict</a></li><ul><li id="database-abstraction-layer-html-title-1-3-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.3.1">Introduction</a></li><li id="database-abstraction-layer-html-title-1-3-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.3.2">Getting portable declaration</a></li><li id="database-abstraction-layer-html-title-1-3-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.3.3">Getting Native Declaration</a></li></ul><li id="database-abstraction-layer-html-title-1-4" class="toc-item"><a href="database-abstraction-layer.html#title.1.4">Drivers</a></li><ul><li id="database-abstraction-layer-html-title-1-4-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.4.1">Mysql</a></li><ul></ul></ul><li id="database-abstraction-layer-html-title-1-5" class="toc-item"><a href="database-abstraction-layer.html#title.1.5">Conclusion</a></li></ul><li id="defining-models-html-title-1" class="toc-item"><a href="defining-models.html#title.1">Defining Models</a></li><ul><li id="defining-models-html-title-1-1" class="toc-item"><a href="defining-models.html#title.1.1">Columns</a></li><ul><li id="defining-models-html-title-1-1-1" class="toc-item"><a href="defining-models.html#title.1.1.1">Column Lengths</a></li><li id="defining-models-html-title-1-1-2" class="toc-item"><a href="defining-models.html#title.1.1.2">Column Aliases</a></li><li id="defining-models-html-title-1-1-3" class="toc-item"><a href="defining-models.html#title.1.1.3">Default values</a></li><li id="defining-models-html-title-1-1-4" class="toc-item"><a href="defining-models.html#title.1.1.4">Data types</a></li><ul></ul><li id="defining-models-html-title-1-1-5" class="toc-item"><a href="defining-models.html#title.1.1.5">Examples</a></li></ul><li id="defining-models-html-title-1-2" class="toc-item"><a href="defining-models.html#title.1.2">Relationships</a></li><ul><li id="defining-models-html-title-1-2-1" class="toc-item"><a href="defining-models.html#title.1.2.1">Introduction</a></li><li id="defining-models-html-title-1-2-2" class="toc-item"><a href="defining-models.html#title.1.2.2">Foreign Key Associations</a></li><ul></ul><li id="defining-models-html-title-1-2-3" class="toc-item"><a href="defining-models.html#title.1.2.3">Join Table Associations</a></li><ul></ul><li id="defining-models-html-title-1-2-4" class="toc-item"><a href="defining-models.html#title.1.2.4">Foreign Key Constraints</a></li><ul></ul></ul><li id="defining-models-html-title-1-3" class="toc-item"><a href="defining-models.html#title.1.3">Indexes</a></li><ul><li id="defining-models-html-title-1-3-1" class="toc-item"><a href="defining-models.html#title.1.3.1">Introduction</a></li><li id="defining-models-html-title-1-3-2" class="toc-item"><a href="defining-models.html#title.1.3.2">Adding indexes</a></li><li id="defining-models-html-title-1-3-3" class="toc-item"><a href="defining-models.html#title.1.3.3">Index options</a></li><li id="defining-models-html-title-1-3-4" class="toc-item"><a href="defining-models.html#title.1.3.4">Special indexes</a></li></ul><li id="defining-models-html-title-1-4" class="toc-item"><a href="defining-models.html#title.1.4">Checks</a></li><li id="defining-models-html-title-1-5" class="toc-item"><a href="defining-models.html#title.1.5">Table Options</a></li><li id="defining-models-html-title-1-6" class="toc-item"><a href="defining-models.html#title.1.6">Record Filters</a></li><li id="defining-models-html-title-1-7" class="toc-item"><a href="defining-models.html#title.1.7">Transitive Persistence</a></li><ul><li id="defining-models-html-title-1-7-1" class="toc-item"><a href="defining-models.html#title.1.7.1">Application-Level Cascades</a></li><ul></ul><li id="defining-models-html-title-1-7-2" class="toc-item"><a href="defining-models.html#title.1.7.2">Database-Level Cascades</a></li></ul><li id="defining-models-html-title-1-8" class="toc-item"><a href="defining-models.html#title.1.8">Conclusion</a></li></ul><li id="dql-doctrine-query-language-html-title-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1">DQL: Doctrine Query Language</a></li><ul><li id="dql-doctrine-query-language-html-title-1-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.1">Introduction</a></li><li id="dql-doctrine-query-language-html-title-1-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.2">SELECT queries</a></li><ul><li id="dql-doctrine-query-language-html-title-1-2-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.2.1">Aggregate values</a></li></ul><li id="dql-doctrine-query-language-html-title-1-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.3">UPDATE queries</a></li><li id="dql-doctrine-query-language-html-title-1-4" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.4">DELETE Queries</a></li><li id="dql-doctrine-query-language-html-title-1-5" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.5">FROM clause</a></li><li id="dql-doctrine-query-language-html-title-1-6" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.6">JOIN syntax</a></li><ul><li id="dql-doctrine-query-language-html-title-1-6-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.6.1">ON keyword</a></li><li id="dql-doctrine-query-language-html-title-1-6-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.6.2">WITH keyword</a></li></ul><li id="dql-doctrine-query-language-html-title-1-7" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.7">INDEXBY keyword</a></li><li id="dql-doctrine-query-language-html-title-1-8" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.8">WHERE clause</a></li><li id="dql-doctrine-query-language-html-title-1-9" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9">Conditional expressions</a></li><ul><li id="dql-doctrine-query-language-html-title-1-9-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.1">Literals</a></li><li id="dql-doctrine-query-language-html-title-1-9-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.2">Input parameters</a></li><li id="dql-doctrine-query-language-html-title-1-9-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.3">Operators and operator precedence</a></li><li id="dql-doctrine-query-language-html-title-1-9-4" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.4">In expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-5" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.5">Like Expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-6" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.6">Exists Expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-7" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.7">All and Any Expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-8" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.8">Subqueries</a></li></ul><li id="dql-doctrine-query-language-html-title-1-10" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.10">Functional Expressions</a></li><ul><li id="dql-doctrine-query-language-html-title-1-10-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.10.1">String functions</a></li><li id="dql-doctrine-query-language-html-title-1-10-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.10.2">Arithmetic functions</a></li></ul><li id="dql-doctrine-query-language-html-title-1-11" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.11">Subqueries</a></li><ul><li id="dql-doctrine-query-language-html-title-1-11-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.11.1">Introduction</a></li><li id="dql-doctrine-query-language-html-title-1-11-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.11.2">Comparisons using subqueries</a></li></ul><li id="dql-doctrine-query-language-html-title-1-12" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.12">GROUP BY, HAVING clauses</a></li><li id="dql-doctrine-query-language-html-title-1-13" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13">ORDER BY clause</a></li><ul><li id="dql-doctrine-query-language-html-title-1-13-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13.1">Introduction</a></li><li id="dql-doctrine-query-language-html-title-1-13-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13.2">Sorting by an aggregate value</a></li><li id="dql-doctrine-query-language-html-title-1-13-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13.3">Using random order</a></li></ul><li id="dql-doctrine-query-language-html-title-1-14" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.14">LIMIT and OFFSET clauses</a></li><ul><li id="dql-doctrine-query-language-html-title-1-14-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.14.1">Driver Portability</a></li><li id="dql-doctrine-query-language-html-title-1-14-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.14.2">The limit-subquery-algorithm</a></li></ul><li id="dql-doctrine-query-language-html-title-1-15" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15">Named Queries</a></li><ul><li id="dql-doctrine-query-language-html-title-1-15-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.1">Creating a Named Query</a></li><li id="dql-doctrine-query-language-html-title-1-15-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.2">Accessing Named Query</a></li><li id="dql-doctrine-query-language-html-title-1-15-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.3">Executing a Named Query</a></li><li id="dql-doctrine-query-language-html-title-1-15-4" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.4">Cross-Accessing Named Query</a></li></ul><li id="dql-doctrine-query-language-html-title-1-16" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.16">BNF</a></li><li id="dql-doctrine-query-language-html-title-1-17" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.17">Magic Finders</a></li><li id="dql-doctrine-query-language-html-title-1-18" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.18">Debugging Queries</a></li><li id="dql-doctrine-query-language-html-title-1-19" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.19">Conclusion</a></li></ul><li id="event-listeners-html-title-1" class="toc-item"><a href="event-listeners.html#title.1">Event Listeners</a></li><ul><li id="event-listeners-html-title-1-1" class="toc-item"><a href="event-listeners.html#title.1.1">Introduction</a></li><li id="event-listeners-html-title-1-2" class="toc-item"><a href="event-listeners.html#title.1.2">Connection Listeners</a></li><ul><li id="event-listeners-html-title-1-2-1" class="toc-item"><a href="event-listeners.html#title.1.2.1">Creating a New Listener</a></li><li id="event-listeners-html-title-1-2-2" class="toc-item"><a href="event-listeners.html#title.1.2.2">Attaching listeners</a></li><li id="event-listeners-html-title-1-2-3" class="toc-item"><a href="event-listeners.html#title.1.2.3">Pre and Post Connect</a></li><li id="event-listeners-html-title-1-2-4" class="toc-item"><a href="event-listeners.html#title.1.2.4">Transaction Listeners</a></li><li id="event-listeners-html-title-1-2-5" class="toc-item"><a href="event-listeners.html#title.1.2.5">Query Execution Listeners</a></li></ul><li id="event-listeners-html-title-1-3" class="toc-item"><a href="event-listeners.html#title.1.3">Hydration Listeners</a></li><li id="event-listeners-html-title-1-4" class="toc-item"><a href="event-listeners.html#title.1.4">Record Listeners</a></li><li id="event-listeners-html-title-1-5" class="toc-item"><a href="event-listeners.html#title.1.5">Record Hooks</a></li><li id="event-listeners-html-title-1-6" class="toc-item"><a href="event-listeners.html#title.1.6">DQL Hooks</a></li><li id="event-listeners-html-title-1-7" class="toc-item"><a href="event-listeners.html#title.1.7">Chaining Listeners</a></li><li id="event-listeners-html-title-1-8" class="toc-item"><a href="event-listeners.html#title.1.8">The Event object</a></li><ul><li id="event-listeners-html-title-1-8-1" class="toc-item"><a href="event-listeners.html#title.1.8.1">Getting the Invoker</a></li><li id="event-listeners-html-title-1-8-2" class="toc-item"><a href="event-listeners.html#title.1.8.2">Event Codes</a></li><li id="event-listeners-html-title-1-8-3" class="toc-item"><a href="event-listeners.html#title.1.8.3">Getting the Invoker</a></li><li id="event-listeners-html-title-1-8-4" class="toc-item"><a href="event-listeners.html#title.1.8.4">Skip Next Operation</a></li><li id="event-listeners-html-title-1-8-5" class="toc-item"><a href="event-listeners.html#title.1.8.5">Skip Next Listener</a></li></ul><li id="event-listeners-html-title-1-9" class="toc-item"><a href="event-listeners.html#title.1.9">Conclusion</a></li></ul><li id="exceptions-and-warnings-html-title-1" class="toc-item"><a href="exceptions-and-warnings.html#title.1">Exceptions and Warnings</a></li><ul><li id="exceptions-and-warnings-html-title-1-1" class="toc-item"><a href="exceptions-and-warnings.html#title.1.1">Manager exceptions</a></li><li id="exceptions-and-warnings-html-title-1-2" class="toc-item"><a href="exceptions-and-warnings.html#title.1.2">Relation exceptions</a></li><li id="exceptions-and-warnings-html-title-1-3" class="toc-item"><a href="exceptions-and-warnings.html#title.1.3">Connection exceptions</a></li><li id="exceptions-and-warnings-html-title-1-4" class="toc-item"><a href="exceptions-and-warnings.html#title.1.4">Query exceptions</a></li><li id="exceptions-and-warnings-html-title-1-5" class="toc-item"><a href="exceptions-and-warnings.html#title.1.5">Conclusion</a></li></ul><li id="extensions-html-title-1" class="toc-item"><a href="extensions.html#title.1">Extensions</a></li><li id="getting-started-html-title-1" class="toc-item"><a href="getting-started.html#title.1">Getting Started</a></li><ul><li id="getting-started-html-title-1-1" class="toc-item"><a href="getting-started.html#title.1.1">Checking Requirements</a></li><li id="getting-started-html-title-1-2" class="toc-item"><a href="getting-started.html#title.1.2">Installing</a></li><ul><li id="getting-started-html-title-1-2-1" class="toc-item"><a href="getting-started.html#title.1.2.1">Sandbox</a></li><li id="getting-started-html-title-1-2-2" class="toc-item"><a href="getting-started.html#title.1.2.2">SVN</a></li><ul></ul><li id="getting-started-html-title-1-2-3" class="toc-item"><a href="getting-started.html#title.1.2.3">SVN Externals</a></li><li id="getting-started-html-title-1-2-4" class="toc-item"><a href="getting-started.html#title.1.2.4">PEAR Installer</a></li><li id="getting-started-html-title-1-2-5" class="toc-item"><a href="getting-started.html#title.1.2.5">Download Pear Package</a></li></ul><li id="getting-started-html-title-1-3" class="toc-item"><a href="getting-started.html#title.1.3">Implementing</a></li><ul><li id="getting-started-html-title-1-3-1" class="toc-item"><a href="getting-started.html#title.1.3.1">Including Doctrine Libraries</a></li><li id="getting-started-html-title-1-3-2" class="toc-item"><a href="getting-started.html#title.1.3.2">Require Doctrine Base Class</a></li><li id="getting-started-html-title-1-3-3" class="toc-item"><a href="getting-started.html#title.1.3.3">Register Autoloader</a></li><ul></ul><li id="getting-started-html-title-1-3-4" class="toc-item"><a href="getting-started.html#title.1.3.4">Bootstrap File</a></li><li id="getting-started-html-title-1-3-5" class="toc-item"><a href="getting-started.html#title.1.3.5">Test Script</a></li></ul><li id="getting-started-html-title-1-4" class="toc-item"><a href="getting-started.html#title.1.4">Conclusion</a></li></ul><li id="hierarchical-data-html-title-1" class="toc-item"><a href="hierarchical-data.html#title.1">Hierarchical Data</a></li><ul><li id="hierarchical-data-html-title-1-1" class="toc-item"><a href="hierarchical-data.html#title.1.1">Introduction</a></li><li id="hierarchical-data-html-title-1-2" class="toc-item"><a href="hierarchical-data.html#title.1.2">Nested Set</a></li><ul><li id="hierarchical-data-html-title-1-2-1" class="toc-item"><a href="hierarchical-data.html#title.1.2.1">Introduction</a></li><li id="hierarchical-data-html-title-1-2-2" class="toc-item"><a href="hierarchical-data.html#title.1.2.2">Setting Up</a></li><li id="hierarchical-data-html-title-1-2-3" class="toc-item"><a href="hierarchical-data.html#title.1.2.3">Multiple Trees</a></li><li id="hierarchical-data-html-title-1-2-4" class="toc-item"><a href="hierarchical-data.html#title.1.2.4">Working with Trees</a></li><ul></ul><li id="hierarchical-data-html-title-1-2-5" class="toc-item"><a href="hierarchical-data.html#title.1.2.5">Advanced Usage</a></li><ul></ul><li id="hierarchical-data-html-title-1-2-6" class="toc-item"><a href="hierarchical-data.html#title.1.2.6">Rendering with Indention</a></li></ul><li id="hierarchical-data-html-title-1-3" class="toc-item"><a href="hierarchical-data.html#title.1.3">Conclusion</a></li></ul><li id="imprint-html-title-1" class="toc-item"><a href="imprint.html#title.1">Imprint</a></li><li id="improving-performance-html-title-1" class="toc-item"><a href="improving-performance.html#title.1">Improving Performance</a></li><ul><li id="improving-performance-html-title-1-1" class="toc-item"><a href="improving-performance.html#title.1.1">Introduction</a></li><li id="improving-performance-html-title-1-2" class="toc-item"><a href="improving-performance.html#title.1.2">Compile</a></li><li id="improving-performance-html-title-1-3" class="toc-item"><a href="improving-performance.html#title.1.3">Conservative Fetching</a></li><li id="improving-performance-html-title-1-4" class="toc-item"><a href="improving-performance.html#title.1.4">Bundle your Class Files</a></li><li id="improving-performance-html-title-1-5" class="toc-item"><a href="improving-performance.html#title.1.5">Use a Bytecode Cache</a></li><li id="improving-performance-html-title-1-6" class="toc-item"><a href="improving-performance.html#title.1.6">Free Objects</a></li><li id="improving-performance-html-title-1-7" class="toc-item"><a href="improving-performance.html#title.1.7">Other Tips</a></li><li id="improving-performance-html-title-1-8" class="toc-item"><a href="improving-performance.html#title.1.8">Conclusion</a></li></ul><li id="index-html-title-1" class="toc-item"><a href="index.html#title.1">Doctrine  ORM Manual</a></li><li id="inheritance-html-title-1" class="toc-item"><a href="inheritance.html#title.1">Inheritance</a></li><ul><li id="inheritance-html-title-1-1" class="toc-item"><a href="inheritance.html#title.1.1">Simple</a></li><li id="inheritance-html-title-1-2" class="toc-item"><a href="inheritance.html#title.1.2">Concrete</a></li><li id="inheritance-html-title-1-3" class="toc-item"><a href="inheritance.html#title.1.3">Column Aggregation</a></li><li id="inheritance-html-title-1-4" class="toc-item"><a href="inheritance.html#title.1.4">Conclusion</a></li></ul><li id="introduction-to-connections-html-title-1" class="toc-item"><a href="introduction-to-connections.html#title.1">Introduction to Connections</a></li><ul><li id="introduction-to-connections-html-title-1-1" class="toc-item"><a href="introduction-to-connections.html#title.1.1">DSN, the Data Source Name</a></li><ul><li id="introduction-to-connections-html-title-1-1-1" class="toc-item"><a href="introduction-to-connections.html#title.1.1.1">Main Parts</a></li><ul></ul><li id="introduction-to-connections-html-title-1-1-2" class="toc-item"><a href="introduction-to-connections.html#title.1.1.2">Providing the DSN</a></li><li id="introduction-to-connections-html-title-1-1-3" class="toc-item"><a href="introduction-to-connections.html#title.1.1.3">Examples</a></li></ul><li id="introduction-to-connections-html-title-1-2" class="toc-item"><a href="introduction-to-connections.html#title.1.2">Opening New Connections</a></li><li id="introduction-to-connections-html-title-1-3" class="toc-item"><a href="introduction-to-connections.html#title.1.3">Lazy Database Connecting</a></li><li id="introduction-to-connections-html-title-1-4" class="toc-item"><a href="introduction-to-connections.html#title.1.4">Testing your Connection</a></li><li id="introduction-to-connections-html-title-1-5" class="toc-item"><a href="introduction-to-connections.html#title.1.5">Conclusion</a></li></ul><li id="introduction-to-models-html-title-1" class="toc-item"><a href="introduction-to-models.html#title.1">Introduction to Models</a></li><ul><li id="introduction-to-models-html-title-1-1" class="toc-item"><a href="introduction-to-models.html#title.1.1">Introduction</a></li><li id="introduction-to-models-html-title-1-2" class="toc-item"><a href="introduction-to-models.html#title.1.2">Generating Models</a></li><ul><li id="introduction-to-models-html-title-1-2-1" class="toc-item"><a href="introduction-to-models.html#title.1.2.1">Existing Databases</a></li><ul></ul><li id="introduction-to-models-html-title-1-2-2" class="toc-item"><a href="introduction-to-models.html#title.1.2.2">Schema Files</a></li></ul><li id="introduction-to-models-html-title-1-3" class="toc-item"><a href="introduction-to-models.html#title.1.3">Manually Writing Models</a></li><li id="introduction-to-models-html-title-1-4" class="toc-item"><a href="introduction-to-models.html#title.1.4">Autoloading Models</a></li><ul><li id="introduction-to-models-html-title-1-4-1" class="toc-item"><a href="introduction-to-models.html#title.1.4.1">Conservative</a></li><li id="introduction-to-models-html-title-1-4-2" class="toc-item"><a href="introduction-to-models.html#title.1.4.2">Aggressive</a></li></ul><li id="introduction-to-models-html-title-1-5" class="toc-item"><a href="introduction-to-models.html#title.1.5">Conclusion</a></li></ul><li id="introduction-html-title-1" class="toc-item"><a href="introduction.html#title.1">Introduction</a></li><ul><li id="introduction-html-title-1-1" class="toc-item"><a href="introduction.html#title.1.1">About this Version</a></li><li id="introduction-html-title-1-2" class="toc-item"><a href="introduction.html#title.1.2">How to Contribute</a></li><li id="introduction-html-title-1-3" class="toc-item"><a href="introduction.html#title.1.3">What is Doctrine?</a></li><li id="introduction-html-title-1-4" class="toc-item"><a href="introduction.html#title.1.4">What is an ORM?</a></li><li id="introduction-html-title-1-5" class="toc-item"><a href="introduction.html#title.1.5">What is the Problem?</a></li><li id="introduction-html-title-1-6" class="toc-item"><a href="introduction.html#title.1.6">Minimum Requirements</a></li><li id="introduction-html-title-1-7" class="toc-item"><a href="introduction.html#title.1.7">Basic Overview</a></li><li id="introduction-html-title-1-8" class="toc-item"><a href="introduction.html#title.1.8">Doctrine Explained</a></li><li id="introduction-html-title-1-9" class="toc-item"><a href="introduction.html#title.1.9">Key Concepts</a></li><li id="introduction-html-title-1-10" class="toc-item"><a href="introduction.html#title.1.10">Further Reading</a></li><li id="introduction-html-title-1-11" class="toc-item"><a href="introduction.html#title.1.11">Conclusion</a></li></ul><li id="license-html-title-1" class="toc-item"><a href="license.html#title.1">Attribution-Share Alike 3.0 Unported License</a></li><li id="migrations-html-title-1" class="toc-item"><a href="migrations.html#title.1">Migrations</a></li><ul><li id="migrations-html-title-1-1" class="toc-item"><a href="migrations.html#title.1.1">Performing Migrations</a></li><li id="migrations-html-title-1-2" class="toc-item"><a href="migrations.html#title.1.2">Implement</a></li><li id="migrations-html-title-1-3" class="toc-item"><a href="migrations.html#title.1.3">Writing Migration Classes</a></li><li id="migrations-html-title-1-4" class="toc-item"><a href="migrations.html#title.1.4">Conclusion</a></li></ul><li id="native-sql-html-title-1" class="toc-item"><a href="native-sql.html#title.1">Native SQL</a></li><ul><li id="native-sql-html-title-1-1" class="toc-item"><a href="native-sql.html#title.1.1">Introduction</a></li><li id="native-sql-html-title-1-2" class="toc-item"><a href="native-sql.html#title.1.2">Component Queries</a></li><li id="native-sql-html-title-1-3" class="toc-item"><a href="native-sql.html#title.1.3">Fetching from Multiple Components</a></li><li id="native-sql-html-title-1-4" class="toc-item"><a href="native-sql.html#title.1.4">Conclusion</a></li></ul><li id="real-world-examples-html-title-1" class="toc-item"><a href="real-world-examples.html#title.1">Real World Examples</a></li><ul><li id="real-world-examples-html-title-1-1" class="toc-item"><a href="real-world-examples.html#title.1.1">User Management System</a></li><li id="real-world-examples-html-title-1-2" class="toc-item"><a href="real-world-examples.html#title.1.2">Forum Application</a></li><li id="real-world-examples-html-title-1-3" class="toc-item"><a href="real-world-examples.html#title.1.3">Conclusion</a></li></ul><li id="searching-html-title-1" class="toc-item"><a href="searching.html#title.1">Searching</a></li><ul><li id="searching-html-title-1-1" class="toc-item"><a href="searching.html#title.1.1">Introduction</a></li><li id="searching-html-title-1-2" class="toc-item"><a href="searching.html#title.1.2">Index structure</a></li><li id="searching-html-title-1-3" class="toc-item"><a href="searching.html#title.1.3">Index Building</a></li><li id="searching-html-title-1-4" class="toc-item"><a href="searching.html#title.1.4">Text Analyzers</a></li><li id="searching-html-title-1-5" class="toc-item"><a href="searching.html#title.1.5">Query language</a></li><li id="searching-html-title-1-6" class="toc-item"><a href="searching.html#title.1.6">Performing Searches</a></li><li id="searching-html-title-1-7" class="toc-item"><a href="searching.html#title.1.7">File searches</a></li><li id="searching-html-title-1-8" class="toc-item"><a href="searching.html#title.1.8">Conclusion</a></li></ul><li id="technology-html-title-1" class="toc-item"><a href="technology.html#title.1">Technology</a></li><ul><li id="technology-html-title-1-1" class="toc-item"><a href="technology.html#title.1.1">Introduction</a></li><li id="technology-html-title-1-2" class="toc-item"><a href="technology.html#title.1.2">Architecture</a></li><ul><li id="technology-html-title-1-2-1" class="toc-item"><a href="technology.html#title.1.2.1">Doctrine CORE</a></li><li id="technology-html-title-1-2-2" class="toc-item"><a href="technology.html#title.1.2.2">Doctrine DBAL</a></li><li id="technology-html-title-1-2-3" class="toc-item"><a href="technology.html#title.1.2.3">Doctrine ORM</a></li></ul><li id="technology-html-title-1-3" class="toc-item"><a href="technology.html#title.1.3">Design Patterns Used</a></li><li id="technology-html-title-1-4" class="toc-item"><a href="technology.html#title.1.4">Speed</a></li><li id="technology-html-title-1-5" class="toc-item"><a href="technology.html#title.1.5">Conclusion</a></li></ul><li id="transactions-html-title-1" class="toc-item"><a href="transactions.html#title.1">Transactions</a></li><ul><li id="transactions-html-title-1-1" class="toc-item"><a href="transactions.html#title.1.1">Introduction</a></li><li id="transactions-html-title-1-2" class="toc-item"><a href="transactions.html#title.1.2">Nesting</a></li><li id="transactions-html-title-1-3" class="toc-item"><a href="transactions.html#title.1.3">Savepoints</a></li><li id="transactions-html-title-1-4" class="toc-item"><a href="transactions.html#title.1.4">Isolation Levels</a></li><li id="transactions-html-title-1-5" class="toc-item"><a href="transactions.html#title.1.5">Conclusion</a></li></ul><li id="unit-testing-html-title-1" class="toc-item"><a href="unit-testing.html#title.1">Unit Testing</a></li><ul><li id="unit-testing-html-title-1-1" class="toc-item"><a href="unit-testing.html#title.1.1">Running tests</a></li><ul><li id="unit-testing-html-title-1-1-1" class="toc-item"><a href="unit-testing.html#title.1.1.1">CLI</a></li><li id="unit-testing-html-title-1-1-2" class="toc-item"><a href="unit-testing.html#title.1.1.2">Browser</a></li></ul><li id="unit-testing-html-title-1-2" class="toc-item"><a href="unit-testing.html#title.1.2">Writing Tests</a></li><ul><li id="unit-testing-html-title-1-2-1" class="toc-item"><a href="unit-testing.html#title.1.2.1">Ticket Tests</a></li><li id="unit-testing-html-title-1-2-2" class="toc-item"><a href="unit-testing.html#title.1.2.2">Methods for testing</a></li><ul></ul><li id="unit-testing-html-title-1-2-3" class="toc-item"><a href="unit-testing.html#title.1.2.3">Mock Drivers</a></li><li id="unit-testing-html-title-1-2-4" class="toc-item"><a href="unit-testing.html#title.1.2.4">Test Class Guidelines</a></li><li id="unit-testing-html-title-1-2-5" class="toc-item"><a href="unit-testing.html#title.1.2.5">Test Method Guidelines</a></li></ul><li id="unit-testing-html-title-1-3" class="toc-item"><a href="unit-testing.html#title.1.3">Conclusion</a></li></ul><li id="utilities-html-title-1" class="toc-item"><a href="utilities.html#title.1">Utilities</a></li><ul><li id="utilities-html-title-1-1" class="toc-item"><a href="utilities.html#title.1.1">Pagination</a></li><ul><li id="utilities-html-title-1-1-1" class="toc-item"><a href="utilities.html#title.1.1.1">Introduction</a></li><li id="utilities-html-title-1-1-2" class="toc-item"><a href="utilities.html#title.1.1.2">Working with Pager</a></li><li id="utilities-html-title-1-1-3" class="toc-item"><a href="utilities.html#title.1.1.3">Controlling Range Styles</a></li><ul></ul><li id="utilities-html-title-1-1-4" class="toc-item"><a href="utilities.html#title.1.1.4">Advanced layouts with pager</a></li><ul></ul><li id="utilities-html-title-1-1-5" class="toc-item"><a href="utilities.html#title.1.1.5">Customizing pager layout</a></li></ul><li id="utilities-html-title-1-2" class="toc-item"><a href="utilities.html#title.1.2">Facade</a></li><ul><li id="utilities-html-title-1-2-1" class="toc-item"><a href="utilities.html#title.1.2.1">Creating &amp; Dropping Databases</a></li><li id="utilities-html-title-1-2-2" class="toc-item"><a href="utilities.html#title.1.2.2">Convenience Methods</a></li><li id="utilities-html-title-1-2-3" class="toc-item"><a href="utilities.html#title.1.2.3">Tasks</a></li></ul><li id="utilities-html-title-1-3" class="toc-item"><a href="utilities.html#title.1.3">Command Line Interface</a></li><ul><li id="utilities-html-title-1-3-1" class="toc-item"><a href="utilities.html#title.1.3.1">Introduction The Doctrine Cli is a collection of tasks that help you</a></li><li id="utilities-html-title-1-3-2" class="toc-item"><a href="utilities.html#title.1.3.2">Tasks</a></li><li id="utilities-html-title-1-3-3" class="toc-item"><a href="utilities.html#title.1.3.3">Usage</a></li></ul><li id="utilities-html-title-1-4" class="toc-item"><a href="utilities.html#title.1.4">Sandbox</a></li><ul><li id="utilities-html-title-1-4-1" class="toc-item"><a href="utilities.html#title.1.4.1">Installation</a></li></ul><li id="utilities-html-title-1-5" class="toc-item"><a href="utilities.html#title.1.5">Conclusion</a></li></ul><li id="working-with-models-html-title-1" class="toc-item"><a href="working-with-models.html#title.1">Working with Models</a></li><ul><li id="working-with-models-html-title-1-1" class="toc-item"><a href="working-with-models.html#title.1.1">Define Test Schema</a></li><li id="working-with-models-html-title-1-2" class="toc-item"><a href="working-with-models.html#title.1.2">Dealing with Relations</a></li><ul><li id="working-with-models-html-title-1-2-1" class="toc-item"><a href="working-with-models.html#title.1.2.1">Creating Related Records</a></li><li id="working-with-models-html-title-1-2-2" class="toc-item"><a href="working-with-models.html#title.1.2.2">Retrieving Related Records</a></li><li id="working-with-models-html-title-1-2-3" class="toc-item"><a href="working-with-models.html#title.1.2.3">Updating Related Records</a></li><li id="working-with-models-html-title-1-2-4" class="toc-item"><a href="working-with-models.html#title.1.2.4">Clearing Related Records</a></li><li id="working-with-models-html-title-1-2-5" class="toc-item"><a href="working-with-models.html#title.1.2.5">Deleting Related Records</a></li><li id="working-with-models-html-title-1-2-6" class="toc-item"><a href="working-with-models.html#title.1.2.6">Working with Related Records</a></li><ul></ul></ul><li id="working-with-models-html-title-1-3" class="toc-item"><a href="working-with-models.html#title.1.3">Many-to-Many Relations</a></li><ul><li id="working-with-models-html-title-1-3-1" class="toc-item"><a href="working-with-models.html#title.1.3.1">Creating a New Link</a></li><li id="working-with-models-html-title-1-3-2" class="toc-item"><a href="working-with-models.html#title.1.3.2">Deleting a Link</a></li></ul><li id="working-with-models-html-title-1-4" class="toc-item"><a href="working-with-models.html#title.1.4">Fetching Objects</a></li><ul><li id="working-with-models-html-title-1-4-1" class="toc-item"><a href="working-with-models.html#title.1.4.1">Sample Queries</a></li><li id="working-with-models-html-title-1-4-2" class="toc-item"><a href="working-with-models.html#title.1.4.2">Field Lazy Loading</a></li></ul><li id="working-with-models-html-title-1-5" class="toc-item"><a href="working-with-models.html#title.1.5">Arrays and Objects</a></li><ul><li id="working-with-models-html-title-1-5-1" class="toc-item"><a href="working-with-models.html#title.1.5.1">To Array</a></li><li id="working-with-models-html-title-1-5-2" class="toc-item"><a href="working-with-models.html#title.1.5.2">From Array</a></li><li id="working-with-models-html-title-1-5-3" class="toc-item"><a href="working-with-models.html#title.1.5.3">Synchronize With Array</a></li></ul><li id="working-with-models-html-title-1-6" class="toc-item"><a href="working-with-models.html#title.1.6">Overriding the Constructor</a></li><li id="working-with-models-html-title-1-7" class="toc-item"><a href="working-with-models.html#title.1.7">Conclusion</a></li></ul><li id="yaml-schema-files-html-title-1" class="toc-item"><a href="yaml-schema-files.html#title.1">YAML Schema Files</a></li><ul><li id="yaml-schema-files-html-title-1-1" class="toc-item"><a href="yaml-schema-files.html#title.1.1">Introduction</a></li><li id="yaml-schema-files-html-title-1-2" class="toc-item"><a href="yaml-schema-files.html#title.1.2">Abbreviated Syntax</a></li><li id="yaml-schema-files-html-title-1-3" class="toc-item"><a href="yaml-schema-files.html#title.1.3">Verbose Syntax</a></li><li id="yaml-schema-files-html-title-1-4" class="toc-item"><a href="yaml-schema-files.html#title.1.4">Relationships</a></li><ul><li id="yaml-schema-files-html-title-1-4-1" class="toc-item"><a href="yaml-schema-files.html#title.1.4.1">Detect Relations</a></li><li id="yaml-schema-files-html-title-1-4-2" class="toc-item"><a href="yaml-schema-files.html#title.1.4.2">Customizing Relationships</a></li><li id="yaml-schema-files-html-title-1-4-3" class="toc-item"><a href="yaml-schema-files.html#title.1.4.3">One to One</a></li><li id="yaml-schema-files-html-title-1-4-4" class="toc-item"><a href="yaml-schema-files.html#title.1.4.4">One to Many</a></li><li id="yaml-schema-files-html-title-1-4-5" class="toc-item"><a href="yaml-schema-files.html#title.1.4.5">Many to Many</a></li></ul><li id="yaml-schema-files-html-title-1-5" class="toc-item"><a href="yaml-schema-files.html#title.1.5">Features &amp; Examples</a></li><ul><li id="yaml-schema-files-html-title-1-5-1" class="toc-item"><a href="yaml-schema-files.html#title.1.5.1">Connection Binding</a></li><li id="yaml-schema-files-html-title-1-5-2" class="toc-item"><a href="yaml-schema-files.html#title.1.5.2">Attributes</a></li><li id="yaml-schema-files-html-title-1-5-3" class="toc-item"><a href="yaml-schema-files.html#title.1.5.3">Enums</a></li><li id="yaml-schema-files-html-title-1-5-4" class="toc-item"><a href="yaml-schema-files.html#title.1.5.4">ActAs Behaviors</a></li><li id="yaml-schema-files-html-title-1-5-5" class="toc-item"><a href="yaml-schema-files.html#title.1.5.5">Listeners</a></li><li id="yaml-schema-files-html-title-1-5-6" class="toc-item"><a href="yaml-schema-files.html#title.1.5.6">Options</a></li><li id="yaml-schema-files-html-title-1-5-7" class="toc-item"><a href="yaml-schema-files.html#title.1.5.7">Indexes</a></li><li id="yaml-schema-files-html-title-1-5-8" class="toc-item"><a href="yaml-schema-files.html#title.1.5.8">Inheritance</a></li><ul></ul><li id="yaml-schema-files-html-title-1-5-9" class="toc-item"><a href="yaml-schema-files.html#title.1.5.9">Column Aliases</a></li><li id="yaml-schema-files-html-title-1-5-10" class="toc-item"><a href="yaml-schema-files.html#title.1.5.10">Packages</a></li><ul></ul><li id="yaml-schema-files-html-title-1-5-11" class="toc-item"><a href="yaml-schema-files.html#title.1.5.11">Global Schema Information</a></li></ul><li id="yaml-schema-files-html-title-1-6" class="toc-item"><a href="yaml-schema-files.html#title.1.6">Using Schema Files</a></li><li id="yaml-schema-files-html-title-1-7" class="toc-item"><a href="yaml-schema-files.html#title.1.7">Conclusion</a></li></ul></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine1/en/latest/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Defining Models</li>
                            </ol>
                        </nav>
                                    </div>

                                    <div class="alert caution bg-light-yellow text-dark border"><i class="fas fa-exclamation-circle text-warning mr-2"></i> This project is no longer maintained and has been archived.</div>
                
                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            <ul class="list-inline">
                                                                            <li class="list-inline-item mr-0">
                                            <a href="/projects/doctrine1/en/latest/manual/defining-models.html" class="project-version-switcher badge badge-warning">master</a>
                                        </li>
                                    
                                    
                                    <li class="list-inline-item ml-2"><a href="https://github.com/doctrine/doctrine1-documentation/edit/master/source/en/manual/defining-models.rst" class="badge badge-primary">Edit</a></li>

                                </ul>
                            
                            
<p></p>
<hr />
<a class="section-anchor" id="title.1" name="title.1"></a><h1 class="section-header"><a href="#title.1">Defining Models<i class="fas fa-link"></i></a></h1>
<p>As we mentioned before, at the lowest level in Doctrine your schema is
represented by a set of php classes that map the schema meta data for your
database tables.</p>
<p>In this chapter we will explain in detail how you can map your schema
information using php code.</p>
<hr />
<a class="section-anchor" id="title.1.1" name="title.1.1"></a><h2 class="section-header"><a href="#title.1.1">Columns<i class="fas fa-link"></i></a></h2>
<p>One problem with database compatibility is that many databases differ in their
behavior of how the result set of a query is returned. MySQL leaves the field
names unchanged, which means if you issue a query of the form <code>&quot;SELECT myField
FROM ...&quot;</code> then the result set will contain the field <code>myField</code>.</p>
<p>Unfortunately, this is just the way MySQL and some other databases do
it. Postgres for example returns all field names in lowercase whilst
Oracle returns all field names in uppercase. &quot;So what? In what way does
this influence me when using Doctrine?&quot;, you may ask. Fortunately, you
don't have to bother about that issue at all.</p>
<p>Doctrine takes care of this problem transparently. That means if you define a
derived Record class and define a field called <code>myField</code> you will always
access it through <code>$record-&gt;myField</code> (or <code>$record['myField']</code>, whatever
you prefer) no matter whether you're using MySQL or Postgres or Oracle etc.</p>
<p>In short: You can name your fields however you want, using under_scores,
camelCase or whatever you prefer.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>In Doctrine columns and column aliases are case sensitive.  So when you are
using columns in your DQL queries, the column/field names must match the
case in your model definition.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.1.1" name="title.1.1.1"></a><h3 class="section-header"><a href="#title.1.1.1">Column Lengths<i class="fas fa-link"></i></a></h3>
<p>In Doctrine column length is an integer that specifies the column length. Some
column types depend not only the given portable type but also on the given
length. For example type <code>string</code> with length 1000 will be translated into native
type <code>TEXT</code> on mysql.</p>
<p>The length is different depending on the type of column you are using:</p>
<ul><li>  <code>integer</code>
        Length is the the number of bytes the integer occupies.</li>
<li>  <code>string</code>
        Number of the characters allowed in the string.</li>
<li>  <code>float/decimal</code>
        Total number of characters allowed excluding the decimal.</li>
<li>  <code>enum</code>
        If using native enum length does not apply but if using
        emulated enums then it is just the string length of the
        column value.</li>
</ul>

<hr />
<a class="section-anchor" id="title.1.1.2" name="title.1.1.2"></a><h3 class="section-header"><a href="#title.1.1.2">Column Aliases<i class="fas fa-link"></i></a></h3>
<p>Doctrine offers a way of setting column aliases. This can be very useful when
you want to keep the application logic separate from the database logic. For
example if you want to change the name of the database field all you need to
change at your application is the column definition.</p>

<pre><code class="">// models/Book.php
class Book extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('bookTitle as title', 'string');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Book:
  columns:
    bookTitle:
      name: bookTitle as title
      type: string
</code></pre>
<p>Now the column in the database is named bookTitle but you can access the
property on your objects using title.</p>
<pre><code class="php">// test.php
$book = new Book();
$book-&gt;title = 'Some book';
$book-&gt;save();
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.3" name="title.1.1.3"></a><h3 class="section-header"><a href="#title.1.1.3">Default values<i class="fas fa-link"></i></a></h3>
<p>Doctrine supports default values for all data types. When default value
is attached to a record column this means two things. First this value
is attached to every newly created Record and when Doctrine creates your
database tables it includes the default value in the create table
statement.</p>

<pre><code class="">// models/generated/BaseUser.php
class User extends BaseUser
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('username', 'string', 255,
            array('default' =&gt; 'default username'));
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
User:
  # ...
  columns:
    username:
      type: string(255)
      default: default username
    #...
</code></pre>
<p>Now when you print the name on a brand new User record it will print the
default value:</p>
<pre><code class="">// test.php
$user = new User();
echo $user-&gt;username; // default username
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4" name="title.1.1.4"></a><h3 class="section-header"><a href="#title.1.1.4">Data types<i class="fas fa-link"></i></a></h3>
<hr />
<a class="section-anchor" id="title.1.1.4.1" name="title.1.1.4.1"></a><h4 class="section-header"><a href="#title.1.1.4.1">Introduction<i class="fas fa-link"></i></a></h4>
<p>All DBMS provide multiple choice of data types for the information that can be
stored in their database table fields. However, the set of data types made
available varies from DBMS to DBMS.</p>
<p>To simplify the interface with the DBMS supported by Doctrine, a base set of
data types was defined. Applications may access them independently of the
underlying DBMS.</p>
<p>The Doctrine applications programming interface takes care of mapping data
types when managing database options. It is also able to convert that is sent
to and received from the underlying DBMS using the respective driver.</p>
<p>The following data type examples should be used with Doctrine's
createTable method. The example array at the end of the data types
section may be used with createTable to create a portable table on
the DBMS of choice (please refer to the main Doctrine documentation to find out
what DBMS back ends are properly supported). It should also be noted that the
following examples do not cover the creation and maintenance of indices, this
chapter is only concerned with data types and the proper usage thereof.</p>
<p>It should be noted that the length of the column affects in database level type
as well as application level validated length (the length that is validated
with Doctrine validators).</p>
<ol><li>Example: Column named <code>content</code> with type <code>string</code> and length 3000 results in
   database type <code>TEXT</code> of which has database level length of 4000. However when
   the record is validated it is only allowed to have 'content' -column with
   maximum length of 3000.</li>
<li>Example: Column with type <code>integer</code> and length 1 results in <code>TINYINT</code>
   on many databases.</li>
</ol>

<p>In general Doctrine is smart enough to know which integer/string type to
use depending on the specified length.</p>
<hr />
<a class="section-anchor" id="title.1.1.4.2" name="title.1.1.4.2"></a><h4 class="section-header"><a href="#title.1.1.4.2">Type modifiers<i class="fas fa-link"></i></a></h4>
<p>Within the Doctrine API there are a few modifiers that have been
designed to aid in optimal table design. These are:</p>
<ul><li> The notnull modifiers</li>
<li> The length modifiers</li>
<li> The default modifiers</li>
<li> unsigned modifiers for some field definitions, although not all
   DBMS's support this modifier for integer field types.</li>
<li> collation modifiers (not supported by all drivers)</li>
<li> fixed length modifiers for some field definitions.</li>
</ul>

<p>Building upon the above, we can say that the modifiers alter the field
definition to create more specific field types for specific usage scenarios.
The notnull modifier will be used in the following way to set the default DBMS
NOT NULL Flag on the field to true or false, depending on the DBMS's definition
of the field value: In PostgreSQL the &quot;NOT NULL&quot; definition will be set to &quot;NOT
NULL&quot;, whilst in MySQL (for example) the &quot;NULL&quot; option will be set to &quot;NO&quot;. In
order to define a &quot;NOT NULL&quot; field type, we simply add an extra parameter to
our definition array (See the <a href="../">examples</a> in the
following section)</p>
<pre><code class="text">'sometime' = array(
    'type' =&gt; 'time',
    'default' =&gt; '12:34:05',
    'notnull' =&gt; true,
),
</code></pre>
<p>Using the above example, we can also explore the default field operator.
Default is set in the same way as the notnull operator to set a default value
for the field. This value may be set in any character set that the DBMS
supports for text fields, and any other valid data for the field's data type.
In the above example, we have specified a valid time for the &quot;Time&quot; data type,
'12:34:05'. Remember that when setting default dates and times, as well as
datetimes, you should research and stay within the epoch of your chosen DBMS,
otherwise you will encounter difficult to diagnose errors!</p>
<pre><code class="text">'sometext' = array(
    'type' =&gt; 'string',
    'length' =&gt; 12,
),
</code></pre>
<p>The above example will create a character varying field of length 12 characters
in the database table. If the length definition is left out, Doctrine will
create a length of the maximum allowable length for the data type specified,
which may create a problem with some field types and indexing. Best practice is
to define lengths for all or most of your fields.</p>
<hr />
<a class="section-anchor" id="title.1.1.4.3" name="title.1.1.4.3"></a><h4 class="section-header"><a href="#title.1.1.4.3">Boolean<i class="fas fa-link"></i></a></h4>
<p>The boolean data type represents only two values that can be either 1 or 0. Do
not assume that these data types are stored as integers because some DBMS
drivers may implement this type with single character text fields for a matter
of efficiency. Ternary logic is possible by using null as the third possible
value that may be assigned to fields of this type.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The next several examples are not meant for you to use and
give them a try. They are simply for demonstrating purposes to show
you how to use the different Doctrine data types using PHP code or
YAML schema files.</p>
</div>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('booltest', 'boolean');
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    booltest: boolean
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.4" name="title.1.1.4.4"></a><h4 class="section-header"><a href="#title.1.1.4.4">Integer<i class="fas fa-link"></i></a></h4>
<p>The integer type is the same as integer type in PHP. It may store integer
values as large as each DBMS may handle.</p>
<p>Fields of this type may be created optionally as unsigned integers but
not all DBMS support it. Therefore, such option may be ignored. Truly
portable applications should not rely on the availability of this
option.</p>
<p>The integer type maps to different database type depending on the column
length.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('integertest', 'integer', 4, array(
            'unsigned' =&gt; true
        ));
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    integertest:
      type: integer(4)
      unsigned: true
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.5" name="title.1.1.4.5"></a><h4 class="section-header"><a href="#title.1.1.4.5">Float<i class="fas fa-link"></i></a></h4>
<p>The float data type may store floating point decimal numbers. This data
type is suitable for representing numbers withina large scale range that
do not require high accuracy. The scale and the precision limits of the
values that may be stored in a database depends on the DBMS that it is
used.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('floattest', 'float');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    floattest: float
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.6" name="title.1.1.4.6"></a><h4 class="section-header"><a href="#title.1.1.4.6">Decimal<i class="fas fa-link"></i></a></h4>
<p>The decimal data type may store fixed precision decimal numbers. This
data type is suitable for representing numbers that require high
precision and accuracy.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('decimaltest', 'decimal');
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    decimaltest: decimal
</code></pre>
<p>You can specify the length of the decimal just like you would set the
<code>length</code> of any other column and you can specify the <code>scale</code> as an
option in the third argument:</p>
<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition() {
        $this-&gt;hasColumn('decimaltest', 'decimal', 18,
            array('scale' =&gt; 2)
        );
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    decimaltest:
      type: decimal(18)
      scale: 2
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.7" name="title.1.1.4.7"></a><h4 class="section-header"><a href="#title.1.1.4.7">String<i class="fas fa-link"></i></a></h4>
<p>The text data type is available with two options for the length: one
that is explicitly length limited and another of undefined length that
should be as large as the database allows.</p>
<p>The length limited option is the most recommended for efficiency
reasons. The undefined length option allows very large fields but may
prevent the use of indexes, nullability and may not allow sorting on
fields of its type.</p>
<p>The fields of this type should be able to handle 8 bit characters.
Drivers take care of DBMS specific escaping of characters of special
meaning with the values of the strings to be converted to this type.</p>
<p>By default Doctrine will use variable length character types. If fixed
length types should be used can be controlled via the fixed modifier.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('stringtest', 'string', 200, array(
            'fixed' =&gt; true
        ));
    }
}



</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    stringtest:
      type: string(200)
      fixed: true
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.8" name="title.1.1.4.8"></a><h4 class="section-header"><a href="#title.1.1.4.8">Array<i class="fas fa-link"></i></a></h4>
<p>This is the same as the 'array' type in PHP:</p>
<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('arraytest', 'array', 10000);
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    arraytest: array(10000)
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.9" name="title.1.1.4.9"></a><h4 class="section-header"><a href="#title.1.1.4.9">Object<i class="fas fa-link"></i></a></h4>
<p>Doctrine supports objects as column types. Basically you can set an
object to a field and Doctrine handles automatically the serialization /
unserialization of that object.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('objecttest', 'object');
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    objecttest: object
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The array and object types simply serialize the data when persisting to the
database and unserialize the data when pulling from the database.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.1.4.10" name="title.1.1.4.10"></a><h4 class="section-header"><a href="#title.1.1.4.10">Blob<i class="fas fa-link"></i></a></h4>
<p>Blob (Binary Large OBject) data type is meant to store data of undefined
length that may be too large to store in text fields, like data that is
usually stored in files.</p>
<p>Blob fields are usually not meant to be used as parameters of query
search clause (<code>WHERE</code>) unless the underlying DBMS supports a feature
usually known as &quot;full text search&quot;.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('blobtest', 'blob');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    blobtest: blob
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.11" name="title.1.1.4.11"></a><h4 class="section-header"><a href="#title.1.1.4.11">Clob<i class="fas fa-link"></i></a></h4>
<p>Clob (Character Large OBject) data type is meant to store data of
undefined length that may be too large to store in text fields, like
data that is usually stored in files.</p>
<p>Clob fields are meant to store only data made of printable ASCII
characters whereas blob fields are meant to store all types of data.</p>
<p>Clob fields are usually not meant to be used as parameters of query
search clause (<code>WHERE</code>) unless the underlying DBMS supports a feature
usually known as &quot;full text search&quot;.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('clobtest', 'clob');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    clobtest: clob
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.12" name="title.1.1.4.12"></a><h4 class="section-header"><a href="#title.1.1.4.12">Timestamp<i class="fas fa-link"></i></a></h4>
<p>The timestamp data type is a mere combination of the date and the time
of the day data types. The representation of values of the time stamp
type is accomplished by joining the date and time string values in a
single string joined by a space. Therefore, the format template is
<code>YYYY-MM-DD HH:MI:SS</code>. The represented values obey the same rules and
ranges described for the date and time data types.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('timestamptest', 'timestamp');
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    timestamptest: timestamp
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.13" name="title.1.1.4.13"></a><h4 class="section-header"><a href="#title.1.1.4.13">Time<i class="fas fa-link"></i></a></h4>
<p>The time data type may represent the time of a given moment of the day.
DBMS independent representation of the time of the day is also
accomplished by using text strings formatted according to the ISO-8601
standard.</p>
<p>The format defined by the ISO-8601 standard for the time of the day is
HH:MI:SS where HH is the number of hour the day from 00 to 23 and MI and
SS are respectively the number of the minute and of the second from 00
to 59. Hours, minutes and seconds numbered below 10 should be padded on
the left with 0.</p>
<p>Some DBMS have native support for time of the day formats, but for
others the DBMS driver may have to represent them as integers or text
values. In any case, it is always possible to make comparisons between
time values as well sort query results by fields of this type.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('timetest', 'time');
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    timetest: time
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.14" name="title.1.1.4.14"></a><h4 class="section-header"><a href="#title.1.1.4.14">Date<i class="fas fa-link"></i></a></h4>
<p>The date data type may represent dates with year, month and day. DBMS
independent representation of dates is accomplished by using text
strings formatted according to the IS0-8601 standard.</p>
<p>The format defined by the ISO-8601 standard for dates is YYYY-MM-DD
where YYYY is the number of the year (Gregorian calendar), MM is the
number of the month from 01 to 12 and DD is the number of the day from
01 to 31. Months or days numbered below 10 should be padded on the left
with 0.</p>
<p>Some DBMS have native support for date formats, but for others the DBMS
driver may have to represent them as integers or text values. In any
case, it is always possible to make comparisons between date values as
well sort query results by fields of this type.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('datetest', 'date');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    datetest: date
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.15" name="title.1.1.4.15"></a><h4 class="section-header"><a href="#title.1.1.4.15">Enum<i class="fas fa-link"></i></a></h4>
<p>Doctrine has a unified enum type. The possible values for the column can
be specified on the column definition with
Doctrine_Record::hasColumn</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>If you wish to use native enum types for your DBMS if it
supports it then you must set the following attribute:</p>
<pre><code class="">$conn-&gt;setAttribute(Doctrine_Core::ATTR_USE_NATIVE_ENUM, true);
</code></pre>
</div>
<p>Here is an example of how to specify the enum values:</p>
<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('enumtest', 'enum', null,
            array('values' =&gt; array('php', 'java', 'python'))
        );
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    enumtest:
      type: enum
      values: [php, java, python]
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.4.16" name="title.1.1.4.16"></a><h4 class="section-header"><a href="#title.1.1.4.16">Gzip<i class="fas fa-link"></i></a></h4>
<p>Gzip datatype is the same as string except that its automatically
compressed when persisted and uncompressed when fetched. This datatype
can be useful when storing data with a large compressibility ratio, such
as bitmap images.</p>

<pre><code class="">class Test extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('gziptest', 'gzip');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Test:
  columns:
    gziptest: gzip
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The family of php functions for <a href="">compressing
&lt;http://www.php.net/gzcompress&gt;</a> are used internally for compressing and
uncompressing the contents of the gzip column type.</p>
</div>
<a id="data-type-examples"></a>
<hr />
<a class="section-anchor" id="title.1.1.5" name="title.1.1.5"></a><h3 class="section-header"><a href="#title.1.1.5">Examples<i class="fas fa-link"></i></a></h3>
<p>Consider the following definition:</p>
<pre><code class="">class Example extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('id', 'string', 32, array(
            'type' =&gt; 'string',
            'fixed' =&gt; 1,
            'primary' =&gt; true,
            'length' =&gt; '32' )
        );

        $this-&gt;hasColumn('someint', 'integer', 10, array(
            'type' =&gt; 'integer',
            'unsigned' =&gt; true,
            'length' =&gt; '10'
        ));

        $this-&gt;hasColumn('sometime', 'time', 25, array(
            'type' =&gt; 'time',
            'default' =&gt; '12:34:05',
            'notnull' =&gt; true,
            'length' =&gt; '25'
        ));

        $this-&gt;hasColumn('sometext', 'string', 12, array(
            'type' =&gt; 'string',
            'length' =&gt; '12'
        ));

        $this-&gt;hasColumn('somedate', 'date', 25, array(
            'type' =&gt; 'date',
            'length' =&gt; '25'
        ));

        $this-&gt;hasColumn('sometimestamp', 'timestamp', 25, array(
            'type' =&gt; 'timestamp',
            'length' =&gt; '25'
        ));

        $this-&gt;hasColumn('someboolean', 'boolean', 25, array(
            'type' =&gt; 'boolean',
            'length' =&gt; '25'
        ));

        $this-&gt;hasColumn('somedecimal', 'decimal', 18, array(
            'type' =&gt; 'decimal',
            'length' =&gt; '18'
        ));

        $this-&gt;hasColumn('somefloat', 'float', 2147483647, array(
            'type' =&gt; 'float',
            'length' =&gt; '2147483647'
        ));

        $this-&gt;hasColumn('someclob', 'clob', 2147483647, array(
            'type' =&gt; 'clob',
            'length' =&gt; '2147483647'
        ));

        $this-&gt;hasColumn('someblob', 'blob', 2147483647, array(
            'type' =&gt; 'blob',
            'length' =&gt; '2147483647'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">Example:
  tableName: example
  columns:
    id:
      type:    string(32)
      fixed:   true
      primary: true
    someint:
      type:     integer(10)
      unsigned: true
    sometime:
      type:    time(25)
      default: '12:34:05'
      notnull: true
    sometext:      string(12)
    somedate:      date(25)
    sometimestamp: timestamp(25)
    someboolean:   boolean(25)
    somedecimal:   decimal(18)
    somefloat:     float(2147483647)
    someclob:      clob(2147483647)
    someblob:      blob(2147483647)
</code></pre>
<p>The above example will create the following database table in Pgsql:</p>
<table class="table table-bordered"><tr><td>Column</td><td>Type</td></tr><tr><td><code>id</code> <code>someint</code> <code>sometime</code> <code>sometext</code> <code>somedate</code> <code>sometimestamp</code> <code>someboolean</code> <code>somedecimal</code> <code>somefloat</code> <code>someclob</code> <code>someblob</code></td><td><code>character(32)</code> <code>integer</code> <code>time</code> without time zone <code>character</code> or <code>varying(12)</code> <code>date</code> <code>timestamp</code> without time zone <code>boolean</code> <code>numeric(18,2)</code> <code>double</code> precision <code>text</code> <code>bytea</code></td></tr></table>
<p>The schema will create the following database table in Mysql:</p>
<table class="table table-bordered"><tr><td>Field</td><td>Type</td></tr><tr><td><code>id</code> <code>someint</code> <code>sometime</code> <code>sometext</code> <code>somedate</code> <code>sometimestamp</code> <code>someboolean</code> <code>somedecimal</code> <code>somefloat</code> <code>someclob</code> <code>someblob</code></td><td><code>char(32)</code> <code>integer</code> <code>time</code> <code>varchar(12)</code> <code>date</code> <code>timestamp</code> <code>tinyint(1)</code> <code>decimal(18,2)</code> <code>double</code> <code>longtext</code> <code>longblob</code></td></tr></table>
<a id="defining-models-relationships"></a>
<hr />
<a class="section-anchor" id="title.1.2" name="title.1.2"></a><h2 class="section-header"><a href="#title.1.2">Relationships<i class="fas fa-link"></i></a></h2>
<hr />
<a class="section-anchor" id="title.1.2.1" name="title.1.2.1"></a><h3 class="section-header"><a href="#title.1.2.1">Introduction<i class="fas fa-link"></i></a></h3>
<p>In Doctrine all record relations are being set with
Doctrine_Record::hasOne methods.
Doctrine supports almost all kinds of database relations from simple
one-to-one foreign key relations to join table self-referencing
relations.</p>
<p>Unlike the column definitions the Doctrine_Record::hasMany and
Doctrine_Record::hasOne methods are placed within a method called
setUp(). Both methods take two arguments: the first argument is a string
containing the name of the class and optional alias, the second argument
is an array consisting of relation options. The option array contains
the following keys:</p>
<table class="table table-bordered"><tr><td>Name</td><td>Optional</td><td>Description</td></tr><tr><td><code>local</code>  <code>foreign</code>  <code>refClass</code>  <code>owningSide</code>         <code>onDelete</code>   <code>onUpdate</code>   <code>cascade</code> </td><td>No  No  Yes  Yes         Yes   Yes   Yes </td><td>The local field of the relation. Local field is the linked field inthe defining class. The foreign fieldof the relation. Foreign field is the linked field in the linked class. The name of the association class.This is only needed for many-to-many associations. Set to boolean true to indicate the owningside of the relation. The owning side is the side that owns the foreignkey. There can only be one owning side in an association between twoclasses. Note that this option is required if Doctrine can't guess theowning side or it's guess is wrong. An example where this is the case iswhen both 'local' and 'foreign' are part of the identifier (primarykey).  It never hurts to specify the owning side in this way. The <code>onDelete</code> integrity action that is applied on the foreign key constraint when the tables are created byDoctrine. The <code>onUpdate</code> integrity action that is applied on the foreign key constraint when thetables are created by Doctrine. Specify application level cascading operations. Currently only delete issupported</td></tr></table>
<p>So lets take our first example, say we have two classes <code>Forum_Board</code>
and <code>Forum_Thread</code>. Here <code>Forum_Board</code> has many
<code>Forum_Threads</code>, hence their relation is one-to-many. We don't want
to write <code>Forum_</code> when accessing relations, so we use relation
aliases and use the alias Threads.</p>
<p>First lets take a look at the <code>Forum_Board</code> class. It has three
columns: name, description and since we didn't specify any primary key,
Doctrine auto-creates an id column for it.</p>
<p>We define the relation to the <code>Forum_Thread</code> class by using the
hasMany method. Here the local field is the primary key of the
board class whereas the foreign field is the <code>board_id</code> field of the
<code>Forum_Thread</code> class.</p>

<pre><code class="">// models/Forum_Board.php
class Forum_Board extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string', 100);
        $this-&gt;hasColumn('description', 'string', 5000);
    }

    public function setUp()
    {
        $this-&gt;hasMany('Forum_Thread as Threads', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'board_id'
        ));
    }
}
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Notice the as keyword being used above. This means that the <code>Forum_Board</code>
has a many relationship defined to <code>Forum_Thread</code> but is aliased as
<code>Threads</code>.</p>
</div>
<p>Here is the same example in YAML format. You can read more about YAML in the
<a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Forum_Board:
  columns:
    name:        string(100)
    description: string(5000)
</code></pre>
<p>Then lets have a peek at the <code>Forum_Thread</code> class. The columns here
are irrelevant, but pay attention to how we define the relation. Since
each Thread can have only one Board we are using the hasOne
method. Also notice how we once again use aliases and how the local
column here is <code>board_id</code> while the foreign column is the <code>id</code>
column.</p>

<pre><code class="">// models/Forum_Thread.php
class Forum_Thread extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('user_id', 'integer');
        $this-&gt;hasColumn('board_id', 'integer');
        $this-&gt;hasColumn('title', 'string', 200);
        $this-&gt;hasColumn('updated', 'integer', 10);
        $this-&gt;hasColumn('closed', 'integer', 1);
    }

    public function setUp()
    {
        $this-&gt;hasOne('Forum_Board as Board', array(
            'local' =&gt; 'board_id',
            'foreign' =&gt; 'id'
        ));

        $this-&gt;hasOne('User', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'id'
        ));
    }
}

</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in the
<a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
orum_Thread:
 columns:
   user_id:  integer
   board_id: integer
   title:    string(200)
   updated:  integer(10)
   closed:   integer(1)
 relations:
   User:
     local: user_id
     foreign: id
     foreignAlias: Threads
   Board:
     class: Forum_Board
     local: board_id
     foreign: id
     foreignAlias: Threads
</code></pre>
<p>Now we can start using these classes. The same accessors that you've already
used for properties are all available for relations.</p>
<p>First lets create a new board:</p>
<pre><code class="">// test.php
$board = new Forum_Board();
$board-&gt;name = 'Some board';
</code></pre>
<p>Now lets create a new thread under the board:</p>
<pre><code class="">// ...
$board-&gt;Threads[0]-&gt;title = 'new thread 1';
$board-&gt;Threads[1]-&gt;title = 'new thread 2';
</code></pre>
<p>Each <code>Thread</code> needs to be associated to a user so lets create a new
<code>User</code> and associate it to each <code>Thread</code>:</p>
<pre><code class="">// ...
$user = new User();
$user-&gt;username = 'jwage';
$board-&gt;Threads[0]-&gt;User= $user;
$board-&gt;Threads[1]-&gt;User = $user;
</code></pre>
<p>Now we can save all the changes with one call. It will save the new
board as well as its threads:</p>
<pre><code class="">// ...
$board-&gt;save();
</code></pre>
<p>Lets do a little inspecting and see the data structure that is created
when you use the code from above. Add some code to test.php to
output an array of the object graph we've just populated:</p>
<pre><code class="">print_r($board-&gt;toArray(true));
</code></pre>
<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>The Doctrine_Record::toArray takes all the data of a
Doctrine_Record instance and converts it to an array so you
can easily inspect the data of a record. It accepts an argument named
<code>$deep</code> telling it whether or not to include relationships. In this
example we have specified <code>true</code> because we want to include the
<code>Threads</code> data.</p>
</div>
<p>Now when you execute test.php with PHP from your terminal you should see
the following</p>
<pre><code class="text">$ php test.php
Array (
    [id] =&gt; 2
    [name] =&gt; Some board
    [description] =&gt;
    [Threads] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [id] =&gt; 3
                    [user_id] =&gt; 1
                    [board_id] =&gt; 2
                    [title] =&gt; new thread 1
                    [updated] =&gt;
                    [closed] =&gt;
                    [User] =&gt; Array
                        (
                            [id] =&gt; 1
                            [is_active] =&gt; 1
                            [is_super_admin] =&gt; 0
                            [first_name] =&gt;
                            [last_name] =&gt;
                            [username] =&gt; jwage
                            [password] =&gt;
                            [type] =&gt;
                            [created_at] =&gt; 2009-01-20 16:41:57
                            [updated_at] =&gt; 2009-01-20 16:41:57
                        )
                )
            [1] =&gt; Array
                (
                    [id] =&gt; 4
                    [user_id] =&gt; 1
                    [board_id] =&gt; 2
                    [title] =&gt; new thread 2
                    [updated] =&gt;
                    [closed] =&gt;
                    [User] =&gt; Array
                        (
                            [id] =&gt; 1
                            [is_active] =&gt; 1
                            [is_super_admin] =&gt; 0
                            [first_name] =&gt;
                            [last_name] =&gt;
                            [username] =&gt; jwage
                            [password] =&gt;
                            [type] =&gt;
                            [created_at] =&gt; 2009-01-20 16:41:57
                            [updated_at] =&gt; 2009-01-20 16:41:57
                        )
                )
        )
)
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Notice how the auto increment primary key and foreign keys
are automatically set by Doctrine internally. You don't have to
worry about the setting of primary keys and foreign keys at all!</p>
</div>
<hr />
<a class="section-anchor" id="title.1.2.2" name="title.1.2.2"></a><h3 class="section-header"><a href="#title.1.2.2">Foreign Key Associations<i class="fas fa-link"></i></a></h3>
<hr />
<a class="section-anchor" id="title.1.2.2.1" name="title.1.2.2.1"></a><h4 class="section-header"><a href="#title.1.2.2.1">One to One<i class="fas fa-link"></i></a></h4>
<p>One-to-one relations are probably the most basic relations. In the
following example we have two classes, <code>User</code> and <code>Email</code> with their
relation being one-to-one.</p>
<p>First lets take a look at the <code>Email</code> class. Since we are binding a
one-to-one relationship we are using the hasOne method. Notice how
we define the foreign key column (<code>user_id</code>) in the <code>Email</code> class.
This is due to a fact that <code>Email</code> is owned by the <code>User</code> class and
not the other way around. In fact you should always follow this
convention - always place the foreign key in the owned class.</p>
<p>The recommended naming convention for foreign key columns is:
<code>[tableName]_[primaryKey]</code>. As here the foreign table is 'user' and
its primary key is 'id' we have named the foreign key column as
'user_id'.</p>

<pre><code class="">// models/Email.php
class Email extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('user_id', 'integer');
        $this-&gt;hasColumn('address', 'string', 150);
    }

    public function setUp()
    {
        $this-&gt;hasOne('User', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'id'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Email:
  columns:
      user_id: integer
      address: string(150)
  relations:
      User:
      local: user_id
      foreign: id
      foreignType: one
</code></pre>
<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>When using YAML schema files it is not required to specify the relationship
on the opposite end(<code>User</code>) because the relationship is automatically
flipped and added for you. The relationship will be named the name of the
class. So in this case the relationship on the <code>User</code> side will be called
<code>Email</code> and will be <code>many</code>. If you wish to customize this you can use
the <code>foreignAlias</code> and <code>foreignType</code> options.</p>
</div>
<p>The <code>Email</code> class is very similar to the <code>User</code> class. Notice how the local
and foreign columns are switched in the hasOne definition compared
to the definition of the <code>Email</code> class.</p>

<pre><code class="">// models/User.php
class User extends BaseUser
{
    public function setUp()
    {
        parent::setUp();
        $this-&gt;hasOne('Email', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'user_id'
        ));
    }
}
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Notice how we override the setUp method and call
parent::setUp`. This is because the <code>BaseUser` class which is
generated from YAML or from an existing database contains the main
setUp` method and we override it in the </code>User` class to add
an additional relationship.</p>
</div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
User:
    # ...
    relations:
        # ...
        Email:
            local: id
            foreign: user_id
</code></pre>
<hr />
<a class="section-anchor" id="title.1.2.2.2" name="title.1.2.2.2"></a><h4 class="section-header"><a href="#title.1.2.2.2">One to Many and Many to One<i class="fas fa-link"></i></a></h4>
<p>One-to-Many and Many-to-One relations are very similar to One-to-One
relations. The recommended conventions you came in terms with in the
previous chapter also apply to one-to-many and many-to-one relations.</p>
<p>In the following example we have two classes: <code>User</code> and
<code>Phonenumber</code>. We define their relation as one-to-many (a user can
have many phonenumbers). Here once again the <code>Phonenumber</code> is clearly
owned by the <code>User</code> so we place the foreign key in the <code>Phonenumber</code>
class.</p>

<pre><code class="">// models/User.php
class User extends BaseUser
{
    public function setUp()
    {
        parent::setUp();

        // ...

        $this-&gt;hasMany('Phonenumber as Phonenumbers', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'user_id'
        ));
    }
}
</code></pre>

<pre><code class="">// models/Phonenumber.php
class Phonenumber extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('user_id', 'integer');
        $this-&gt;hasColumn('phonenumber', 'string', 50);
    }

    public function setUp()
    {
        $this-&gt;hasOne('User', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'id'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
User:
  # ...
  relations:
    # ...
    Phonenumbers:
      type: many
      class: Phonenumber
      local: id
      foreign: user_id

Phonenumber:
  columns:
    user_id: integer
    phonenumber: string(50)
  relations:
    User:
      local: user_id
      foreign: id
</code></pre>
<hr />
<a class="section-anchor" id="title.1.2.2.3" name="title.1.2.2.3"></a><h4 class="section-header"><a href="#title.1.2.2.3">Tree Structure<i class="fas fa-link"></i></a></h4>
<p>A tree structure is a self-referencing foreign key relation. The
following definition is also called Adjacency List implementation in
terms of hierarchical data concepts.</p>

<pre><code class="">// models/Task.php
class Task extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string', 100);
        $this-&gt;hasColumn('parent_id', 'integer');
    }

    public function setUp()
    {
        $this-&gt;hasOne('Task as Parent', array(
            'local' =&gt; 'parent_id',
            'foreign' =&gt; 'id'
        ));
        $this-&gt;hasMany('Task as Subtasks', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'parent_id'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Task:
  columns:
    name: string(100)
    parent_id: integer
  relations:
    Parent:
      class: Task
      local: parent_id
      foreign: id
      foreignAlias: Subtasks
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The above implementation is purely an example and is not the most efficient
way to store and retrieve hierarchical data.  Check the <code>NestedSet</code>
behavior included in Doctrine for the recommended way to deal with
hierarchical data.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.2.3" name="title.1.2.3"></a><h3 class="section-header"><a href="#title.1.2.3">Join Table Associations<i class="fas fa-link"></i></a></h3>
<hr />
<a class="section-anchor" id="title.1.2.3.1" name="title.1.2.3.1"></a><h4 class="section-header"><a href="#title.1.2.3.1">Many to Many<i class="fas fa-link"></i></a></h4>
<p>If you are coming from relational database background it may be familiar to you
how many-to-many associations are handled: an additional association table is
needed.</p>
<p>In many-to-many relations the relation between the two components is always an
aggregate relation and the association table is owned by both ends. For example
in the case of users and groups: when a user is being deleted, the groups
he/she belongs to are not being deleted. However, the associations between this
user and the groups he/she belongs to are instead being deleted. This removes
the relation between the user and the groups he/she belonged to, but does not
remove the user nor the groups.</p>
<p>Sometimes you may not want that association table rows are being deleted when
user / group is being deleted. You can override this behavior by setting the
relations to association component (in this case <code>Groupuser</code>) explicitly.</p>
<p>In the following example we have Groups and Users of which relation is defined
as many-to-many. In this case we also need to define an additional class called
<code>Groupuser</code>.</p>

<pre><code class="">class User extends BaseUser
{
    public function setUp()
    {
        parent::setUp();

        // ...

        $this-&gt;hasMany('Group as Groups', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'group_id',
            'refClass' =&gt; 'UserGroup'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">User:
    # ...
    relations:
        # ...
        Groups:
            class: Group
            local: user_id
            foreign: group_id
            refClass: UserGroup
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The above <code>refClass</code> option is required when setting up many-to-many
relationships.</p>
</div>

<pre><code class="">// models/Group.php
class Group extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;setTableName('groups');
        $this-&gt;hasColumn('name', 'string', 30);
    }

    public function setUp()
    {
        $this-&gt;hasMany('User as Users', array(
            'local' =&gt; 'group_id',
            'foreign' =&gt; 'user_id',
            'refClass' =&gt; 'UserGroup'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Group:
  tableName: groups
  columns:
    name: string(30)
  relations:
    Users:
      class: User
      local: group_id
      foreign: user_id
      refClass: UserGroup
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Please note that <code>group</code> is a reserved keyword so that is why we renamed
the table to <code>groups</code> using the <code>setTableName</code> method. The other option
is to turn on identifier quoting using the
Doctrine_Core::ATTR_QUOTE_IDENTIFIER attribute so that the
reserved word is escaped with quotes.</p>

<pre><code class="">$manager-&gt;setAttribute(Doctrine_Core::Doctrine_Core::ATTR_QUOTE_IDENTIFIER,
true);
</code></pre>
</div>

<pre><code class="">// models/UserGroup.php
class UserGroup extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('user_id', 'integer', null, array(
            'primary' =&gt; true
        ));
        $this-&gt;hasColumn('group_id', 'integer', null, array(
            'primary' =&gt; true
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in the
<a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
UserGroup:
  columns:
    user_id:
      type: integer
      primary: true
    group_id:
      type: integer
      primary: true
</code></pre>
<p>Notice how the relationship is bi-directional. Both <code>User</code> has many <code>Group</code>
and <code>Group</code> has many <code>User</code>. This is required by Doctrine in order for
many-to-many relationships to fully work.</p>
<p>Now lets play around with the new models and create a user and assign it some
groups. First create a new <code>User</code> instance:</p>
<pre><code class="">// test.php
$user = new User();
</code></pre>
<p>Now add two new groups to the <code>User</code>:</p>
<pre><code class="">// ...
$user-&gt;Groups[0]-&gt;name = 'First Group';
$user-&gt;Groups[1]-&gt;name = 'Second Group';
</code></pre>
<p>Now you can save the groups to the database:</p>
<pre><code class="">// ...
$user-&gt;save();
</code></pre>
<p>Now you can delete the associations between user and groups it belongs
to:</p>
<pre><code class="">// ...
$user-&gt;UserGroup-&gt;delete();

$groups = new Doctrine_Collection(Doctrine_Core::getTable('Group'));

$groups[0]-&gt;name = 'Third Group';
$groups[1]-&gt;name = 'Fourth Group';

$user-&gt;Groups[2] = $groups[0]; // $user will now have 3 groups

$user-&gt;Groups = $groups; // $user will now have two groups 'Third Group' and 'Fourth Group'

$user-&gt;save();
</code></pre>
<p>Now if we inspect the <code>$user</code> object data with the
Doctrine_Record::toArray:</p>
<pre><code class="">// ...
print_r($user-&gt;toArray(true));
</code></pre>
<p>The above example would produce the following output</p>
<pre><code class="text">$ php test.php
Array
    (
        [id] =&gt; 1
        [is_active] =&gt; 1
        [is_super_admin] =&gt; 0
        [first_name] =&gt;
        [last_name] =&gt;
        [username] =&gt; default username
        [password] =&gt;
        [type] =&gt;
        [created_at] =&gt; 2009-01-20 16:48:57
        [updated_at] =&gt; 2009-01-20 16:48:57
        [Groups] =&gt; Array
            (
                [0] =&gt; Array
                    (
                        [id] =&gt; 3
                        [name] =&gt; Third Group
                    )
            [1] =&gt; Array
                (
                    [id] =&gt; 4
                    [name] =&gt; Fourth Group
                )
            )
        [UserGroup] =&gt; Array
            (
            )
    )
</code></pre>
<hr />
<a class="section-anchor" id="title.1.2.3.2" name="title.1.2.3.2"></a><h4 class="section-header"><a href="#title.1.2.3.2">Self Referencing (Nest Relations)<i class="fas fa-link"></i></a></h4>
<hr />
<a class="section-anchor" id="title.1.2.3.2.1" name="title.1.2.3.2.1"></a><h5 class="section-header"><a href="#title.1.2.3.2.1">Non-Equal Nest Relations<i class="fas fa-link"></i></a></h5>

<pre><code class="">// models/User.php
class User extends BaseUser
{
    public function setUp()
    {
        parent::setUp();

        // ...

        $this-&gt;hasMany('User as Parents', array(
            'local'    =&gt; 'child_id',
            'foreign'  =&gt; 'parent_id',
            'refClass' =&gt; 'UserReference'
        ));

        $this-&gt;hasMany('User as Children', array(
            'local'    =&gt; 'parent_id',
            'foreign'  =&gt; 'child_id',
            'refClass' =&gt; 'UserReference'
        ));
    }
}
</code></pre>

<pre><code class="">// models/UserReference.php
class UserReference extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('parent_id', 'integer', null, array(
            'primary' =&gt; true
        ));
        $this-&gt;hasColumn('child_id', 'integer', null, array(
            'primary' =&gt; true
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in the
<a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
User:
  # ...
  relations:
    # ...
    Parents:
      class: User
      local: child_id
      foreign: parent_id
      refClass: UserReference
      foreignAlias: Children

UserReference:
  columns:
    parent_id:
      type: integer
      primary: true
    child_id:
      type: integer
      primary: true
</code></pre>
<hr />
<a class="section-anchor" id="title.1.2.3.2.2" name="title.1.2.3.2.2"></a><h5 class="section-header"><a href="#title.1.2.3.2.2">Equal Nest Relations<i class="fas fa-link"></i></a></h5>
<p>Equal nest relations are perfectly suitable for expressing relations
where a class references to itself and the columns within the reference
class are equal.</p>
<p>This means that when fetching related records it doesn't matter which
column in the reference class has the primary key value of the main
class.</p>
<p>The previous clause may be hard to understand so lets take an example. We
define a class called User which can have many friends. Notice here how
we use the 'equal' option.</p>

<pre><code class="">// models/User.php
class User extends BaseUser
{

    public function setUp()
    {
        parent::setUp();

        // ...

        $this-&gt;hasMany('User as Friends', array(
            'local'    =&gt; 'user1',
            'foreign'  =&gt; 'user2',
            'refClass' =&gt; 'FriendReference',
            'equal'    =&gt; true,
        ));
    }
}
</code></pre>

<pre><code class="">// models/FriendReference.php
class FriendReference extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('user1', 'integer', null, array(
            'primary' =&gt; true
        ));
        $this-&gt;hasColumn('user2', 'integer', null, array(
            'primary' =&gt; true
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
User:
  # ...
  relations:
    # ...
    Friends:
      class: User
      local: user1
      foreign: user2
      refClass: FriendReference
      equal: true

FriendReference:
  columns:
    user1:
      type: integer
      primary: true
    user2:
      type: integer
      primary: true
</code></pre>
<p>Now lets define 4 users: Jack Daniels, John Brandy, Mikko Koskenkorva and
Stefan Beer with Jack Daniels and John Brandy being buddies and Mikko
Koskenkorva being the friend of all of them.</p>

<pre><code class="">// test.php
$daniels = new User();
$daniels-&gt;username = 'Jack Daniels';

$brandy = new User();
$brandy-&gt;username = 'John Brandy';

$koskenkorva = new User();
$koskenkorva-&gt;username = 'Mikko Koskenkorva';

$beer = new User();
$beer-&gt;username = 'Stefan Beer';

$daniels-&gt;Friends[0] = $brandy;

$koskenkorva-&gt;Friends[0] = $daniels;
$koskenkorva-&gt;Friends[1] = $brandy;
$koskenkorva-&gt;Friends[2] = $beer;

$conn-&gt;flush();
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Calling Doctrine_Connection::flush will trigger an
operation that saves all unsaved objects and wraps it in a single
transaction.</p>
</div>
<p>Now if we access for example the friends of Stefan Beer it would return
one user 'Mikko Koskenkorva':</p>
<pre><code class="">// ...
$beer-&gt;free();
unset($beer);
$user = Doctrine_Core::getTable('User')-&gt;findOneByUsername('Stefan Beer');

print_r($user-&gt;Friends-&gt;toArray());
</code></pre>
<p>Now when you execute test.php you will see the following:</p>
<pre><code class="text">$ php test.php
Array
    (
        [0] =&gt; Array
            (
                [id] =&gt; 4
                [is_active] =&gt; 1
                [is_super_admin] =&gt; 0
                [first_name] =&gt;
                [last_name] =&gt;
                [username] =&gt; Mikko Koskenkorva
                [password] =&gt;
                [type] =&gt;
                [created_at] =&gt; 2009-01-20 16:53:13
                [updated_at] =&gt; 2009-01-20 16:53:13
            )
    )
</code></pre>
<hr />
<a class="section-anchor" id="title.1.2.4" name="title.1.2.4"></a><h3 class="section-header"><a href="#title.1.2.4">Foreign Key Constraints<i class="fas fa-link"></i></a></h3>
<hr />
<a class="section-anchor" id="title.1.2.4.1" name="title.1.2.4.1"></a><h4 class="section-header"><a href="#title.1.2.4.1">Introduction<i class="fas fa-link"></i></a></h4>
<p>A foreign key constraint specifies that the values in a column (or a
group of columns) must match the values appearing in some row of another
table. In other words foreign key constraints maintain the referential
integrity between two related tables.</p>
<p>Say you have the product table with the following definition:</p>
<pre><code class="">// models/Product.php
class Product extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');
        $this-&gt;hasColumn('price', 'decimal', 18);
        $this-&gt;hasColumn('discounted_price', 'decimal', 18);
    }

    public function setUp()
    {
        $this-&gt;hasMany('Order as Orders', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'product_id'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Product:
  columns:
    name:
      type: string
    price:
      type: decimal(18)
    discounted_price:
      type: decimal(18)
    relations:
      Orders:
        class: Order
        local: id
        foreign: product_id
</code></pre>
<p>Let's also assume you have a table storing orders of those products. We
want to ensure that the order table only contains orders of products
that actually exist. So we define a foreign key constraint in the orders
table that references the products table:</p>
<pre><code class="">// models/Order.php
class Order extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;setTableName('orders');
        $this-&gt;hasColumn('product_id', 'integer');
        $this-&gt;hasColumn('quantity', 'integer');
    }

    public function setUp()
    {
        $this-&gt;hasOne('Product', array(
            'local' =&gt; 'product_id',
            'foreign' =&gt; 'id'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Order:
  tableName: orders
  columns:
    product_id: integer
    quantity: integer
    relations:
      Product:
        local: product_id
        foreign: id
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Foreign key columns are automatically indexed by Doctrine
to ensure optimal performance when issuing queries involving the
foreign key.</p>
</div>
<p>When exported the class <code>Order</code> would execute the following SQL:</p>
<pre><code class="mysql">CREATE TABLE orders (
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    product_id INTEGER REFERENCES products (id),
    quantity INTEGER,
    INDEX product_id_idx (product_id)
)
</code></pre>
<p>Now it is impossible to create <code>orders</code> with a <code>product_id</code> that
does not appear in the <code>product</code> table.</p>
<p>We say that in this situation the orders table is the referencing table
and the products table is the referenced table. Similarly, there are
referencing and referenced columns.</p>
<hr />
<a class="section-anchor" id="title.1.2.4.2" name="title.1.2.4.2"></a><h4 class="section-header"><a href="#title.1.2.4.2">Foreign Key Names<i class="fas fa-link"></i></a></h4>
<p>When you define a relationship in Doctrine, when the foreign key is
created in the database for you Doctrine will try to create a foreign
key name for you. Sometimes though, this name may not be something you
want so you can customize the name to use with the <code>foreignKeyName</code>
option to your relationship setup.</p>

<pre><code class="">// models/Order.php
class Order extends Doctrine_Record
{
    // ...

    public function setUp()
    {
        $this-&gt;hasOne('Product', array(
            'local' =&gt; 'product_id',
            'foreign' =&gt; 'id',
            'foreignKeyName' =&gt; 'product_id_fk'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Order:
    # ...
    relations:
        Product:
            local: product_id
            foreign: id
            foreignKeyName: product_id_fk
</code></pre>
<hr />
<a class="section-anchor" id="title.1.2.4.3" name="title.1.2.4.3"></a><h4 class="section-header"><a href="#title.1.2.4.3">Integrity Actions<i class="fas fa-link"></i></a></h4>
<hr />
<a class="section-anchor" id="title.1.2.4.3.1" name="title.1.2.4.3.1"></a><h5 class="section-header"><a href="#title.1.2.4.3.1">CASCADE<i class="fas fa-link"></i></a></h5>
<p>Delete or update the row from the parent table and automatically delete
or update the matching rows in the child table. Both <code>ON DELETE
CASCADE</code> and <code>ON UPDATE CASCADE</code> are supported. Between two tables,
you should not define several <code>ON UPDATE CASCADE</code> clauses that act on
the same column in the parent table or in the child table.</p>
<hr />
<a class="section-anchor" id="title.1.2.4.3.2" name="title.1.2.4.3.2"></a><h5 class="section-header"><a href="#title.1.2.4.3.2">SET NULL<i class="fas fa-link"></i></a></h5>
<p>Delete or update the row from the parent table and set the foreign key
column or columns in the child table to <code>NULL</code>. This is valid only if
the foreign key columns do not have the <code>NOT NULL</code> qualifier
specified. Both <code>ON DELETE SET NULL</code> and <code>ON UPDATE SET NULL</code>
clauses are supported.</p>
<hr />
<a class="section-anchor" id="title.1.2.4.3.3" name="title.1.2.4.3.3"></a><h5 class="section-header"><a href="#title.1.2.4.3.3">NO ACTION<i class="fas fa-link"></i></a></h5>
<p>In standard SQL, <code>NO ACTION</code> means no action in the sense that an
attempt to delete or update a primary key value is not allowed to
proceed if there is a related foreign key value in the referenced table.</p>
<hr />
<a class="section-anchor" id="title.1.2.4.3.4" name="title.1.2.4.3.4"></a><h5 class="section-header"><a href="#title.1.2.4.3.4">RESTRICT<i class="fas fa-link"></i></a></h5>
<p>Rejects the delete or update operation for the parent table. <code>NO
ACTION</code> and <code>RESTRICT</code> are the same as omitting the <code>ON DELETE</code> or
<code>ON UPDATE</code> clause.</p>
<hr />
<a class="section-anchor" id="title.1.2.4.3.5" name="title.1.2.4.3.5"></a><h5 class="section-header"><a href="#title.1.2.4.3.5">SET DEFAULT<i class="fas fa-link"></i></a></h5>
<p>In the following example we define two classes, <code>User</code> and
<code>Phonenumber</code> with their relation being one-to-many. We also add a
foreign key constraint with onDelete cascade action. This means that
every time a <code>user</code> is being deleted its associated <code>phonenumbers</code>
will also be deleted.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The integrity constraints listed above are case sensitive
and must be in upper case when being defined in your schema.</p>
</div>
<p>Below is an example where the database delete cascading is used.</p>

<pre><code class="">class Phonenumber extends Doctrine_Record
{
    // ...

    public function setUp()
    {
        parent::setUp();

        // ...

        $this-&gt;hasOne('User', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'id',
            'onDelete' =&gt; 'CASCADE'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Phonenumber:
    # ...
    relations:
        # ...
        User:
            local: user_id
            foreign: id
            onDelete: CASCADE
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Notice how the integrity constraints are placed on the side
where the foreign key exists. This is required in order for the
integrity constraints to be exported to your database properly.</p>
</div>
<a id="indexes"></a>
<hr />
<a class="section-anchor" id="title.1.3" name="title.1.3"></a><h2 class="section-header"><a href="#title.1.3">Indexes<i class="fas fa-link"></i></a></h2>
<hr />
<a class="section-anchor" id="title.1.3.1" name="title.1.3.1"></a><h3 class="section-header"><a href="#title.1.3.1">Introduction<i class="fas fa-link"></i></a></h3>
<p>Indexes are used to find rows with specific column values quickly.
Without an index, the database must begin with the first row and then
read through the entire table to find the relevant rows.</p>
<p>The larger the table, the more this consumes time. If the table has an
index for the columns in question, the database can quickly determine
the position to seek to in the middle of the data file without having to
look at all the data. If a table has 1,000 rows, this is at least 100
times faster than reading rows one-by-one.</p>
<p>Indexes come with a cost as they slow down the inserts and updates.
However, in general you should <strong>always</strong> use indexes for the fields
that are used in SQL where conditions.</p>
<hr />
<a class="section-anchor" id="title.1.3.2" name="title.1.3.2"></a><h3 class="section-header"><a href="#title.1.3.2">Adding indexes<i class="fas fa-link"></i></a></h3>
<p>You can add indexes by using <code>Doctrine_Record::index</code>. An example of
adding a simple index to field called name:</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The following index examples are not meant for you to
actually add to your test Doctrine environment. They are only meant
to demonstrate the API for adding indexes.</p>
</div>

<pre><code class="">class IndexTest extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');
        $this-&gt;index('myindex', array(
            'fields' =&gt; array('name')
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">IndexTest:
  columns:
    name: string
  indexes:
    myindex:
      fields: [name]
</code></pre>
<p>An example of adding a multi-column index to field called <code>name</code>:</p>
<pre><code class="">class MultiColumnIndexTest extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');
        $this-&gt;hasColumn('code', 'string');

        $this-&gt;index('myindex', array(
            'fields' =&gt; array('name', 'code')
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in the
<a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">MultiColumnIndexTest:
  columns:
    name: string
    code: string
  indexes:
    myindex:
      fields: [name, code]
</code></pre>
<p>An example of adding multiple indexes on same table:</p>
<pre><code class="">class MultipleIndexTest extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');
        $this-&gt;hasColumn('code', 'string'); $this-&gt;hasColumn('age', 'integer');

        $this-&gt;index('myindex', array(
            'fields' =&gt; array('name', 'code')
        ));

        $this-&gt;index('ageindex', array(
            'fields' =&gt; array('age')
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">MultipleIndexTest:
  columns:
    name: string
    code: string
    age: integer
  indexes:
    myindex:
      fields: [name, code]
    ageindex:
      fields: [age]
</code></pre>
<hr />
<a class="section-anchor" id="title.1.3.3" name="title.1.3.3"></a><h3 class="section-header"><a href="#title.1.3.3">Index options<i class="fas fa-link"></i></a></h3>
<p>Doctrine offers many index options, some of them being database
specific. Here is a full list of available options:</p>
<table class="table table-bordered"><tr><td>Name</td><td>Description</td></tr><tr><td><code>sorting</code> <code>length</code> <code>primary</code> <code>type</code></td><td>A string valuethat can be either 'ASC' or 'DESC'. Index length (only some drivers support this). Whether or not the index is a primary index. A string value that can be unique, 'fulltext', 'gist' or 'gin'.</td></tr></table>
<p>Here is an example of how to create a unique index on the name column.</p>

<pre><code class="">class MultipleIndexTest extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');
        $this-&gt;hasColumn('code', 'string');
        $this-&gt;hasColumn('age', 'integer');

        $this-&gt;index('myindex', array(
            'fields' =&gt; array(
                'name' =&gt; array(
                    'sorting' =&gt; 'ASC',
                    'length'  =&gt; 10),
                'code'
            ),
            'type' =&gt; 'unique',
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in the
<a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">MultipleIndexTest:
  columns:
    name: string
    code: string
    age: integer
  indexes:
    myindex:
      fields:
        name:
          sorting: ASC
          length: 10
        code:
      type: unique
</code></pre>
<hr />
<a class="section-anchor" id="title.1.3.4" name="title.1.3.4"></a><h3 class="section-header"><a href="#title.1.3.4">Special indexes<i class="fas fa-link"></i></a></h3>
<p>Doctrine supports many special indexes. These include Mysql FULLTEXT and
Pgsql GiST indexes. In the following example we define a Mysql FULLTEXT
index for the field 'content'.</p>

<pre><code class="">// models/Article.php
class Article extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string', 255);
        $this-&gt;hasColumn('content', 'string');

        $this-&gt;option('type', 'MyISAM');

        $this-&gt;index('content', array(
            'fields' =&gt; array('content'),
            'type'   =&gt; 'fulltext'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Article:
  options:
    type: MyISAM
  columns:
    name: string(255)
    content: string
  indexes:
    content:
      fields: [content]
      type: fulltext
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Notice how we set the table type to <code>MyISAM</code>. This is
because the <code>fulltext</code> index type is only supported in <code>MyISAM</code>
so you will receive an error if you use something like <code>InnoDB</code>.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.4" name="title.1.4"></a><h2 class="section-header"><a href="#title.1.4">Checks<i class="fas fa-link"></i></a></h2>
<p>You can create any kind of <code>CHECK</code> constraints by using the check
method of the Doctrine_Record. In the last example we add
constraint to ensure that price is always higher than the discounted price.</p>

<pre><code class="">// models/Product.php
class Product extends Doctrine_Record
{
    public function setTableDefinition()
    {
        // ...
        $this-&gt;check('price &gt; discounted_price');
    }

    // ...
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Product:
  # ...
  checks:
    price_check: price &gt; discounted_price
</code></pre>
<p>Generates (in pgsql):</p>
<pre><code class="postgres">CREATE TABLE product (
    id INTEGER,
    price NUMERIC,
    discounted_price NUMERIC,
    PRIMARY KEY(id),
    CHECK (price &gt;= 0),
    CHECK (price &lt;= 1000000),
    CHECK (price &gt; discounted_price)
)
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Some databases don't support <code>CHECK</code> constraints. When
this is the case Doctrine simply skips the creation of check
constraints.</p>
</div>
<p>If the Doctrine validators are turned on the given definition would also
ensure that when a record is being saved its price is always greater
than zero.</p>
<p>If some of the prices of the saved products within a transaction is
below zero, Doctrine throws <code>Doctrine_Validator_Exception</code> and
automatically rolls back the transaction.</p>
<hr />
<a class="section-anchor" id="title.1.5" name="title.1.5"></a><h2 class="section-header"><a href="#title.1.5">Table Options<i class="fas fa-link"></i></a></h2>
<p>Doctrine offers various table options. All table options can be set via
the <code>Doctrine_Record::option</code> function.</p>
<p>For example if you are using MySQL and want to use INNODB tables it can
be done as follows:</p>
<pre><code class="">class MyInnoDbRecord extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');
        $this-&gt;option('type', 'INNODB');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">MyInnoDbRecord:
  columns:
    name: string
  options:
    type: INNODB
</code></pre>
<p>In the following example we set the collate and character set options:</p>
<pre><code class="">class MyCustomOptionRecord extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('name', 'string');

        $this-&gt;option('collate', 'utf8_unicode_ci');
        $this-&gt;option('charset', 'utf8');
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml">MyCustomOptionRecord:
  columns:
    name: string
  options:
    collate: utf8_unicode_ci
    charset: utf8
</code></pre>
<p>It is worth noting that for certain databases (Firebird, MySql and
PostgreSQL) setting the charset option might not be enough for Doctrine
to return data properly. For those databases, users are advised to also
use the <code>setCharset</code> function of the database connection:</p>
<pre><code class="">$conn = Doctrine_Manager::connection();
$conn-&gt;setCharset('utf8');
</code></pre>
<hr />
<a class="section-anchor" id="title.1.6" name="title.1.6"></a><h2 class="section-header"><a href="#title.1.6">Record Filters<i class="fas fa-link"></i></a></h2>
<p>Doctrine offers the ability to attach record filters when defining your
models. A record filter is invoked whenever you access a property on a
model that is invalid. So it allows you to essentially add properties
dynamically to a model through the use of one of these filters.</p>
<p>To attach a filter you just need to add it in the setUp method of
your model definition:</p>
<pre><code class="">class User extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('username', 'string', 255);
        $this-&gt;hasColumn('password', 'string', 255);
    }

    public function setUp()
    {
        $this-&gt;hasOne('Profile', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'user_id'
        ));
        $this-&gt;unshiftFilter(new Doctrine_Record_Filter_Compound(array('Profile')));
    }
}

class Profile extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this-&gt;hasColumn('user_id', 'integer');
        $this-&gt;hasColumn('first_name', 'string', 255);
        $this-&gt;hasColumn('last_name', 'string', 255);
    }

    public function setUp()
    {
        $this-&gt;hasOne('User', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'id'
        ));
    }
}
</code></pre>
<p>Now with the above example we can easily access the properties of the
<code>Profile</code> relationship when using an instance of <code>User</code>. Here is an
example:</p>
<pre><code class="">$user = Doctrine_Core::getTable('User')
            -&gt;createQuery('u')
            -&gt;innerJoin('u.Profile p')
            -&gt;where('p.username = ?', 'jwage')
            -&gt;fetchOne();

echo $user-&gt;first_name . ' ' . $user-&gt;last_name;
</code></pre>
<p>When we ask for the <code>first_name</code> and <code>last_name</code> properties they
do not exist on the <code>$user</code> instance so they are forwarded to the
<code>Profile</code> relationship. It is the same as if you were to do the
following:</p>
<pre><code class="">echo $user-&gt;Profile-&gt;first_name . ' ' . $user-&gt;Profile-&gt;last_name;
</code></pre>
<p>You can write your own record filters pretty easily too. All that is
required is you create a class which extends
<code>Doctrine_Record_Filter</code> and implements the filterSet and
filterGet methods. Here is an example:</p>
<pre><code class="">class MyRecordFilter extends Doctrine_Record_Filter
{
    public function filterSet(Doctrine_Record $record, $name, $value)
    {
        // try and set the property
        throw new Doctrine_Record_UnknownPropertyException(sprintf(
            'Unknown record property / related component &quot;%s&quot; on &quot;%s&quot;',
            $name,
            get_class($record)
        ));
    }

    public function filterGet(Doctrine_Record, $name)
    {
        // try and get the property
        throw new Doctrine_Record_UnknownPropertyException(sprintf(
            'Unknown record property / related component &quot;%s&quot; on &quot;%s&quot;',
            $name,
            get_class($record)
        ));
    }
}
</code></pre>
<p>Now you can add the filter to your models:</p>
<pre><code class="">class MyModel extends Doctrine_Record
{
    // ...

    public function setUp()
    {
        // ...
        $this-&gt;unshiftFilter(new MyRecordFilter());
    }
}
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Remember to be sure to throw an instance of the
<code>Doctrine_Record_UnknownPropertyException</code> exception class if
filterGet fail to find the property.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.7" name="title.1.7"></a><h2 class="section-header"><a href="#title.1.7">Transitive Persistence<i class="fas fa-link"></i></a></h2>
<p>Doctrine offers both database and application level cascading
operations. This section will explain in detail how to setup both
application and database level cascades.</p>
<hr />
<a class="section-anchor" id="title.1.7.1" name="title.1.7.1"></a><h3 class="section-header"><a href="#title.1.7.1">Application-Level Cascades<i class="fas fa-link"></i></a></h3>
<p>Since it can be quite cumbersome to save and delete individual objects,
especially if you deal with an object graph, Doctrine provides
application-level cascading of operations.</p>
<hr />
<a class="section-anchor" id="title.1.7.1.1" name="title.1.7.1.1"></a><h4 class="section-header"><a href="#title.1.7.1.1">Save Cascades<i class="fas fa-link"></i></a></h4>
<p>You may already have noticed that save operations are already
cascaded to associated objects by default.</p>
<hr />
<a class="section-anchor" id="title.1.7.1.2" name="title.1.7.1.2"></a><h4 class="section-header"><a href="#title.1.7.1.2">Delete Cascades<i class="fas fa-link"></i></a></h4>
<p>Doctrine provides a second application-level cascade style: delete.
Unlike the save cascade, the delete cascade needs to be turned on
explicitly as can be seen in the following code snippet:</p>
<pre><code class="">// models/User.php
class User extends BaseUser
{
    // ...
    public function setUp()
    {
        parent::setup();

        // ...

        $this-&gt;hasMany('Address as Addresses', array(
            'local' =&gt; 'id',
            'foreign' =&gt; 'user_id',
            'cascade' =&gt; array('delete')
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter</p>
<pre><code class="yaml"># schema.yml
User:
    # ...
    relations:
        # ...
        Addresses:
            class: Address
            local: id
            foreign: user_id
            cascade: [delete]
</code></pre>
<p>The <code>cascade</code> option is used to specify the operations that are
cascaded to the related objects on the application-level.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Please note that the only currently supported value is <code>delete</code>, more
options will be added in future releases of Doctrine.</p>
</div>
<p>In the example above, Doctrine would cascade the deletion of a <code>User</code>
to it's associated <code>Addresses</code>. The following describes the generic
procedure when you delete a record through $record-&gt;delete:</p>
<ol><li>Doctrine looks at the relations to see if there are any deletion
   cascades it needs to apply. If there are no deletion cascades, go to 3).</li>
<li>For each relation that has a delete cascade specified, Doctrine
   verifies that the objects that are the target of the cascade are loaded.
   That usually means that Doctrine fetches the related objects from the
   database if they're not yet loaded.(Exception: many-valued associations
   are always re-fetched from the database, to make sure all objects are
   loaded). For each associated object, proceed with step 1).</li>
<li>Doctrine orders all deletions and executes them in the most
   efficient way, maintaining referential integrity.</li>
</ol>

<p>From this description one thing should be instantly clear:
Application-level cascades happen on the object-level, meaning
operations are cascaded from one object to another and in order to do
that the participating objects need to be available.</p>
<p>This has some important implications:</p>
<ul><li> Application-level delete cascades don't perform well on many-valued
   associations when there are a lot of objects in the related
   collection (that is because they need to be fetched from the
   database, the actual deletion is pretty efficient).</li>
<li> Application-level delete cascades do not skip the object lifecycle as
   database-level cascades do (see next chapter). Therefore all
   registered event listeners and other callback methods are properly
   executed in an application-level cascade.</li>
</ul>

<hr />
<a class="section-anchor" id="title.1.7.2" name="title.1.7.2"></a><h3 class="section-header"><a href="#title.1.7.2">Database-Level Cascades<i class="fas fa-link"></i></a></h3>
<p>Some cascading operations can be done much more efficiently at the
database level. The best example is the delete cascade.</p>
<p>Database-level delete cascades are generally preferrable over
application-level delete cascades except:</p>
<ul><li> Your database does not support database-level cascades (i.e. when
   using MySql with MYISAM tables).</li>
<li> You have listeners that listen on the object lifecycle and you want
   them to get invoked.</li>
</ul>

<p>Database-level delete cascades are applied on the foreign key
constraint. Therefore they're specified on that side of the relation
that owns the foreign key. Picking up the example from above, the
definition of a database-level cascade would look as follows:</p>
<pre><code class="">// models/Address.php
class Address extends Doctrine_Record
{
    public function setTableDefinition() {
        $this-&gt;hasColumn('user_id', 'integer');
        $this-&gt;hasColumn('address', 'string', 255);
        $this-&gt;hasColumn('country', 'string', 255);
        $this-&gt;hasColumn('city', 'string', 255);
        $this-&gt;hasColumn('state', 'string', 2);
        $this-&gt;hasColumn('postal_code', 'string', 25);
    }

    public function setUp()
    {
        $this-&gt;hasOne('User', array(
            'local' =&gt; 'user_id',
            'foreign' =&gt; 'id',
            'onDelete' =&gt; 'CASCADE'
        ));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Address:
  columns:
    user_id: integer
    address: string(255)
    country: string(255)
    city: string(255)
    state: string(2)
    postal_code: string(25)
  relations:
    User:
      local: user_id
      foreign: id
      onDelete: CASCADE
</code></pre>
<p>The <code>onDelete</code> option is translated to proper DDL/DML statements when
Doctrine creates your tables.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Note that <code>'onDelete' =&gt; 'CASCADE'</code> is specified on the
Address class, since the Address owns the foreign key (<code>user_id</code>)
and database-level cascades are applied on the foreign key.</p>
</div>
<p>Currently, the only two supported database-level cascade styles are for
<code>onDelete</code> and <code>onUpdate</code>. Both are specified on the side that owns
the foreign key and applied to your database schema when Doctrine
creates your tables.</p>
<hr />
<a class="section-anchor" id="title.1.8" name="title.1.8"></a><h2 class="section-header"><a href="#title.1.8">Conclusion<i class="fas fa-link"></i></a></h2>
<p>Now that we know everything about how to define our Doctrine models, I think we
are ready to move on to learning about how to <a href="working-with-models.html">work with models</a> in your application.</p>
<p>This is a very large topic as well so take a break, grab a mountain dew
and hurry back for the <a href="working-with-models.html">next chapter</a>.</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

                            
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://staging.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?f32c09"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

            <script src="https://staging.doctrine-project.org/js/sidebar.js?6349dd"></script>

    <script type="text/javascript">
        new Sidebar();
    </script>

        
        
            </body>
</html>
