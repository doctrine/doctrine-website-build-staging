<!DOCTYPE html>
<html>
    <head>
        <title>        Unit Testing - Doctrine Doctrine1 ORM (Doctrine1)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine1 ORM Documentation: Unit Testing ">

        <meta name="keywords" content="                    php,doctrine1,orm,database,documentation,unit,testing
    ">

                    <meta name="robots" content="noindex">
        
        
                    <link rel="canonical" href="https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/unit-testing.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://staging.doctrine-project.org/frontend/css/index.css?c900c9"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/unit-testing.html" />
        <meta property="og:title" content="        Unit Testing - Doctrine Doctrine1 ORM (Doctrine1)
    " />
        <meta property="og:description" content="Doctrine Doctrine1 ORM Documentation: Unit Testing " />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Unit Testing",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://staging.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://staging.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine1/edit/master/docs/en/manual/unit-testing.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://staging.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Doctrine1",
            "item": "https://staging.doctrine-project.org/projects/doctrine1.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://staging.doctrine-project.org/projects/doctrine1/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Unit Testing",
            "item": "https://staging.doctrine-project.org/projects/doctrine1/en/latest/manual/unit-testing.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                                <li class="breadcrumb-item"><a href="https://staging.doctrine-project.org/projects/doctrine1/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Unit Testing</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>This project is no longer maintained and has been archived.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine1/en/latest/manual/unit-testing.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item active" href="/projects/doctrine1/en/latest/manual/unit-testing.html">
                                                        master

                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                                                                                    </div>
                                </div>
                            
                            

            <div class="section" id="unit-testing">
            <h1 class="section-header ">
    <a href="#unit-testing">
        Unit Testing
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>Doctrine is programmatically tested using UnitTests. You can read more
about unit testing <a href="http://en.wikipedia.org/wiki/Unit_testing">here</a> on
Wikipedia.</p>

            <div class="section" id="running-tests">
            <h2 class="section-header ">
    <a href="#running-tests">
        Running tests
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>In order to run the tests that come with doctrine you need to check out
the entire project, not just the lib folder.</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>svn co http://svn.doctrine-project.org/branches/1.2 /path/to/co/doctrine</code></pre></div>
            
    <p>Now change directory to the checked out copy of doctrine.</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>cd /path/to/co/doctrine</code></pre></div>
            
    <p>You should see the following files and directories listed.</p>

            <div class="console"><pre><code class="console">CHANGELOG
COPYRIGHT
lib/
LICENSE
package.xml
tests/
tools/
vendor/</code></pre></div>
            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>It is not uncommon for the test suite to have fails that we
are aware of. Often Doctrine will have test cases for bugs or
enhancement requests that cannot be committed until later versions.
Or we simply don&#039;t have a fix for the issue yet and the test remains
failing. You can ask on the mailing list or in IRC for how many
fails should be expected in each version of Doctrine.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            <div class="section" id="cli">
            <h3 class="section-header ">
    <a href="#cli">
        CLI
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>To run tests on the command line, you must have php-cli installed.</p>

            
    <p>Navigate to the <code>/path/to/co/doctrine/tests</code> folder and execute the
<code>run.php</code> script:</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>cd /path/to/co/doctrine/tests
<span class="noselect">$ </span>php run.php</code></pre></div>
            
    <p>This will print out a progress bar as it is running all the unit tests.
When it is finished it will report to you what has passed and failed.</p>

            
    <p>The CLI has several options available for running specific tests, groups
of tests or filtering tests against class names of test suites. Run the
following command to check out these options.</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>php run.php -help</code></pre></div>
            
    <p>You can run an individual group of tests like this:</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>php run.php --group data_dict</code></pre></div>
    </div>
            <div class="section" id="browser">
            <h3 class="section-header ">
    <a href="#browser">
        Browser
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can run the unit tests in the browser by navigating to
<code>doctrine/tests/run.php</code>. Options can be set through <code>_GET</code>
variables.</p>

            
    <p>For example:</p>

            

<ul>
    <li class="dash"><a href="http://localhost/doctrine/tests/run.php">http://localhost/doctrine/tests/run.php</a></li>
    <li class="dash"><a href="http://localhost/doctrine/tests/run.php?filter=Limit&amp;group[]=query&amp;group[]=record">http://localhost/doctrine/tests/run.php?filter=Limit&amp;group[]=query&amp;group[]=record</a></li>
</ul>

                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td>
            <td>
                                                
    <p>Please note that test results may very depending on your
environment. For example if <code>php.ini</code> <code>apc.enable_cli</code> is set
to 0 then some additional tests may fail.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
            <div class="section" id="writing-tests">
            <h2 class="section-header ">
    <a href="#writing-tests">
        Writing Tests
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>When writing your test case, you can copy <code>TemplateTestCase.php</code> to
start off. Here is a sample test case:</p>

            <div class="console"><pre><code class="console">class Doctrine_Sample_TestCase extends Doctrine_UnitTestCase
{
    public function prepareTables()
    {
        $this->tables[] = "MyModel1";
        $this->tables[] = "MyModel2";

        parent::prepareTables();
    }

    public function prepareData()
    {
        $this->myModel = new MyModel1();
        //$this->myModel->save();
    }

    public function testInit()
    {

    }

    // This produces a failing test
    public function testTest()
    {
        $this->assertTrue( $this->myModel->exists() );
        $this->assertEqual( 0, 1 );
        $this->assertIdentical( 0, '0' );
        $this->assertNotEqual( 1, 2 );
        $this->assertTrue( ( 5 < 1 ) );
        $this->assertFalse( (1 > 2 ) );
    }
}

class Model1 extends Doctrine_Record
{
}

class Model2 extends Doctrine_Record
{
}</code></pre></div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The model definitions can be included directly in the test
case file or they can be put in
<code>/path/to/co/doctrine/tests/models</code> and they will be autoloaded
for you.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Once you are finished writing your test be sure to add it to <code>run.php</code>
like the following.</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>test->addTestCase( new Doctrine_Sample_TestCase() );</code></pre></div>
            
    <p>Now when you execute run.php you will see the new failure reported to
you.</p>

            <div class="section" id="ticket-tests">
            <h3 class="section-header ">
    <a href="#ticket-tests">
        Ticket Tests
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>In Doctrine it is common practice to commit a failing test case for each
individual ticket that is reported in trac. These test cases are
automatically added to run.php by reading all test case files found in
the <code>/path/to/co/doctrine/tests/Ticket/</code> folder.</p>

            
    <p>You can create a new ticket test case easily from the CLI:</p>

            <div class="console"><pre><code class="console"><span class="noselect">$ </span>php run.php --ticket 9999</code></pre></div>
            
    <p>If the ticket number 9999 doesn&#039;t already exist then the blank test case
class will be generated for you at <code>/path/to/co/doctrine/tests/Ticket/9999TestCase.php</code>.</p>

            <div class="console"><pre><code class="console">class Doctrine_Ticket_9999_TestCase extends Doctrine_UnitTestCase
{
}</code></pre></div>
    </div>
            <div class="section" id="methods-for-testing">
            <h3 class="section-header ">
    <a href="#methods-for-testing">
        Methods for testing
        <i class="fas fa-link"></i>
    </a>
</h3>
            <div class="section" id="assert-equal">
            <h4 class="section-header ">
    <a href="#assert-equal">
        Assert Equal
        <i class="fas fa-link"></i>
    </a>
</h4>
            <div class="console"><pre><code class="console">// ...
public function test1Equals1()
{
    $this->assertEqual( 1, 1 );
}
// ...</code></pre></div>
    </div>
            <div class="section" id="assert-not-equal">
            <h4 class="section-header ">
    <a href="#assert-not-equal">
        Assert Not Equal
        <i class="fas fa-link"></i>
    </a>
</h4>
            <div class="console"><pre><code class="console">// ...
public function test1DoesNotEqual2()
{
    $this->assertNotEqual( 1, 2 );
}
// ...</code></pre></div>
    </div>
            <div class="section" id="assert-identical">
            <h4 class="section-header ">
    <a href="#assert-identical">
        Assert Identical
        <i class="fas fa-link"></i>
    </a>
</h4>
            
    <p>The <code>assertIdentical()</code> method is the same as the <code>assertEqual()</code>
except that its logic is stricter and uses the <code>===</code> for comparing the
two values.</p>

            <div class="console"><pre><code class="console">// ...
public function testAssertIdentical()
{
    $this->assertIdentical( 1, '1' );
}
// ...</code></pre></div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The above test would fail obviously because the first
argument is the number 1 casted as PHP type integer and the second
argument is the number 1 casted as PHP type string.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="assert-true">
            <h4 class="section-header ">
    <a href="#assert-true">
        Assert True
        <i class="fas fa-link"></i>
    </a>
</h4>
            <div class="console"><pre><code class="console">// ...
public function testAssertTrue()
{
    $this->assertTrue( 5 > 2 );
}
// ...</code></pre></div>
    </div>
            <div class="section" id="assert-false">
            <h4 class="section-header ">
    <a href="#assert-false">
        Assert False
        <i class="fas fa-link"></i>
    </a>
</h4>
            <div class="console"><pre><code class="console">// ...
public function testAssertFalse()
{
    $this->assertFalse( 5 < 2 );
}
// ...</code></pre></div>
    </div>
    </div>
            <div class="section" id="mock-drivers">
            <h3 class="section-header ">
    <a href="#mock-drivers">
        Mock Drivers
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine uses mock drivers for all drivers other than sqlite. The
following code snippet shows you how to use mock drivers:</p>

            <div class="console"><pre><code class="console">class Doctrine_Sample_TestCase extends Doctrine_UnitTestCase
{
    public function testInit()
    {
        $this->dbh  = new Doctrine_Adapter_Mock( 'oracle' );
        $this->conn = Doctrine_Manager::getInstance()->openConnection( $this->dbh );
    }
}</code></pre></div>
            
    <p>Now when you execute queries they won&#039;t actually be executed against a
real database. Instead they will be collected in an array and you will
be able to analyze the queries that were executed and make test
assertions against them.</p>

            <div class="console"><pre><code class="console">class Doctrine_Sample_TestCase extends Doctrine_UnitTestCase
{
    // ...
    public function testMockDriver()
    {
        $user           = new User();
        $user->username = 'jwage';
        $user->password = 'changeme';
        $user->save();

        $sql = $this->dbh->getAll();

        // print the sql array to find the query you're looking for
        // print_r( $sql );

        $this->assertEqual( $sql[0], 'INSERT INTO user (username, password) VALUES (?, ?)' );
    }
}</code></pre></div>
    </div>
            <div class="section" id="test-class-guidelines">
            <h3 class="section-header ">
    <a href="#test-class-guidelines">
        Test Class Guidelines
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Every class should have at least one TestCase equivalent and they should
inherit Doctrine_UnitTestCase. Test classes should refer to a class
or an aspect of a class, and they should be named accordingly.</p>

            
    <p>Some examples:</p>

            

<ul>
    <li class="dash">Doctrine_Record_TestCase is a good name because it refers to
the Doctrine_Record class</li>
    <li class="dash">Doctrine_Record_State_TestCase is also good, because it refers
to the state aspect of the Doctrine_Record class.</li>
    <li class="dash">Doctrine_PrimaryKey_TestCase is a bad name, because it&#039;s too
generic.</li>
</ul>

    </div>
            <div class="section" id="test-method-guidelines">
            <h3 class="section-header ">
    <a href="#test-method-guidelines">
        Test Method Guidelines
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Methods should support agile documentation and should be named so that
if it fails, it is obvious what failed. They should also give
information of the system they test</p>

            
    <p>For example the method test name
<code>Doctrine_Export_Pgsql_TestCase::testCreateTableSupportsAutoincPks()</code>
is a good name.</p>

            
    <p>Test method names can be long, but the method content should not be. If
you need several assert-calls, divide the method into smaller methods.
There should never be assertions within any loops, and rarely within
functions.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Commonly used testing method naming convention
<code>TestCase::test[methodName]</code> is <strong>not</strong> allowed in Doctrine. So in
this case <code>Doctrine_Export_Pgsql_TestCase::testCreateTable()</code>
would not be allowed!</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
            <div class="section" id="conclusion">
            <h2 class="section-header ">
    <a href="#conclusion">
        Conclusion
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Unit testing in a piece of software like Doctrine is so incredible
important. Without it, it would be impossible to know if a change we
make has any kind of negative affect on existing working use cases. With
our collection of unit tests we can be sure that the changes we make
won&#039;t break existing functionality.</p>

            
    <p>Now lets move on to learn about how we can <a href="improving-performance.html">Improving Performance</a> when using Doctrine.</p>

    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://staging.doctrine-project.org/frontend/js/bundle.js?ff3b61"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Doctrine1 master'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
        
            </body>
</html>
