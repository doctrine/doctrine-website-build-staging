<!DOCTYPE html>
<html>
    <head>
        <title>単一継承 - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="noindex">
        
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://staging.doctrine-project.org/css/style.css?c8b404" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://staging.doctrine-project.org/css/railscasts.css?62eb49" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://staging.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://staging.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://staging.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://staging.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://staging.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://staging.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://staging.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://staging.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://staging.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://staging.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://staging.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://staging.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://staging.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://staging.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://staging.doctrine-project.org/projects/doctrine1/ja/latest/manual/inheritance.html" />
        <meta property="og:title" content="単一継承 - Doctrine - PHP Database Tools" />
        <meta property="og:description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://staging.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://staging.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://staging.doctrine-project.org",
            "logo": "https://staging.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://staging.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://staging.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://staging.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://staging.doctrine-project.org/"><img src="https://staging.doctrine-project.org/images/doctrine-logo.svg?6c0dab" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://staging.doctrine-project.org/projects/reflection.html">Reflection</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://staging.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://staging.doctrine-project.org/contribute/" id="navbarContributeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contribute</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://staging.doctrine-project.org/contribute/website/">Contribute to Website</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://staging.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank"><img src="https://staging.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <main role="main" class="container-wrapper container">
                    
<p></p>
<p>Doctrineは3種類の継承戦略をサポートします。これらの戦略は混ぜることができます。三種類は単一、具象とカラム集約です。これらの異なる継承の使い方をこの章で学びます。</p>
<p>この章では前の章で利用してきたテスト環境の既存のすべてのスキーマとモデルを削除してください。</p>
<blockquote><p>$ rm schema.yml $ touch schema.yml $ rm -rf models/\*</p>
</blockquote>
<hr />
<a class="section-anchor" id="" name=""></a><h1 class="section-header"><a href="#">単一継承<i class="fas fa-link"></i></a></h1>
<p>単一継承は最も簡単でシンプルです。単一継承においてすべての子クラスは同じカラムを親として共有しすべての情報は親テーブルに保存されます。</p>
<blockquote><p>// models/Entity.php</p>
</blockquote>
<p>class Entity extends Doctrine\_Record { public function
setTableDefinition() { $this-&gt;hasColumn('name', 'string', 30);
$this-&gt;hasColumn('username', 'string', 20); $this-&gt;hasColumn('password',
'string', 16); $this-&gt;hasColumn('created\_at', 'timestamp');
$this-&gt;hasColumn('update\_at', 'timestamp'); } }</p>
<p><code>Entity</code>を継承する<code>User</code>モデルを作りましょう:</p>
<blockquote><p>// models/User.php</p>
</blockquote>
<p>class User extends Entity { }</p>
<p><code>Group</code>モデルに対しても同じことを行いましょう:</p>
<blockquote><p>// models/Group.php</p>
</blockquote>
<p>class Group extends Entity { }</p>
<p>YAMLフォーマットでの例は次の通りです。[doc yaml-schema-files
:name]の章でYAMLの詳細を読むことができます:</p>
<blockquote><p># schema.yml</p>
</blockquote>
<p>Entity: columns: name: string(30) username: string(20) password:
string(16) created\_at: timestamp updated\_at: timestamp</p>
<p>User: inheritance: extends: Entity type: simple</p>
<p>Group: inheritance: extends: Entity type: simple</p>
<p>上記のコードによって生成されたSQLを確認してみましょう:</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $sql = Doctrine\_Core::generateSqlFromArray(array('Entity',
'User', 'Group')); echo $sql[0];</p>
<p>上記のコードは次のSQLクエリを出力します:</p>
<blockquote><p>CREATE TABLE entity (id BIGINT AUTO\_INCREMENT, username VARCHAR(20),</p>
</blockquote>
<p>password VARCHAR(16), created\_at DATETIME, updated\_at DATETIME, type
VARCHAR(255), name VARCHAR(30), PRIMARY KEY(id)) ENGINE = INNODB</p>
<blockquote><p><strong>NOTE</strong>
YAMLスキーマファイルを使うとき子クラスでカラムを定義できますがYAMLが解析されるときカラムは自動的に親に移動します。これはカラムを簡単に組織できるようにするためだけです。</p>
</blockquote>
<hr />
<a class="section-anchor" id="" name=""></a><h1 class="section-header"><a href="#">具象継承<i class="fas fa-link"></i></a></h1>
<p>具象継承は子クラス用の独立したテーブルを作成します。しかしながら具象継承ではそれぞれのクラスはすべてのカラムを含むテーブルを生成します(継承されたカラムを含む)。具象継承を使うには下記で示されるように子クラスへの明示的な<code>parent::setTableDefinition()</code>を追加する必要があります。</p>
<blockquote><p>// models/TextItem.php</p>
</blockquote>
<p>class TextItem extends Doctrine\_Record { public function
setTableDefinition() { $this-&gt;hasColumn('topic', 'string', 100); } }</p>
<p><code>TextItem</code>を継承する<code>Comment</code>という名前のモデルを作り<code>content</code>という名前のカラムを追加してみましょう:</p>
<blockquote><p>// models/Comment.php</p>
</blockquote>
<p>class Comment extends TextItem { public function setTableDefinition() {
parent::setTableDefinition();</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>this->hasColumn('content', 'string', 300);</code></pre></div>
<p>}</p>
<p>YAMLフォーマットでの例は次の通りです。[doc yaml-schema-files
:name]の章でYAMLの詳細を読むことができます:</p>
<blockquote><p># schema.yml</p>
</blockquote>
<p>TextItem: columns: topic: string(100)</p>
<p>Comment: inheritance: extends: TextItem type: concrete columns: content:
string(300)</p>
<p>上記のモデルによって生成されたSQLをチェックしてみましょう:</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $sql = Doctrine::generateSqlFromArray(array('TextItem',
'Comment')); echo $sql[0] . &quot;&quot;; echo $sql[1];</p>
<p>上記のコードは次のSQLクエリを出力します:</p>
<blockquote><p>CREATE TABLE text\_item (id BIGINT AUTO\_INCREMENT, topic VARCHAR(100),</p>
</blockquote>
<p>PRIMARY KEY(id)) ENGINE = INNODB CREATE TABLE comment (id BIGINT
AUTO\_INCREMENT, topic VARCHAR(100), content TEXT, PRIMARY KEY(id))
ENGINE = INNODB</p>
<p>具象クラスにおいて追加のカラムを定義する必要はありませんが、それぞれのクラス用に個別のテーブルを作るには<code>setTableDefinition()</code>の呼び出しを繰り返し書かなければなりません。</p>
<p>次の例では<code>entity</code>、<code>user</code>と<code>group</code>と呼ばれるデータベーステーブルがあります。<code>Users</code>と<code>groups</code>は両方とも<code>entities</code>です。行わなければならないことは3つのクラス(<code>Entity</code>、<code>Group</code>と<code>User</code>)を書き<code>setTableDefinition()</code>メソッドの呼び出しを繰り返し記述することです。</p>
<blockquote><p>// models/Entity.php</p>
</blockquote>
<p>class Entity extends Doctrine\_Record { public function
setTableDefinition() { $this-&gt;hasColumn('name', 'string', 30);
$this-&gt;hasColumn('username', 'string', 20); $this-&gt;hasColumn('password',
'string', 16); $this-&gt;hasColumn('created', 'integer', 11); } }</p>
<p>// models/User.php</p>
<p>class User extends Entity { public function setTableDefinition() { //
次のメソッド呼び出しは // 具象継承で必要 parent::setTableDefinition(); }
}</p>
<p>// models/Group.php class Group extends Entity { public function
setTableDefinition() { // 次のメソッド呼び出しは // 具象継承で必要
parent::setTableDefinition(); } }</p>
<p>YAMLフォーマットでの例は次の通りです。[doc yaml-schema-files
:name]の章でYAMLの詳細を読むことができます:</p>
<blockquote><p>Entity: columns: name: string(30) username: string(20) password:</p>
</blockquote>
<p>string(16) created: integer(11)</p>
<p>User: inheritance: extends: Entity type: concrete</p>
<p>Group: tableName: groups inheritance: extends: Entity type: concrete</p>
<p>上記のモデルによって生成されたSQLをチェックしてみましょう:</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $sql = Doctrine::generateSqlFromArray(array('Entity', 'User',
'Group')); echo $sql[0] . &quot;&quot;; echo $sql[1] . &quot;&quot;; echo $sql[2] . &quot;&quot;;</p>
<p>上記のコードは次のSQLクエリを出力します:</p>
<blockquote><p>CREATE TABLE user (id BIGINT AUTO\_INCREMENT, name VARCHAR(30),</p>
</blockquote>
<p>username VARCHAR(20), password VARCHAR(16), created BIGINT, PRIMARY
KEY(id)) ENGINE = INNODB CREATE TABLE groups (id BIGINT AUTO\_INCREMENT,
name VARCHAR(30), username VARCHAR(20), password VARCHAR(16), created
BIGINT, PRIMARY KEY(id)) ENGINE = INNODB CREATE TABLE entity (id BIGINT
AUTO\_INCREMENT, name VARCHAR(30), username VARCHAR(20), password
VARCHAR(16), created BIGINT, PRIMARY KEY(id)) ENGINE = INNODB</p>
<hr />
<a class="section-anchor" id="" name=""></a><h1 class="section-header"><a href="#">カラム集約<i class="fas fa-link"></i></a></h1>
<p>次の例において<code>entity</code>という名前の1つのデータベーステーブルがあります。<code>Users</code>と<code>groups</code>は両方とも<code>entities</code>でこれらは同じデータベーステーブルを共有します。</p>
<p><code>entity</code>テーブルは<code>type</code>と呼ばれる1つのカラムを持ちます。このカラムは<code>group</code>もしくは<code>user</code>であることを伝えます。<code>users</code>はタイプ1でグループはタイプ2であると決めます。</p>
<p>行わなければならない唯一の作業は3のレコード(以前と同じ)を作成し親クラスからの<code>Doctrine_Table::setSubclasses()</code>メソッド呼び出しを追加することです。</p>
<blockquote><p>// models/Entity.php</p>
</blockquote>
<p>class Entity extends Doctrine\_Record { public function
setTableDefinition() { $this-&gt;hasColumn('name', 'string', 30);
$this-&gt;hasColumn('username', 'string', 20); $this-&gt;hasColumn('password',
'string', 16); $this-&gt;hasColumn('created\_at', 'timestamp');
$this-&gt;hasColumn('update\_at', 'timestamp');</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>this->setSubclasses(array(
        'User'  => array('type' => 1),
        'Group' => array('type' => 2)
    )
);</code></pre></div>
<p>}</p>
<p>// models/User.php class User extends Entity { }</p>
<p>// models/Group.php class Group extends Entity { }</p>
<p>YAMLフォーマットでの例は次の通りです。[doc yaml-schema-files
:name]の章でYAMLの詳細を読むことができます:</p>
<blockquote><p>Entity: columns: username: string(20) password: string(16) created\_at:</p>
</blockquote>
<p>timestamp updated\_at: timestamp</p>
<p>User: inheritance: extends: Entity type: column\_aggregation keyField:
type keyValue: 1</p>
<p>Group: inheritance: extends: Entity type: column\_aggregation keyField:
type keyValue: 2</p>
<p>上記のモデルによって生成されたSQLをチェックしてみましょう:</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $sql = Doctrine::generateSqlFromArray(array('Entity', 'User',
'Group')); echo $sql[0];</p>
<p>上記のコードは次のSQLクエリを出力します:</p>
<blockquote><p>CREATE TABLE entity (id BIGINT AUTO\_INCREMENT, username VARCHAR(20),</p>
</blockquote>
<p>password VARCHAR(16), created\_at DATETIME, updated\_at DATETIME, type
VARCHAR(255), PRIMARY KEY(id)) ENGINE = INNODB</p>
<blockquote><p><strong>NOTE</strong>
<code>type</code>カラムが自動的に追加されたことに注目してください。データベースのそれぞれのレコードが所属するモデルを知っているカラム集約継承です。</p>
</blockquote>
<p>この機能によって<code>Entity</code>テーブルにクエリを行い変えされたオブジェクトが親クラスで設定された制約にマッチする場合<code>User</code>もしくは<code>Group</code>オブジェクトを戻します。</p>
<p>具体的な内容は下記のコードで見てみましょう。最初に新しい<code>User</code>オブジェクトを保存しましょう:</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $user = new User(); $user-&gt;name = 'Bjarte S. Karlsen';
$user-&gt;username = 'meus'; $user-&gt;password = 'rat'; $user-&gt;save();</p>
<p>新しい<code>Group</code>オブジェクトを保存しましょう:</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $group = new Group(); $group-&gt;name = 'Users'; $group-&gt;username =
'users'; $group-&gt;password = 'password'; $group-&gt;save();</p>
<p>作成した<code>User</code>のid用の<code>Entity</code>モデルにクエリを行うと、<code>Doctrine_Query</code>は<code>User</code>のインスタンスを返します。</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $q = Doctrine\_Query::create() -&gt;from('Entity e') -&gt;where('e.id =
?');</p>
<p>$user = `q-&gt;fetchOne(array(`\ user-&gt;id));
echo get\_class($user); // User</p>
<p><code>Group</code>レコードに対して同じようなことを行うと、<code>Group</code>のインスタンスが戻されます。</p>
<blockquote><p>// test.php</p>
</blockquote>
<p>// ... $q = Doctrine\_Query::create() -&gt;from('Entity e') -&gt;where('e.id =
?');</p>
<p>$group = `q-&gt;fetchOne(array(`\ group-&gt;id));
echo get\_class($group); // Group</p>
<blockquote><p><strong>NOTE</strong>
上記の内容は<code>type</code>カラムであるから可能です。Doctrineはどのクラスによってそれぞれのレコードが作成されたのか知っているので、データは適切なサブクラスにハイドレイトされます。</p>
</blockquote>
<p>個別の<code>User</code>もしくは<code>Group</code>モデルにクエリを行うこともできます:</p>
<blockquote><p>$q = Doctrine\_Query::create() -&gt;select('u.id') -&gt;from('User u');</p>
</blockquote>
<p>echo $q-&gt;getSqlQuery();</p>
<p>上記の<code>getSql()</code>の呼び出しは次のSQLクエリを出力します:</p>
<blockquote><p>SELECT e.id AS e\_\_id FROM entity e WHERE (e.type = '1')</p>
<blockquote><p><strong>NOTE</strong>
<code>User</code>型であるレコードのみが返されるように<code>type</code>の条件が自動的に追加されたことに注目してください。</p>
</blockquote>
</blockquote>
<hr />
<a class="section-anchor" id="" name=""></a><h1 class="section-header"><a href="#">まとめ<i class="fas fa-link"></i></a></h1>
<p>モデルでPHPの継承機能を利用する方法を学んだので[doc behaviors
:name]の章に移動します。これは複雑なモデルを小さくて簡単なコードで維持するためのもっとも洗練された便利な機能の1つです。</p>
<p></p>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://cdn.ravenjs.com/3.24.2/raven.min.js" crossorigin="anonymous"></script>

        <script type="text/javascript">
            Raven.config('https://09ce137590054cfd8f0b7e9324d6ec14@sentry.io/1197701').install()
        </script>

        <script src="https://staging.doctrine-project.org/js/main.js?4138a7"></script>
        <script src="https://staging.doctrine-project.org/js/search.js?493399"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search'
            };

            new Main();

            new Search(projectSlug, versionSlug, searchBoxSettings);

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                console.log(eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }

            function googleTranslateElementInit() {
                $('#google_translate_element').html('');

                new google.translate.TranslateElement(
                    {pageLanguage: 'en'}, 'google_translate_element'
                );

                $('#google_translate_element select').on('change', function() {
                    var language = $('#google_translate_element select option:selected').text();

                    googleAnalyticsEvent('Translate', 'click', language);
                });
            }
        </script>

        <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>

        
        
            </body>
</html>
