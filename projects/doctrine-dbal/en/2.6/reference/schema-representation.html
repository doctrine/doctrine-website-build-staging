<!DOCTYPE html>
<html>
    <head>
        <title>Schema-Representation - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://new.doctrine-project.org/css/style.css?9" rel="stylesheet" type="text/css" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://new.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://new.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://new.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://new.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://new.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://new.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://new.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://new.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://new.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://new.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://new.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://new.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://new.doctrine-project.org/images/mstile-310x310.png" />

        <link rel="stylesheet" href="https://new.doctrine-project.org/components/highlightjs/styles/railscasts.css?9" />
        <link rel="alternate" type="application/atom+xml" href="https://new.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
        
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>
    </head>
    <body>

        <header>
            <nav class="navbar navbar-expand-md navbar-dark border-bottom">
                <a class="navbar-brand text-hide" href="https://new.doctrine-project.org/"><img src="https://new.doctrine-project.org/images/doctrine-logo.svg" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://new.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/lexer/">Lexer</a>
                                                            </div>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/search/">Search</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://github.com/doctrine/" target="_blank">Development</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Begin page content -->
        <main role="main" class="container">
                                                                
                                
                                                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/">Home</a></li>
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/projects/">Projects</a></li>
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/projects/dbal/">DBAL</a></li>
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/projects/doctrine-dbal/en/2.6/">Documentation</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Schema-Representation</li>
                        </ol>
                    </nav>
                
                                    <ul class="list-inline float-right">
                                                    <li class="list-inline-item mr-0">
                                <a href="/projects/doctrine-dbal/en/latest/reference/schema-representation.html" class="badge badge-secondary">master</a>
                            </li>
                                                    <li class="list-inline-item mr-0">
                                <a href="/projects/doctrine-dbal/en/2.6/reference/schema-representation.html" class="badge badge-primary">2.6</a>
                            </li>
                                                    <li class="list-inline-item mr-0">
                                <a href="/projects/doctrine-dbal/en/2.5/reference/schema-representation.html" class="badge badge-secondary">2.5</a>
                            </li>
                                            </ul>
                
                <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
</head>
<body>
<h1 class="section-header" id="title.1"><a href="#title.1">Schema-Representation<i class="fas fa-link"></i></a></h1>
<p>Doctrine has a very powerful abstraction of database schemas. It
offers an object-oriented representation of a database schema with
support for all the details of Tables, Sequences, Indexes and
Foreign Keys. These Schema instances generate a representation that
is equal for all the supported platforms. Internally this
functionality is used by the ORM Schema Tool to offer you create,
drop and update database schema methods from your Doctrine ORM
Metadata model. Up to very specific functionality of your database
system this allows you to generate SQL code that makes your Domain
model work.</p>
<p>You will be pleased to hear, that Schema representation is
completely decoupled from the Doctrine ORM though, that is you can
also use it in any other project to implement database migrations
or for SQL schema generation for any metadata model that your
application has. You can easily generate a Schema, as a simple
example shows:</p>
<pre><code class="php">&lt;?php
$schema = new \Doctrine\DBAL\Schema\Schema();
$myTable = $schema-&gt;createTable(&quot;my_table&quot;);
$myTable-&gt;addColumn(&quot;id&quot;, &quot;integer&quot;, array(&quot;unsigned&quot; =&gt; true));
$myTable-&gt;addColumn(&quot;username&quot;, &quot;string&quot;, array(&quot;length&quot; =&gt; 32));
$myTable-&gt;setPrimaryKey(array(&quot;id&quot;));
$myTable-&gt;addUniqueIndex(array(&quot;username&quot;));
$schema-&gt;createSequence(&quot;my_table_seq&quot;);

$myForeign = $schema-&gt;createTable(&quot;my_foreign&quot;);
$myForeign-&gt;addColumn(&quot;id&quot;, &quot;integer&quot;);
$myForeign-&gt;addColumn(&quot;user_id&quot;, &quot;integer&quot;);
$myForeign-&gt;addForeignKeyConstraint($myTable, array(&quot;user_id&quot;), array(&quot;id&quot;), array(&quot;onUpdate&quot; =&gt; &quot;CASCADE&quot;));

$queries = $schema-&gt;toSql($myPlatform); // get queries to create this schema.
$dropSchema = $schema-&gt;toDropSql($myPlatform); // get queries to safely delete this schema.
</code></pre>
<p>Now if you want to compare this schema with another schema, you can
use the <code>Comparator</code> class to get instances of <code>SchemaDiff</code>,
<code>TableDiff</code> and <code>ColumnDiff</code>, as well as information about other
foreign key, sequence and index changes.</p>
<pre><code class="php">&lt;?php
$comparator = new \Doctrine\DBAL\Schema\Comparator();
$schemaDiff = $comparator-&gt;compare($fromSchema, $toSchema);

$queries = $schemaDiff-&gt;toSql($myPlatform); // queries to get from one to another schema.
$saveQueries = $schemaDiff-&gt;toSaveSql($myPlatform);
</code></pre>
<p>The Save Diff mode is a specific mode that prevents the deletion of
tables and sequences that might occur when making a diff of your
schema. This is often necessary when your target schema is not
complete but only describes a subset of your application.</p>
<p>All methods that generate SQL queries for you make much effort to
get the order of generation correct, so that no problems will ever
occur with missing links of foreign keys.</p>
<h2 class="section-header" id="title.1.1"><a href="#title.1.1">Schema Assets<i class="fas fa-link"></i></a></h2>
<p>A schema asset is considered any abstract atomic unit in a database such as schemas,
tables, indexes, but also sequences, columns and even identifiers.
The following chapter gives an overview of all available Doctrine 2
schema assets with short explanations on their context and usage.
All schema assets reside in the <code>Doctrine\DBAL\Schema</code> namespace.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>This chapter is far from being completely documented.</p>
</div>
<h3 class="section-header" id="title.1.1.1"><a href="#title.1.1.1">Column<i class="fas fa-link"></i></a></h3>
<p>Represents a table column in the database schema.
A column consists of a name, a type, portable options, commonly supported options and
vendors specific options.</p>
<h4 class="section-header" id="title.1.1.1.1"><a href="#title.1.1.1.1">Portable options<i class="fas fa-link"></i></a></h4>
<p>The following options are considered to be fully portable across all database platforms:</p>
<ul><li class="dash"> <strong>notnull</strong> (boolean): Whether the column is nullable or not. Defaults to <code>true</code>.</li>
<li class="dash"> <strong>default</strong> (integer|string): The default value of the column if no value was specified.
   Defaults to <code>null</code>.</li>
<li class="dash"> <strong>autoincrement</strong> (boolean): Whether this column should use an autoincremented value if
   no value was specified. Only applies to Doctrine's <code>smallint</code>, <code>integer</code>
   and <code>bigint</code> types. Defaults to <code>false</code>.</li>
<li class="dash"> <strong>length</strong> (integer): The maximum length of the column. Only applies to Doctrine's
   <code>string</code> and <code>binary</code> types. Defaults to <code>null</code> and is evaluated to <code>255</code>
   in the platform.</li>
<li class="dash"> <strong>fixed</strong> (boolean): Whether a <code>string</code> or <code>binary</code> Doctrine type column has
   a fixed length. Defaults to <code>false</code>.</li>
<li class="dash"> <strong>precision</strong> (integer): The precision of a Doctrine <code>decimal</code> or <code>float</code> type
   column that determines the overall maximum number of digits to be stored (including scale).
   Defaults to <code>10</code>.</li>
<li class="dash"> <strong>scale</strong> (integer): The exact number of decimal digits to be stored in a Doctrine
   <code>decimal</code> or <code>float</code> type column. Defaults to <code>0</code>.</li>
<li class="dash"> <strong>customSchemaOptions</strong> (array): Additional options for the column that are
   supported by all vendors:</li>
<ul><li class="dash"> <strong>unique</strong> (boolean): Whether to automatically add a unique constraint for the column.
      Defaults to <code>false</code>.</li>
</ul>
</ul>

<h4 class="section-header" id="title.1.1.1.2"><a href="#title.1.1.1.2">Common options<i class="fas fa-link"></i></a></h4>
<p>The following options are not completely portable but are supported by most of the
vendors:</p>
<ul><li class="dash"> <strong>unsigned</strong> (boolean): Whether a <code>smallint</code>, <code>integer</code> or <code>bigint</code> Doctrine
   type column should allow unsigned values only. Supported by MySQL, SQL Anywhere
   and Drizzle. Defaults to <code>false</code>.</li>
<li class="dash"> <strong>comment</strong> (integer|string): The column comment. Supported by MySQL, PostgreSQL,
   Oracle, SQL Server, SQL Anywhere and Drizzle. Defaults to <code>null</code>.</li>
</ul>

<h4 class="section-header" id="title.1.1.1.3"><a href="#title.1.1.1.3">Vendor specific options<i class="fas fa-link"></i></a></h4>
<p>The following options are completely vendor specific and absolutely not portable:</p>
<ul><li class="dash"> <strong>columnDefinition</strong>: The custom column declaration SQL snippet to use instead
   of the generated SQL by Doctrine. Defaults to <code>null</code>. This can useful to add
   vendor specific declaration information that is not evaluated by Doctrine
   (such as the <code>ZEROFILL</code> attribute on MySQL).</li>
<li class="dash"> <strong>customSchemaOptions</strong> (array): Additional options for the column that are
   supported by some vendors but not portable:</li>
<ul><li class="dash"> <strong>charset</strong> (string): The character set to use for the column. Currently only supported
      on MySQL and Drizzle.</li>
<li class="dash"> <strong>collation</strong> (string): The collation to use for the column. Supported by MySQL, PostgreSQL,
      Sqlite, SQL Server and Drizzle.</li>
<li class="dash"> <strong>check</strong> (string): The check constraint clause to add to the column.
      Defaults to <code>null</code>.</li>
</ul>
</ul>

</body>
</html>                    </main>

        <footer class="footer">
            <div class="container">
                <i class="fa fa-copyright"></i> 2018 Doctrine
            </div>
        </footer>

        <script type="text/javascript">
            // When the user scrolls down 20px from the top of the document, show the button
            window.onscroll = function() {scrollFunction()};

            function scrollFunction() {
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    document.getElementById('back-to-top').style.display = "block";
                } else {
                    document.getElementById('back-to-top').style.display = "none";
                }
            }

            // When the user clicks on the button, scroll to the top of the document
            function topFunction() {
                document.body.scrollTop = 0; // For Safari
                document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
            }
        </script>

        <button onclick="topFunction()" id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://new.doctrine-project.org/components/highlightjs/highlight.pack.js?9"></script>
        <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
